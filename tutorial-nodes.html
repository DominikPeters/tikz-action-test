<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta content="LaTeX Lwarp package" name="generator" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Tutorial: A Petri-Net for Hagen - PGF/TikZ Manual</title>
    <link href="style.css" rel="stylesheet" type="text/css" />

    <script>
      // Lwarp MathJax emulation code
      //
      // Based on code by Davide P. Cervone.
      // Equation numbering: https://github.com/mathjax/MathJax/issues/2427
      // Starred and ifnextchar macros: https://github.com/mathjax/MathJax/issues/2428
      // \left, \right delimiters: https://github.com/mathjax/MathJax/issues/2535
      //
      // Modified by Brian Dunn to adjust equation numbering and add subequations.
      //
      // LaTeX can use \seteqnumber{subequations?}{section}{number} before each equation.
      // subequations? is 0 usually, 1 if inside subequations.
      // section is a string printed as-is, or empty.
      // number is auto-incremented by MathJax between equations.
      //
      MathJax = {
        subequations: "0",
        section: "",
        loader: {
          load: ["[tex]/tagformat", "[tex]/textmacros"],
        },
        startup: {
          ready() {
            // These would be replaced by import commands if you wanted to make
            // a proper extension.
            const Configuration =
              MathJax._.input.tex.Configuration.Configuration;
            const CommandMap = MathJax._.input.tex.SymbolMap.CommandMap;
            const Macro = MathJax._.input.tex.Symbol.Macro;
            const TexError = MathJax._.input.tex.TexError.default;
            const ParseUtil = MathJax._.input.tex.ParseUtil.default;
            const expandable = MathJax._.util.Options.expandable;

            // Insert the replacement string into the TeX string, and check
            // that there haven't been too many maxro substitutions (prevents
            // infinite loops).
            const useArgument = (parser, text) => {
              parser.string = ParseUtil.addArgs(
                parser,
                text,
                parser.string.slice(parser.i)
              );
              parser.i = 0;
              if (
                ++parser.macroCount > parser.configuration.options.maxMacros
              ) {
                throw new TexError(
                  "MaxMacroSub1",
                  "MathJax maximum macro substitution count exceeded; " +
                    "is there a recursive macro call?"
                );
              }
            };

            // Create the command map for:
            // \ifstar, \ifnextchar, \ifblank, \ifstrequal, \seteqnumber
            new CommandMap(
              "Lwarp-macros",
              {
                ifstar: "IfstarFunction",
                ifnextchar: "IfnextcharFunction",
                ifblank: "IfblankFunction",
                ifstrequal: "IfstrequalFunction",
                seteqnumber: "SeteqnumberFunction",
              },
              {
                // This function implements an ifstar macro.
                IfstarFunction(parser, name) {
                  const resultstar = parser.GetArgument(name);
                  const resultnostar = parser.GetArgument(name);
                  const star = parser.GetStar(); // true if there is a *
                  useArgument(parser, star ? resultstar : resultnostar);
                },

                // This function implements an ifnextchar macro.
                IfnextcharFunction(parser, name) {
                  let whichchar = parser.GetArgument(name);
                  if (whichchar.match(/^(?:0x[0-9A-F]+|[0-9]+)$/i)) {
                    // $ syntax highlighting
                    whichchar = String.fromCodePoint(parseInt(whichchar));
                  }
                  const resultnextchar = parser.GetArgument(name);
                  const resultnotnextchar = parser.GetArgument(name);
                  const gotchar = parser.GetNext() === whichchar;
                  useArgument(
                    parser,
                    gotchar ? resultnextchar : resultnotnextchar
                  );
                },

                // This function implements an ifblank macro.
                IfblankFunction(parser, name) {
                  const blankarg = parser.GetArgument(name);
                  const resultblank = parser.GetArgument(name);
                  const resultnotblank = parser.GetArgument(name);
                  const isblank = blankarg.trim() == "";
                  useArgument(parser, isblank ? resultblank : resultnotblank);
                },

                // This function implements an ifstrequal macro.
                IfstrequalFunction(parser, name) {
                  const strequalfirst = parser.GetArgument(name);
                  const strequalsecond = parser.GetArgument(name);
                  const resultequal = parser.GetArgument(name);
                  const resultnotequal = parser.GetArgument(name);
                  const isequal = strequalfirst == strequalsecond;
                  useArgument(parser, isequal ? resultequal : resultnotequal);
                },

                // This function modifies the equation numbers.
                SeteqnumberFunction(parser, name) {
                  // Get the macro parameters
                  const star = parser.GetStar(); // true if there is a *
                  const optBrackets = parser.GetBrackets(name); // contents of optional brackets
                  const newsubequations = parser.GetArgument(name); // the subequations argument
                  const neweqsection = parser.GetArgument(name); // the eq section argument
                  const neweqnumber = parser.GetArgument(name); // the eq number argument
                  MathJax.config.subequations = newsubequations; // a string with boolean meaning
                  MathJax.config.section = neweqsection; // a string with numeric meaning
                  parser.tags.counter = parser.tags.allCounter = neweqnumber;
                },
              }
            );

            // Create the Lwarp-macros package
            Configuration.create("Lwarp-macros", {
              handler: { macro: ["Lwarp-macros"] },
            });

            MathJax.startup.defaultReady();

            // For forward references:
            MathJax.startup.input[0].preFilters.add(({ math }) => {
              if (math.inputData.recompile) {
                MathJax.config.subequations =
                  math.inputData.recompile.subequations;
                MathJax.config.section = math.inputData.recompile.section;
              }
            });
            MathJax.startup.input[0].postFilters.add(({ math }) => {
              if (math.inputData.recompile) {
                math.inputData.recompile.subequations =
                  MathJax.config.subequations;
                math.inputData.recompile.section = MathJax.config.section;
              }
            });

            // For \left, \right with unicode-math:
            const { DelimiterMap } = MathJax._.input.tex.SymbolMap;
            const { Symbol } = MathJax._.input.tex.Symbol;
            const { MapHandler } = MathJax._.input.tex.MapHandler;
            const delimiter = MapHandler.getMap("delimiter");
            delimiter.add("\\lBrack", new Symbol("\\lBrack", "\u27E6"));
            delimiter.add("\\rBrack", new Symbol("\\rBrack", "\u27E7"));
            delimiter.add("\\lAngle", new Symbol("\\lAngle", "\u27EA"));
            delimiter.add("\\rAngle", new Symbol("\\rAngle", "\u27EB"));
            delimiter.add("\\lbrbrak", new Symbol("\\lbrbrak", "\u2772"));
            delimiter.add("\\rbrbrak", new Symbol("\\rbrbrak", "\u2773"));
            delimiter.add("\\lbag", new Symbol("\\lbag", "\u27C5"));
            delimiter.add("\\rbag", new Symbol("\\rbag", "\u27C6"));
            delimiter.add(
              "\\llparenthesis",
              new Symbol("\\llparenthesis", "\u2987")
            );
            delimiter.add(
              "\\rrparenthesis",
              new Symbol("\\rrparenthesis", "\u2988")
            );
            delimiter.add("\\llangle", new Symbol("\\llangle", "\u2989"));
            delimiter.add("\\rrangle", new Symbol("\\rrangle", "\u298A"));
            delimiter.add("\\Lbrbrak", new Symbol("\\Lbrbrak", "\u27EC"));
            delimiter.add("\\Rbrbrak", new Symbol("\\Rbrbrak", "\u27ED"));
            delimiter.add("\\lBrace", new Symbol("\\lBrace", "\u2983"));
            delimiter.add("\\rBrace", new Symbol("\\rBrace", "\u2984"));
            delimiter.add("\\lParen", new Symbol("\\lParen", "\u2985"));
            delimiter.add("\\rParen", new Symbol("\\rParen", "\u2986"));
            delimiter.add("\\lbrackubar", new Symbol("\\lbrackubar", "\u298B"));
            delimiter.add("\\rbrackubar", new Symbol("\\rbrackubar", "\u298C"));
            delimiter.add(
              "\\lbrackultick",
              new Symbol("\\lbrackultick", "\u298D")
            );
            delimiter.add(
              "\\rbracklrtick",
              new Symbol("\\rbracklrtick", "\u298E")
            );
            delimiter.add(
              "\\lbracklltick",
              new Symbol("\\lbracklltick", "\u298F")
            );
            delimiter.add(
              "\\rbrackurtick",
              new Symbol("\\rbrackurtick", "\u2990")
            );
            delimiter.add("\\langledot", new Symbol("\\langledot", "\u2991"));
            delimiter.add("\\rangledot", new Symbol("\\rangledot", "\u2992"));
            delimiter.add("\\lparenless", new Symbol("\\lparenless", "\u2993"));
            delimiter.add("\\rparengtr", new Symbol("\\rparengtr", "\u2994"));
            delimiter.add("\\Lparengtr", new Symbol("\\Lparengtr", "\u2995"));
            delimiter.add("\\Rparenless", new Symbol("\\Rparenless", "\u2996"));
            delimiter.add("\\lblkbrbrak", new Symbol("\\lblkbrbrak", "\u2997"));
            delimiter.add("\\rblkbrbrak", new Symbol("\\rblkbrbrak", "\u2998"));
            delimiter.add("\\lvzigzag", new Symbol("\\lvzigzag", "\u29D8"));
            delimiter.add("\\rvzigzag", new Symbol("\\rvzigzag", "\u29D9"));
            delimiter.add("\\Lvzigzag", new Symbol("\\Lvzigzag", "\u29DA"));
            delimiter.add("\\Rvzigzag", new Symbol("\\Rvzigzag", "\u29DB"));
            delimiter.add(
              "\\lcurvyangle",
              new Symbol("\\lcurvyangle", "\u29FC")
            );
            delimiter.add(
              "\\rcurvyangle",
              new Symbol("\\rcurvyangle", "\u29FD")
            );
            delimiter.add("\\Vvert", new Symbol("\\Vvert", "\u2980"));
          }, // ready
        }, // startup

        tex: {
          packages: { "[+]": ["tagformat", "Lwarp-macros", "textmacros"] },
          tags: "ams",
          tagformat: {
            number: function (n) {
              if (MathJax.config.subequations == 0)
                return MathJax.config.section + n;
              else return MathJax.config.section + String.fromCharCode(96 + n);
            },
          },
        },
      };
    </script>

    <script
      async
      id="MathJax-script"
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"
    ></script>

    <script src="pgfmanual.js"></script>

    <link href="https://unpkg.com/@docsearch/css@alpha" rel="stylesheet" />
    <link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png" />
    <link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png" />
    <link
      href="/apple-touch-icon.png"
      rel="apple-touch-icon"
      sizes="180x180"
      type="image/png"
    />
    <link href="/site.webmanifest" rel="manifest" />
  </head>
  <body>
    <a id="pgfmanual-autopage-164"></a>

    <div class="bodyandsidetoc grid-container">
      <header>
        <strong><a href="/">PGF/Ti<i>k</i>Z Manual</a></strong>
        <div id="search"></div>
      </header>
      <div class="sidetoccontainer" id="local-toc-container">
        <nav class="sidetoc">
          <div class="sidetoctitle"><p>On this page</p></div>
          <div class="sidetoccontents">
            <p>
              <a class="tocsubsection" href="#sec-3.1">Problem Statement</a>
            </p>
            <p>
              <a class="tocsubsection" href="#sec-3.2"
                >Setting up the Environment</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-3.2.1"
                >Setting up the Environment in LaTeX</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-3.2.2"
                >Setting up the Environment in Plain TeX</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-3.2.3"
                >Setting up the Environment in ConTeXt</a
              >
            </p>
            <p>
              <a class="tocsubsection" href="#sec-3.3">Introduction to Nodes</a>
            </p>
            <p>
              <a class="tocsubsection" href="#sec-3.4"
                >Placing Nodes Using the At Syntax</a
              >
            </p>
            <p><a class="tocsubsection" href="#sec-3.5">Using Styles</a></p>
            <p><a class="tocsubsection" href="#sec-3.6">Node Size</a></p>
            <p><a class="tocsubsection" href="#sec-3.7">Naming Nodes</a></p>
            <p>
              <a class="tocsubsection" href="#sec-3.8"
                >Placing Nodes Using Relative Placement</a
              >
            </p>
            <p>
              <a class="tocsubsection" href="#sec-3.9"
                >Adding Labels Next to Nodes</a
              >
            </p>
            <p>
              <a class="tocsubsection" href="#sec-3.10">Connecting Nodes</a>
            </p>
            <p>
              <a class="tocsubsection" href="#sec-3.11"
                >Adding Labels Next to Lines</a
              >
            </p>
            <p>
              <a class="tocsubsection" href="#sec-3.12"
                >Adding the Snaked Line and Multi-Line Text</a
              >
            </p>
            <p>
              <a class="tocsubsection" href="#sec-3.13"
                >Using Layers: The Background Rectangles</a
              >
            </p>
            <p>
              <a class="tocsubsection" href="#sec-3.14">The Complete Code</a>
            </p>
          </div>
        </nav>
      </div>
      <div class="sidetoccontainer" id="chapter-toc-container">
        <nav class="sidetoc">
          <div class="sidetoctitle">
            <p>
              <span class="sidetocthetitle"
                >The Ti<em>k</em>Z and PGF Packages<br />
                Manual for version 3.1.9a</span
              >
            </p>

            <p>Contents</p>
          </div>

          <div class="sidetoccontents">
            <p></p>

            <p>
              <a class="linkintro" href="/">Introduction</a>
            </p>

            <p class="current-part">
              <a class="tocpart" href="tutorials-guidelines"
                >Tutorials and Guidelines</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="tutorial"
                >Tutorial: A Picture for Karl&rsquo;s Students</a
              >
            </p>

            <p class="current current-part">
              <a class="tocsection" href="tutorial-nodes"
                >Tutorial: A Petri-Net for Hagen</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="tutorial-Euclid"
                >Tutorial: Euclid&rsquo;s Amber Version of the
                <em>Elements</em></a
              >
            </p>
          </div>
        </nav>
      </div>

      <main class="bodycontainer">
        <section class="textbody">
          <h1>
            The Ti<em>k</em>Z and PGF Packages<br />
            Manual for version 3.1.9a
          </h1>
          <h2 class="inserted">Tutorials and Guidelines</h2>

          <!--MathJax customizations:-->

          <div class="hidden">
            \(\newcommand{\footnotename}{footnote}\) \(\def \LWRfootnote {1}\)
            \(\newcommand {\footnote }[2][\LWRfootnote ]{{}^{\mathrm {#1}}}\)
            \(\newcommand {\footnotemark }[1][\LWRfootnote ]{{}^{\mathrm
            {#1}}}\) \(\let \LWRorighspace \hspace \) \(\renewcommand {\hspace
            }{\ifstar \LWRorighspace \LWRorighspace }\) \(\newcommand
            {\mathnormal }[1]{{#1}}\) \(\newcommand \ensuremath [1]{#1}\)
            \(\newcommand {\LWRframebox }[2][]{\fbox {#2}} \newcommand
            {\framebox }[1][]{\LWRframebox } \) \(\newcommand {\setlength
            }[2]{}\) \(\newcommand {\addtolength }[2]{}\) \(\newcommand
            {\setcounter }[2]{}\) \(\newcommand {\addtocounter }[2]{}\)
            \(\newcommand {\arabic }[1]{}\) \(\newcommand {\number }[1]{}\)
            \(\newcommand {\noalign }[1]{\text {#1}\notag \\}\) \(\newcommand
            {\cline }[1]{}\) \(\newcommand {\directlua }[1]{\text
            {(directlua)}}\) \(\newcommand {\luatexdirectlua }[1]{\text
            {(directlua)}}\) \(\newcommand {\protect }{}\) \(\def
            \LWRabsorbnumber #1 {}\) \(\def \LWRabsorbquotenumber "#1 {}\)
            \(\newcommand {\LWRabsorboption }[1][]{}\) \(\newcommand
            {\LWRabsorbtwooptions }[1][]{\LWRabsorboption }\) \(\def \mathchar
            {\ifnextchar "\LWRabsorbquotenumber \LWRabsorbnumber }\) \(\def
            \mathcode #1={\mathchar }\) \(\let \delcode \mathcode \) \(\let
            \delimiter \mathchar \) \(\def \oe {\unicode {x0153}}\) \(\def \OE
            {\unicode {x0152}}\) \(\def \ae {\unicode {x00E6}}\) \(\def \AE
            {\unicode {x00C6}}\) \(\def \aa {\unicode {x00E5}}\) \(\def \AA
            {\unicode {x00C5}}\) \(\def \o {\unicode {x00F8}}\) \(\def \O
            {\unicode {x00D8}}\) \(\def \l {\unicode {x0142}}\) \(\def \L
            {\unicode {x0141}}\) \(\def \ss {\unicode {x00DF}}\) \(\def \SS
            {\unicode {x1E9E}}\) \(\def \dag {\unicode {x2020}}\) \(\def \ddag
            {\unicode {x2021}}\) \(\def \P {\unicode {x00B6}}\) \(\def
            \copyright {\unicode {x00A9}}\) \(\def \pounds {\unicode {x00A3}}\)
            \(\let \LWRref \ref \) \(\renewcommand {\ref }{\ifstar \LWRref
            \LWRref }\) \( \newcommand {\multicolumn }[3]{#3}\) \(\require
            {textcomp}\) \( \newcommand {\meta }[1]{\langle \textit {#1}\rangle
            } \) \(\newcommand {\intertext }[1]{\text {#1}\notag \\}\) \(\let
            \Hat \hat \) \(\let \Check \check \) \(\let \Tilde \tilde \) \(\let
            \Acute \acute \) \(\let \Grave \grave \) \(\let \Dot \dot \) \(\let
            \Ddot \ddot \) \(\let \Breve \breve \) \(\let \Bar \bar \) \(\let
            \Vec \vec \)
          </div>

          <p></p>
          <h4 id="autosec-165">
            <span class="sectionnumber">3&emsp;</span>Tutorial: A Petri-Net for
            Hagen
          </h4>
          <a id="pgfmanual-autopage-165"></a>
          <a id="pgfmanual-autofile-4"></a>

          <p>
            In this second tutorial we explore the node mechanism of
            Ti<em>k</em>Z and <span class="textsc">pgf</span>.
          </p>

          <p>
            Hagen must give a talk tomorrow about his favorite formalism for
            distributed systems: Petri nets! Hagen used to give his talks using
            a blackboard and everyone seemed to be perfectly content with this.
            Unfortunately, his audience has been spoiled recently with fancy
            projector-based presentations and there seems to be a certain amount
            of peer pressure that his Petri nets should also be drawn using a
            graphic program. One of the professors at his institute recommends
            Ti<em>k</em>Z for this and Hagen decides to give it a try.
          </p>
          <h5 id="autosec-166">
            <span class="sectionnumber" id="sec-3.1">3.1&emsp;</span>Problem
            Statement<a class="anchor-link" href="#sec-3.1">&para;</a>
          </h5>
          <a id="pgfmanual-autopage-166"></a>

          <p>
            For his talk, Hagen wishes to create a graphic that demonstrates how
            a net with place capacities can be simulated by a net without
            capacities. The graphic should look like this, ideally:
          </p>
          <blockquote>
            <p>
              <span class="lateximagesource" id="lateximage-pgfmanual-59"
                ><!--
      2 2


           replacement
          of the capacity
s≤3
           by two places
                            s s̄




      2 2
--><img
                  alt="(-tikz-&nbsp;diagram)"
                  class="lateximage"
                  src="pgfmanual-images/image-59.svg"
                  style
              /></span>
            </p>
          </blockquote>
          <h5 id="autosec-170">
            <span class="sectionnumber" id="sec-3.2">3.2&emsp;</span>Setting up
            the Environment<a class="anchor-link" href="#sec-3.2">&para;</a>
          </h5>
          <a id="pgfmanual-autopage-170"></a>

          <p>
            For the picture Hagen will need to load the Ti<em>k</em>Z package as
            did Karl in the previous tutorial. However, Hagen will also need to
            load some additional <em>library packages</em> that Karl did not
            need. These library packages contain additional definitions like
            extra arrow tips that are typically not needed in a picture and that
            need to be loaded explicitly.
          </p>

          <p>
            Hagen will need to load several libraries: The
            <span class="texttt">arrows.meta</span> library for the special
            arrow tip used in the graphic, the
            <span class="texttt">decorations.pathmorphing</span> library for the
            &ldquo;snaking line&rdquo; in the middle, the
            <span class="texttt">backgrounds</span> library for the two
            rectangular areas that are behind the two main parts of the picture,
            the <span class="texttt">fit</span> library to easily compute the
            sizes of these rectangles, and the
            <span class="texttt">positioning</span> library for placing nodes
            relative to other nodes.
          </p>
          <h6 id="autosec-171">
            <span class="sectionnumber" id="sec-3.2.1">3.2.1&emsp;</span>Setting
            up the Environment in
            <span class="latexlogofont"
              ><span class="latexlogo"
                >L<span class="latexlogosup">a</span>T<span class="latexlogosub"
                  >e</span
                >X</span
              ></span
            ><a class="anchor-link" href="#sec-3.2.1">&para;</a>
          </h6>
          <a id="pgfmanual-autopage-171"></a>

          <p>
            When using
            <span class="latexlogofont"
              ><span class="latexlogo"
                >L<span class="latexlogosup">a</span>T<span class="latexlogosub"
                  >e</span
                >X</span
              ></span
            >
            use:
          </p>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #0000b2"
                  >\documentclass</span
                >{<span class="textcolor" style="color: #000000">article</span
                >}&numsp;<span class="example-code-comment">% say</span><br />
                <br />
                <span class="textcolor" style="color: #0000b2">\usepackage</span
                >{<span class="textcolor" style="color: #000000">tikz</span
                >}<br />
                \usetikzlibrary{arrows.meta,decorations.pathmorphing,backgrounds,positioning,fit,petri}<br />
                <br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2">document</span
                >}<br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\draw</span
                >&numsp;<span class="textcolor" style="color: #800080"
                  >(0,0)</span
                >&numsp;<span class="textcolor" style="color: #000000">--</span>
                <span class="textcolor" style="color: #800080">(1,1)</span
                >;<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >document</span
                >}<br />
              </code>
            </div>
          </figure>
          <h6 id="autosec-172">
            <span class="sectionnumber" id="sec-3.2.2">3.2.2&emsp;</span>Setting
            up the Environment in Plain
            <span class="latexlogofont"
              ><span class="latexlogo"
                >T<span class="latexlogosub">e</span>X</span
              ></span
            ><a class="anchor-link" href="#sec-3.2.2">&para;</a>
          </h6>
          <a id="pgfmanual-autopage-172"></a>

          <p>
            When using plain
            <span class="latexlogofont"
              ><span class="latexlogo"
                >T<span class="latexlogosub">e</span>X</span
              ></span
            >
            use:
          </p>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="example-code-comment">%% Plain TeX file</span
                ><br />
                <span class="textcolor" style="color: #0000b2">\input</span
                >&numsp;<span class="textcolor" style="color: #000000"
                  >tikz</span
                >.<span class="textcolor" style="color: #000000">tex</span
                ><br />
                \usetikzlibrary{arrows.meta,decorations.pathmorphing,backgrounds,positioning,fit,petri}<br />
                <span class="textcolor" style="color: #0000b2"
                  >\baselineskip</span
                ><span class="textcolor" style="color: #000000">=12pt</span
                ><br />
                <span class="textcolor" style="color: #0000b2">\hsize</span
                ><span class="textcolor" style="color: #000000">=6</span>.<span
                  class="textcolor"
                  style="color: #000000"
                  >3truein</span
                ><br />
                <span class="textcolor" style="color: #0000b2">\vsize</span
                ><span class="textcolor" style="color: #000000">=8</span>.<span
                  class="textcolor"
                  style="color: #000000"
                  >7truein</span
                ><br />
                <span class="textcolor" style="color: #0000b2"
                  >\tikzpicture</span
                ><br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\draw</span
                >&numsp;<span class="textcolor" style="color: #800080"
                  >(0,0)</span
                >&numsp;<span class="textcolor" style="color: #000000">--</span>
                <span class="textcolor" style="color: #800080">(1,1)</span
                >;<br />
                <span class="textcolor" style="color: #0000b2"
                  >\endtikzpicture</span
                ><br />
                <span class="textcolor" style="color: #0000b2">\bye</span><br />
              </code>
            </div>
          </figure>
          <h6 id="autosec-173">
            <span class="sectionnumber" id="sec-3.2.3">3.2.3&emsp;</span>Setting
            up the Environment in Con<span class="latexlogofont"
              ><span class="latexlogo"
                >T<span class="latexlogosub">e</span>X</span
              ></span
            >t<a class="anchor-link" href="#sec-3.2.3">&para;</a>
          </h6>
          <a id="pgfmanual-autopage-173"></a>

          <p>
            When using Con<span class="latexlogofont"
              ><span class="latexlogo"
                >T<span class="latexlogosub">e</span>X</span
              ></span
            >t, use:
          </p>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="example-code-comment">%% ConTeXt file</span><br />
                <span class="textcolor" style="color: #0000b2">\usemodule</span
                >[<span class="textcolor" style="color: #008000">tikz</span
                >]<br />
                <span class="textcolor" style="color: #0000b2"
                  >\usetikzlibrary</span
                >[<span class="textcolor" style="color: #008000"
                  >arrows.meta</span
                >,<span class="textcolor" style="color: #008000"
                  >decorations.pathmorphing</span
                >,<span class="textcolor" style="color: #008000"
                  >backgrounds</span
                >,<span class="textcolor" style="color: #008000"
                  >positioning</span
                >,<span class="textcolor" style="color: #008000">fit</span
                >,<span class="textcolor" style="color: #008000">petri</span
                >]<br />
                <br />
                <span class="textcolor" style="color: #0000b2">\starttext</span
                ><br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\starttikzpicture</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\draw</span
                >&numsp;<span class="textcolor" style="color: #800080"
                  >(0,0)</span
                >&numsp;<span class="textcolor" style="color: #000000">--</span>
                <span class="textcolor" style="color: #800080">(1,1)</span
                >;<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\stoptikzpicture</span
                ><br />
                <span class="textcolor" style="color: #0000b2">\stoptext</span
                ><br />
              </code>
            </div>
          </figure>
          <h5 id="autosec-174">
            <span class="sectionnumber" id="sec-3.3">3.3&emsp;</span
            >Introduction to Nodes<a class="anchor-link" href="#sec-3.3"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-174"></a>

          <p>
            In principle, we already know how to create the graphics that Hagen
            desires (except perhaps for the snaked line, we will come to that):
            We start with big light gray rectangle and then add lots of circles
            and small rectangle, plus some arrows.
          </p>

          <p>
            However, this approach has numerous disadvantages: First, it is hard
            to change anything at a later stage. For example, if we decide to
            add more places to the Petri nets (the circles are called places in
            Petri net theory), all of the coordinates change and we need to
            recalculate everything. Second, it is hard to read the code for the
            Petri net as it is just a long and complicated list of coordinates
            and drawing commands &ndash; the underlying structure of the Petri
            net is lost.
          </p>

          <p>
            Fortunately, Ti<em>k</em>Z offers a powerful mechanism for avoiding
            the above problems: nodes. We already came across nodes in the
            previous tutorial, where we used them to add labels to Karl&rsquo;s
            graphic. In the present tutorial we will see that nodes are much
            more powerful.
          </p>

          <p>
            A node is a small part of a picture. When a node is created, you
            provide a position where the node should be drawn and a
            <em>shape</em>. A node of shape
            <span class="texttt">circle</span> will be drawn as a circle, a node
            of shape <span class="texttt">rectangle</span> as a rectangle, and
            so on. A node may also contain some text, which is why Karl used
            nodes to show text. Finally, a node can get a <em>name</em> for
            later reference.
          </p>

          <p>
            In Hagen&rsquo;s picture we will use nodes for the places and for
            the transitions of the Petri net (the places are the circles, the
            transitions are the rectangles). Let us start with the upper half of
            the left Petri net. In this upper half we have three places and two
            transitions. Instead of drawing three circles and two rectangles, we
            use three nodes of shape <span class="texttt">circle</span> and two
            nodes of shape <span class="texttt">rectangle</span>.
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-60"
                  ><!--
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-60.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\path</span
                >&numsp;<span class="textcolor" style="color: #800080"
                  >( 0,2)</span
                >&numsp;<span class="textcolor" style="color: #000000"
                  >node</span
                >
                [<span class="textcolor" style="color: #008000">shape</span
                >=<span class="textcolor" style="color: #008000">circle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >]&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >( 0,1)</span
                >&numsp;<span class="textcolor" style="color: #000000"
                  >node</span
                >
                [<span class="textcolor" style="color: #008000">shape</span
                >=<span class="textcolor" style="color: #008000">circle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >]&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >( 0,0)</span
                >&numsp;<span class="textcolor" style="color: #000000"
                  >node</span
                >
                [<span class="textcolor" style="color: #008000">shape</span
                >=<span class="textcolor" style="color: #008000">circle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >]&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >( 1,1)</span
                >&numsp;<span class="textcolor" style="color: #000000"
                  >node</span
                >
                [<span class="textcolor" style="color: #008000">shape</span
                >=<span class="textcolor" style="color: #008000">rectangle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >]&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(-1,1)</span
                >&numsp;<span class="textcolor" style="color: #000000"
                  >node</span
                >
                [<span class="textcolor" style="color: #008000">shape</span
                >=<span class="textcolor" style="color: #008000">rectangle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >]&numsp;{};<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>

          <p>
            Hagen notes that this does not quite look like the final picture,
            but it seems like a good first step.
          </p>

          <p>
            Let us have a more detailed look at the code. The whole picture
            consists of a single path. Ignoring the
            <span class="texttt">node</span> operations, there is not much going
            on in this path: It is just a sequence of coordinates with nothing
            &ldquo;happening&rdquo; between them. Indeed, even if something were
            to happen like a line-to or a curve-to, the
            <span class="texttt">\path</span> command would not &ldquo;do&rdquo;
            anything with the resulting path. So, all the magic must be in the
            <span class="texttt">node</span> commands.
          </p>

          <p>
            In the previous tutorial we learned that a
            <span class="texttt">node</span> will add a piece of text at the
            last coordinate. Thus, each of the five nodes is added at a
            different position. In the above code, this text is empty (because
            of the empty <span class="texttt">{}</span>). So, why do we see
            anything at all? The answer is the
            <span class="texttt">draw</span> option for the
            <span class="texttt">node</span> operation: It causes the
            &ldquo;shape around the text&rdquo; to be drawn.
          </p>

          <p>
            So, the code
            <span class="texttt">(0,2) node [shape=circle,draw] {}</span> means
            the following: &ldquo;In the main path, add a move-to to the
            coordinate <span class="texttt">(0,2)</span>. Then, temporarily
            suspend the construction of the main path while the node is built.
            This node will be a <span class="texttt">circle</span> around an
            empty text. This circle is to be <span class="texttt">draw</span>n,
            but not filled or otherwise used. Once this whole node is
            constructed, it is saved until after the main path is finished.
            Then, it is drawn.&rdquo; The following
            <span class="texttt">(0,1) node [shape=circle,draw] {}</span> then
            has the following effect: &ldquo;Continue the main path with a
            move-to to <span class="texttt">(0,1)</span>. Then construct a node
            at this position also. This node is also shown after the main path
            is finished.&rdquo; And so on.
          </p>
          <h5 id="autosec-177">
            <span class="sectionnumber" id="sec-3.4">3.4&emsp;</span>Placing
            Nodes Using the At Syntax<a class="anchor-link" href="#sec-3.4"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-177"></a>

          <p>
            Hagen now understands how the
            <span class="texttt">node</span> operation adds nodes to the path,
            but it seems a bit silly to create a path using the
            <span class="texttt">\path</span> operation, consisting of numerous
            superfluous move-to operations, only to place nodes. He is pleased
            to learn that there are ways to add nodes in a more sensible manner.
          </p>

          <p>
            First, the <span class="texttt">node</span> operation allows one to
            add <span class="texttt">at (</span
            ><span class="angle">&langle;</span><i>coordinate</i
            ><span class="angle">&rangle;</span><span class="texttt">)</span> in
            order to directly specify where the node should be placed,
            sidestepping the rule that nodes are placed on the last coordinate.
            Hagen can then write the following:
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-61"
                  ><!--
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-61.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\path</span
                >&numsp;<span class="textcolor" style="color: #000000"
                  >node</span
                >
                <span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 0,2)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >shape</span
                >=<span class="textcolor" style="color: #008000">circle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >]&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >node</span
                >
                <span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 0,1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >shape</span
                >=<span class="textcolor" style="color: #008000">circle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >]&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >node</span
                >
                <span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 0,0)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >shape</span
                >=<span class="textcolor" style="color: #008000">circle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >]&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >node</span
                >
                <span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 1,1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >shape</span
                >=<span class="textcolor" style="color: #008000">rectangle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >]&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >node</span
                >
                <span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">(-1,1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >shape</span
                >=<span class="textcolor" style="color: #008000">rectangle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >]&numsp;{};<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>

          <p>
            Now Hagen is still left with a single empty path, but at least the
            path no longer contains strange move-to&rsquo;s. It turns out that
            this can be improved further: The
            <span class="texttt">\node</span> command is an abbreviation for
            <span class="texttt">\path node</span>, which allows Hagen to write:
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-62"
                  ><!--
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-62.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 0,2)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >circle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 0,1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >circle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 0,0)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >circle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 1,1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >rectangle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">(-1,1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >rectangle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >]&numsp;{};<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>

          <p>
            Hagen likes this syntax much better than the previous one. Note that
            Hagen has also omitted the <span class="texttt">shape=</span> since,
            like <span class="texttt">color=</span>, Ti<em>k</em>Z allows you to
            omit the <span class="texttt">shape=</span> if there is no
            confusion.
          </p>
          <h5 id="autosec-182">
            <span class="sectionnumber" id="sec-3.5">3.5&emsp;</span>Using
            Styles<a class="anchor-link" href="#sec-3.5">&para;</a>
          </h5>
          <a id="pgfmanual-autopage-182"></a>

          <p>
            Feeling adventurous, Hagen tries to make the nodes look nicer. In
            the final picture, the circles and rectangle should be filled with
            different colors, resulting in the following code:
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-63"
                  ><!--
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-63.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}[<span class="textcolor" style="color: #008000">thick</span
                >]<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 0,2)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >circle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >=<span class="textcolor" style="color: #008000">blue!50</span
                >,<span class="textcolor" style="color: #008000">fill</span
                >=<span class="textcolor" style="color: #008000">blue!20</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 0,1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >circle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >=<span class="textcolor" style="color: #008000">blue!50</span
                >,<span class="textcolor" style="color: #008000">fill</span
                >=<span class="textcolor" style="color: #008000">blue!20</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 0,0)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >circle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >=<span class="textcolor" style="color: #008000">blue!50</span
                >,<span class="textcolor" style="color: #008000">fill</span
                >=<span class="textcolor" style="color: #008000">blue!20</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 1,1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >rectangle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >=<span class="textcolor" style="color: #008000">black!50</span
                >,<span class="textcolor" style="color: #008000">fill</span
                >=<span class="textcolor" style="color: #008000">black!20</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">(-1,1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >rectangle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >=<span class="textcolor" style="color: #008000">black!50</span
                >,<span class="textcolor" style="color: #008000">fill</span
                >=<span class="textcolor" style="color: #008000">black!20</span
                >]&numsp;{};<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>

          <p>
            While this looks nicer in the picture, the code starts to get a bit
            ugly. Ideally, we would like our code to transport the message
            &ldquo;there are three places and two transitions&rdquo; and not so
            much which filling colors should be used.
          </p>

          <p>
            To solve this problem, Hagen uses styles. He defines a style for
            places and another style for transitions:
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-64"
                  ><!--
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-64.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                &numsp;&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >/<span class="textcolor" style="color: #0000b2">.style</span
                >={<span class="textcolor" style="color: #008000">circle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >=<span class="textcolor" style="color: #008000">blue!50</span
                >,<span class="textcolor" style="color: #008000">fill</span
                >=<span class="textcolor" style="color: #008000">blue!20</span
                >,<span class="textcolor" style="color: #008000">thick</span
                >},<br />
                &numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #008000"
                  >transition</span
                >/<span class="textcolor" style="color: #0000b2">.style</span
                >={<span class="textcolor" style="color: #008000"
                  >rectangle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >=<span class="textcolor" style="color: #008000">black!50</span
                >,<span class="textcolor" style="color: #008000">fill</span
                >=<span class="textcolor" style="color: #008000">black!20</span
                >,<span class="textcolor" style="color: #008000">thick</span
                >}]<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 0,2)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 0,1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 0,0)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 1,1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">(-1,1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;{};<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>
          <h5 id="autosec-187">
            <span class="sectionnumber" id="sec-3.6">3.6&emsp;</span>Node Size<a
              class="anchor-link"
              href="#sec-3.6"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-187"></a>

          <p>
            Before Hagen starts naming and connecting the nodes, let us first
            make sure that the nodes get their final appearance. They are still
            too small. Indeed, Hagen wonders why they have any size at all,
            after all, the text is empty. The reason is that Ti<em>k</em>Z
            automatically adds some space around the text. The amount is set
            using the option <span class="texttt">inner sep</span>. So, to
            increase the size of the nodes, Hagen could write:
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-65"
                  ><!--
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-65.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                &numsp;&numsp;[<span class="textcolor" style="color: #008000"
                  >inner sep</span
                >=<span class="textcolor" style="color: #008000">2mm</span
                >,<br />
                &numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #008000"
                  >place</span
                >/<span class="textcolor" style="color: #0000b2">.style</span
                >={<span class="textcolor" style="color: #008000">circle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >=<span class="textcolor" style="color: #008000">blue!50</span
                >,<span class="textcolor" style="color: #008000">fill</span
                >=<span class="textcolor" style="color: #008000">blue!20</span
                >,<span class="textcolor" style="color: #008000">thick</span
                >},<br />
                &numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #008000"
                  >transition</span
                >/<span class="textcolor" style="color: #0000b2">.style</span
                >={<span class="textcolor" style="color: #008000"
                  >rectangle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >=<span class="textcolor" style="color: #008000">black!50</span
                >,<span class="textcolor" style="color: #008000">fill</span
                >=<span class="textcolor" style="color: #008000">black!20</span
                >,<span class="textcolor" style="color: #008000">thick</span
                >}]<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 0,2)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 0,1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 0,0)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 1,1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">(-1,1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;{};<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>

          <p>
            However, this is not really the best way to achieve the desired
            effect. It is much better to use the
            <span class="texttt">minimum size</span> option instead. This option
            allows Hagen to specify a minimum size that the node should have. If
            the node actually needs to be bigger because of a longer text, it
            will be larger, but if the text is empty, then the node will have
            <span class="texttt">minimum size</span>. This option is also useful
            to ensure that several nodes containing different amounts of text
            have the same size. The options
            <span class="texttt">minimum height</span> and
            <span class="texttt">minimum width</span> allow you to specify the
            minimum height and width independently.
          </p>

          <p>
            So, what Hagen needs to do is to provide
            <span class="texttt">minimum size</span> for the nodes. To be on the
            safe side, he also sets <span class="texttt">inner sep=0pt</span>.
            This ensures that the nodes will really have size
            <span class="texttt">minimum size</span> and not, for very small
            minimum sizes, the minimal size necessary to encompass the
            automatically added space.
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-66"
                  ><!--
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-66.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                &numsp;&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >/<span class="textcolor" style="color: #0000b2">.style</span
                >={<span class="textcolor" style="color: #008000">circle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >=<span class="textcolor" style="color: #008000">blue!50</span
                >,<span class="textcolor" style="color: #008000">fill</span
                >=<span class="textcolor" style="color: #008000">blue!20</span
                >,<span class="textcolor" style="color: #008000">thick</span
                >,<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #008000"
                  >inner sep</span
                >=<span class="textcolor" style="color: #008000">0pt</span
                >,<span class="textcolor" style="color: #008000"
                  >minimum size</span
                >=<span class="textcolor" style="color: #008000">6mm}</span
                >,<br />
                &numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #008000"
                  >transition</span
                >/<span class="textcolor" style="color: #0000b2">.style</span
                >={<span class="textcolor" style="color: #008000"
                  >rectangle</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >=<span class="textcolor" style="color: #008000">black!50</span
                >,<span class="textcolor" style="color: #008000">fill</span
                >=<span class="textcolor" style="color: #008000">black!20</span
                >,<span class="textcolor" style="color: #008000">thick</span
                >,<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #008000"
                  >inner sep</span
                >=<span class="textcolor" style="color: #008000">0pt</span
                >,<span class="textcolor" style="color: #008000"
                  >minimum size</span
                >=<span class="textcolor" style="color: #008000">4mm}</span
                >]<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 0,2)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 0,1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 0,0)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 1,1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">(-1,1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;{};<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>
          <h5 id="autosec-192">
            <span class="sectionnumber" id="sec-3.7">3.7&emsp;</span>Naming
            Nodes<a class="anchor-link" href="#sec-3.7">&para;</a>
          </h5>
          <a id="pgfmanual-autopage-192"></a>

          <p>
            Hagen&rsquo;s next aim is to connect the nodes using arrows. This
            seems like a tricky business since the arrows should not start in
            the middle of the nodes, but somewhere on the border and Hagen would
            very much like to avoid computing these positions by hand.
          </p>

          <p>
            Fortunately, <span class="textsc">pgf</span> will perform all the
            necessary calculations for him. However, he first has to assign
            names to the nodes so that he can reference them later on.
          </p>

          <p>
            There are two ways to name a node. The first is to use the
            <span class="texttt">name=</span> option. The second method is to
            write the desired name in parentheses after the
            <span class="texttt">node</span> operation. Hagen thinks that this
            second method seems strange, but he will soon change his opinion.
          </p>

          <div class="hidden"></div>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-67"
                  ><!--
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-67.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="example-code-comment">% ... set up styles</span
                ><br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #800080"
                  >(waiting 1)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >at</span
                >
                <span class="textcolor" style="color: #800080">( 0,2)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #800080"
                  >(critical 1)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >at</span
                >
                <span class="textcolor" style="color: #800080">( 0,1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #800080"
                  >(semaphore)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >at</span
                >
                <span class="textcolor" style="color: #800080">( 0,0)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #800080"
                  >(leave critical)</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 1,1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #800080"
                  >(enter critical)</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">(-1,1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;{};<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>

          <p>
            Hagen is pleased to note that the names help in understanding the
            code. Names for nodes can be pretty arbitrary, but they should not
            contain commas, periods, parentheses, colons, and some other special
            characters. However, they can contain underscores and hyphens.
          </p>

          <p>
            The syntax for the <span class="texttt">node</span> operation is
            quite liberal with respect to the order in which node names, the
            <span class="texttt">at</span> specifier, and the options must come.
            Indeed, you can even have multiple option blocks between the
            <span class="texttt">node</span> and the text in curly braces, they
            accumulate. You can rearrange them arbitrarily and perhaps the
            following might be preferable:
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-68"
                  ><!--
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-68.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(waiting 1)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >at</span
                >
                <span class="textcolor" style="color: #800080">( 0,2)</span
                >&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(critical 1)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >at</span
                >
                <span class="textcolor" style="color: #800080">( 0,1)</span
                >&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(semaphore)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >at</span
                >
                <span class="textcolor" style="color: #800080">( 0,0)</span
                >&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(leave critical)</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">( 1,1)</span
                >&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(enter critical)</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">(-1,1)</span
                >&numsp;{};<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>
          <h5 id="autosec-197">
            <span class="sectionnumber" id="sec-3.8">3.8&emsp;</span>Placing
            Nodes Using Relative Placement<a class="anchor-link" href="#sec-3.8"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-197"></a>

          <p>
            Although Hagen still wishes to connect the nodes, he first wishes to
            address another problem again: The placement of the nodes. Although
            he likes the <span class="texttt">at</span> syntax, in this
            particular case he would prefer placing the nodes &ldquo;relative to
            each other&rdquo;. So, Hagen would like to say that the
            <span class="texttt">critical 1</span> node should be below the
            <span class="texttt">waiting 1</span> node, wherever the
            <span class="texttt">waiting 1</span> node might be. There are
            different ways of achieving this, but the nicest one in
            Hagen&rsquo;s case is the <span class="texttt">below</span> option:
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-69"
                  ><!--
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-69.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <span class="c- preamble">\usetikzlibrary {positioning} </span
                ><br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(waiting)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(critical)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                  class="textcolor"
                  style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000"
                  >of waiting</span
                >]&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(semaphore)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                  class="textcolor"
                  style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(leave critical)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >right</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(enter critical)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >left</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;&numsp;{};<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>

          <p>
            With the <span class="texttt">positioning</span> library loaded,
            when an option like <span class="texttt">below</span> is followed by
            <span class="texttt">of</span>, then the position of the node is
            shifted in such a manner that it is placed at the distance
            <span class="texttt">node distance</span> in the specified direction
            of the given direction. The
            <span class="texttt">node distance</span> is either the distance
            between the centers of the nodes (when the
            <span class="texttt">on grid</span> option is set to true) or the
            distance between the borders (when the
            <span class="texttt">on grid</span> option is set to false, which is
            the default).
          </p>

          <p>
            Even though the above code has the same effect as the earlier code,
            Hagen can pass it to his colleagues who will be able to just read
            and understand it, perhaps without even having to see the picture.
          </p>
          <h5 id="autosec-200">
            <span class="sectionnumber" id="sec-3.9">3.9&emsp;</span>Adding
            Labels Next to Nodes<a class="anchor-link" href="#sec-3.9"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-200"></a>

          <p>
            Before we have a look at how Hagen can connect the nodes, let us add
            the capacity &ldquo;\(s \le 3\)&rdquo; to the bottom node. For this,
            two approaches are possible:
          </p>
          <ul style="list-style-type: none">
            <li>
              <p>
                1. Hagen can just add a new node above the
                <span class="texttt">north</span> anchor of the
                <span class="texttt">semaphore</span> node.
              </p>

              <figure class="example">
                <div class="example-image">
                  <p>
                    <span class="lateximagesource" id="lateximage-pgfmanual-70"
                      ><!--
s≤3
--><img
                        alt="(-tikz-&nbsp;diagram)"
                        class="lateximage"
                        src="pgfmanual-images/image-70.svg"
                        style
                    /></span>
                  </p>
                </div>

                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <span class="c- preamble"
                      >\usetikzlibrary {positioning} </span
                    ><br />
                    <span class="textcolor" style="color: #000000">\begin</span
                    >{<span class="textcolor" style="color: #0000b2"
                      >tikzpicture</span
                    >}<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      >\node</span
                    >[<span class="textcolor" style="color: #008000">place</span
                    >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                      class="textcolor"
                      style="color: #800080"
                      >(waiting)</span
                    >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{};<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      >\node</span
                    >[<span class="textcolor" style="color: #008000">place</span
                    >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                      class="textcolor"
                      style="color: #800080"
                      >(critical)</span
                    >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                      class="textcolor"
                      style="color: #008000"
                      >below</span
                    >=<span class="textcolor" style="color: #008000"
                      >of waiting</span
                    >]&numsp;&numsp;{};<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      >\node</span
                    >[<span class="textcolor" style="color: #008000">place</span
                    >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                      class="textcolor"
                      style="color: #800080"
                      >(semaphore)</span
                    >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                      class="textcolor"
                      style="color: #008000"
                      >below</span
                    >=<span class="textcolor" style="color: #008000"
                      >of critical</span
                    >]&numsp;{};<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      >\node</span
                    >[<span class="textcolor" style="color: #008000"
                      >transition</span
                    >]&numsp;<span class="textcolor" style="color: #800080"
                      >(leave critical)</span
                    >&numsp;[<span class="textcolor" style="color: #008000"
                      >right</span
                    >=<span class="textcolor" style="color: #008000"
                      >of critical</span
                    >]&numsp;{};<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      >\node</span
                    >[<span class="textcolor" style="color: #008000"
                      >transition</span
                    >]&numsp;<span class="textcolor" style="color: #800080"
                      >(enter critical)</span
                    >&numsp;[<span class="textcolor" style="color: #008000"
                      >left</span
                    >=<span class="textcolor" style="color: #008000"
                      >of critical</span
                    >]&numsp;&numsp;{};<br />
                    <br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      >\node</span
                    >&numsp;[<span class="textcolor" style="color: #008000"
                      >red</span
                    >,<span class="textcolor" style="color: #008000">above</span
                    >]&numsp;<span class="textcolor" style="color: #000000"
                      >at</span
                    >
                    <span class="textcolor" style="color: #800080"
                      >(semaphore.north)</span
                    >&numsp;{<span class="textcolor" style="color: #000000"
                      >$s</span
                    ><span class="textcolor" style="color: #0000b2">\le</span
                    >&numsp;<span class="textcolor" style="color: #000000"
                      >3$</span
                    >};<br />
                    <span class="textcolor" style="color: #000000">\end</span
                    >{<span class="textcolor" style="color: #0000b2"
                      >tikzpicture</span
                    >}<br />
                  </code>
                </div>
              </figure>
              <p>
                This is a general approach that will &ldquo;always work&rdquo;.
              </p>
            </li>
            <li>
              <p>
                2. Hagen can use the special
                <span class="texttt">label</span> option. This option is given
                to a <span class="texttt">node</span> and it causes
                <em>another</em> node to be added next to the node where the
                option is given. Here is the idea: When we construct the
                <span class="texttt">semaphore</span> node, we wish to indicate
                that we want another node with the capacity above it. For this,
                we use the option
                <span class="texttt">label=above:$s\le 3$</span>. This option is
                interpreted as follows: We want a node above the
                <span class="texttt">semaphore</span> node and this node should
                read &ldquo;\(s \le 3\)&rdquo;. Instead of
                <span class="texttt">above</span> we could also use things like
                <span class="texttt">below left</span> before the colon or a
                number like <span class="texttt">60</span>.
              </p>

              <figure class="example">
                <div class="example-image">
                  <p>
                    <span class="lateximagesource" id="lateximage-pgfmanual-71"
                      ><!--
s≤3
--><img
                        alt="(-tikz-&nbsp;diagram)"
                        class="lateximage"
                        src="pgfmanual-images/image-71.svg"
                        style
                    /></span>
                  </p>
                </div>

                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <span class="c- preamble"
                      >\usetikzlibrary {positioning} </span
                    ><br />
                    <span class="textcolor" style="color: #000000">\begin</span
                    >{<span class="textcolor" style="color: #0000b2"
                      >tikzpicture</span
                    >}<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      >\node</span
                    >[<span class="textcolor" style="color: #008000">place</span
                    >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                      class="textcolor"
                      style="color: #800080"
                      >(waiting)</span
                    >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{};<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      >\node</span
                    >[<span class="textcolor" style="color: #008000">place</span
                    >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                      class="textcolor"
                      style="color: #800080"
                      >(critical)</span
                    >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                      class="textcolor"
                      style="color: #008000"
                      >below</span
                    >=<span class="textcolor" style="color: #008000"
                      >of waiting</span
                    >]&numsp;&numsp;{};<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      >\node</span
                    >[<span class="textcolor" style="color: #008000">place</span
                    >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                      class="textcolor"
                      style="color: #800080"
                      >(semaphore)</span
                    >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                      class="textcolor"
                      style="color: #008000"
                      >below</span
                    >=<span class="textcolor" style="color: #008000"
                      >of critical</span
                    >,<br />
                    &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<sp
                      class="textcolor"
                      style="color: #008000"
                      >label=<span class="textcolor" style="color: #008000"
                        >above:$s<span class="textcolor" style="color: #0000b2"
                          >\le</span
                        >3$</span
                      >]&numsp;{};<br />
                      &numsp;&numsp;<span
                        class="textcolor"
                        style="color: #0000b2"
                        >\node</span
                      >[<span class="textcolor" style="color: #008000"
                        >transition</span
                      >]&numsp;<span class="textcolor" style="color: #800080"
                        >(leave critical)</span
                      >&numsp;[<span class="textcolor" style="color: #008000"
                        >right</span
                      >=<span class="textcolor" style="color: #008000"
                        >of critical</span
                      >]&numsp;{};<br />
                      &numsp;&numsp;<span
                        class="textcolor"
                        style="color: #0000b2"
                        >\node</span
                      >[<span class="textcolor" style="color: #008000"
                        >transition</span
                      >]&numsp;<span class="textcolor" style="color: #800080"
                        >(enter critical)</span
                      >&numsp;[<span class="textcolor" style="color: #008000"
                        >left</span
                      >=<span class="textcolor" style="color: #008000"
                        >of critical</span
                      >]&numsp;&numsp;{};<br />
                      <span class="textcolor" style="color: #000000">\end</span
                      >{<span class="textcolor" style="color: #0000b2"
                        >tikzpicture</span
                      >}<br /> </sp
                  ></code>
                </div>
              </figure>
              <p>
                It is also possible to give multiple
                <span class="texttt">label</span> options, this causes multiple
                labels to be drawn.
              </p>

              <figure class="example">
                <div class="example-image">
                  <p>
                    <span class="lateximagesource" id="lateximage-pgfmanual-72"
                      ><!--
         60◦

my circle


  −90◦
--><img
                        alt="(-tikz-&nbsp;diagram)"
                        class="lateximage"
                        src="pgfmanual-images/image-72.svg"
                        style
                    /></span>
                  </p>
                </div>

                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #0000b2">\tikz</span
                    ><br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      >\node</span
                    >&numsp;[<span class="textcolor" style="color: #008000"
                      >circle</span
                    >,<span class="textcolor" style="color: #008000">draw</span
                    >,<span class="textcolor" style="color: #008000">label</span
                    >=<span class="textcolor" style="color: #008000"
                      >60:$60^<span class="textcolor" style="color: #0000b2"
                        >\circ</span
                      >$</span
                    >,<span class="textcolor" style="color: #008000">label</span
                    >=<span class="textcolor" style="color: #008000"
                      >below:$-90^<span class="textcolor" style="color: #0000b2"
                        >\circ</span
                      >$</span
                    >]&numsp;{<span class="textcolor" style="color: #000000"
                      >my</span
                    >
                    <span class="textcolor" style="color: #000000">circle</span
                    >};<br />
                  </code>
                </div>
              </figure>
              <p>
                Hagen is not fully satisfied with the
                <span class="texttt">label</span> option since the label is not
                red. To achieve this, he has two options: First, he can redefine
                the <span class="texttt">every label</span> style. Second, he
                can add options to the label&rsquo;s node. These options are
                given following the <span class="texttt">label=</span>, so he
                would write
                <span class="texttt">label=[red]above:$s\le3$</span>. However,
                this does not quite work since
                <span class="latexlogofont"
                  ><span class="latexlogo"
                    >T<span class="latexlogosub">e</span>X</span
                  ></span
                >
                thinks that the <span class="texttt">]</span> closes the whole
                option list of the <span class="texttt">semaphore</span> node.
                So, Hagen has to add braces and writes
                <span class="texttt">label={[red]above:$s\le3$}</span>. Since
                this looks a bit ugly, Hagen decides to redefine the
                <span class="texttt">every label</span> style.
              </p>

              <figure class="example">
                <div class="example-image">
                  <p>
                    <span class="lateximagesource" id="lateximage-pgfmanual-73"
                      ><!--
s≤3
--><img
                        alt="(-tikz-&nbsp;diagram)"
                        class="lateximage"
                        src="pgfmanual-images/image-73.svg"
                        style
                    /></span>
                  </p>
                </div>

                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <span class="c- preamble"
                      >\usetikzlibrary {positioning} </span
                    ><br />
                    <span class="textcolor" style="color: #000000">\begin</span
                    >{<span class="textcolor" style="color: #0000b2"
                      >tikzpicture</span
                    >}[<span class="textcolor" style="color: #008000"
                      >every label</span
                    >/<span class="textcolor" style="color: #0000b2"
                      >.style</span
                    >={<span class="textcolor" style="color: #008000">red</span
                    >}]<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      >\node</span
                    >[<span class="textcolor" style="color: #008000">place</span
                    >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                      class="textcolor"
                      style="color: #800080"
                      >(waiting)</span
                    >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{};<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      >\node</span
                    >[<span class="textcolor" style="color: #008000">place</span
                    >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                      class="textcolor"
                      style="color: #800080"
                      >(critical)</span
                    >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                      class="textcolor"
                      style="color: #008000"
                      >below</span
                    >=<span class="textcolor" style="color: #008000"
                      >of waiting</span
                    >]&numsp;&numsp;{};<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      >\node</span
                    >[<span class="textcolor" style="color: #008000">place</span
                    >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                      class="textcolor"
                      style="color: #800080"
                      >(semaphore)</span
                    >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                      class="textcolor"
                      style="color: #008000"
                      >below</span
                    >=<span class="textcolor" style="color: #008000"
                      >of critical</span
                    >,<br />
                    &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<sp
                      class="textcolor"
                      style="color: #008000"
                      >label=<span class="textcolor" style="color: #008000"
                        >above:$s<span class="textcolor" style="color: #0000b2"
                          >\le</span
                        >3$</span
                      >]&numsp;{};<br />
                      &numsp;&numsp;<span
                        class="textcolor"
                        style="color: #0000b2"
                        >\node</span
                      >[<span class="textcolor" style="color: #008000"
                        >transition</span
                      >]&numsp;<span class="textcolor" style="color: #800080"
                        >(leave critical)</span
                      >&numsp;[<span class="textcolor" style="color: #008000"
                        >right</span
                      >=<span class="textcolor" style="color: #008000"
                        >of critical</span
                      >]&numsp;{};<br />
                      &numsp;&numsp;<span
                        class="textcolor"
                        style="color: #0000b2"
                        >\node</span
                      >[<span class="textcolor" style="color: #008000"
                        >transition</span
                      >]&numsp;<span class="textcolor" style="color: #800080"
                        >(enter critical)</span
                      >&numsp;[<span class="textcolor" style="color: #008000"
                        >left</span
                      >=<span class="textcolor" style="color: #008000"
                        >of critical</span
                      >]&numsp;&numsp;{};<br />
                      <span class="textcolor" style="color: #000000">\end</span
                      >{<span class="textcolor" style="color: #0000b2"
                        >tikzpicture</span
                      >}<br /> </sp
                  ></code>
                </div>
              </figure>
            </li>
          </ul>
          <h5 id="autosec-209">
            <span class="sectionnumber" id="sec-3.10">3.10&emsp;</span
            >Connecting Nodes<a class="anchor-link" href="#sec-3.10">&para;</a>
          </h5>
          <a id="pgfmanual-autopage-209"></a>

          <p>
            It is now high time to connect the nodes. Let us start with
            something simple, namely with the straight line from
            <span class="texttt">enter critical</span> to
            <span class="texttt">critical</span>. We want this line to start at
            the right side of <span class="texttt">enter critical</span> and to
            end at the left side of <span class="texttt">critical</span>. For
            this, we can use the <em>anchors</em> of the nodes. Every node
            defines a whole bunch of anchors that lie on its border or inside
            it. For example, the <span class="texttt">center</span> anchor is at
            the center of the node, the <span class="texttt">west</span> anchor
            is on the left of the node, and so on. To access the coordinate of a
            node, we use a coordinate that contains the node&rsquo;s name
            followed by a dot, followed by the anchor&rsquo;s name:
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-74"
                  ><!--
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-74.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <span class="c- preamble">\usetikzlibrary {positioning} </span
                ><br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(waiting)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(critical)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                  class="textcolor"
                  style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000"
                  >of waiting</span
                >]&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(semaphore)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                  class="textcolor"
                  style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(leave critical)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >right</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(enter critical)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >left</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\draw</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >-&gt;</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(enter critical.east)</span
                >&numsp;<span class="textcolor" style="color: #000000">--</span>
                <span class="textcolor" style="color: #800080"
                  >(critical.west)</span
                >;<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>

          <p>
            Next, let us tackle the curve from
            <span class="texttt">waiting</span> to
            <span class="texttt">enter critical</span>. This can be specified
            using curves and controls:
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-75"
                  ><!--
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-75.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <span class="c- preamble">\usetikzlibrary {positioning} </span
                ><br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(waiting)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(critical)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                  class="textcolor"
                  style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000"
                  >of waiting</span
                >]&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(semaphore)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                  class="textcolor"
                  style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(leave critical)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >right</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(enter critical)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >left</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\draw</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >-&gt;</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(enter critical.east)</span
                >&numsp;<span class="textcolor" style="color: #000000">--</span>
                <span class="textcolor" style="color: #800080"
                  >(critical.west)</span
                >;<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\draw</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >-&gt;</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(waiting.west)</span
                >&numsp;..&numsp;<span class="textcolor" style="color: #000000"
                  >controls</span
                >
                <span class="textcolor" style="color: #000000">+</span
                ><span class="textcolor" style="color: #800080">(left:5mm)</span
                >&numsp;<span class="textcolor" style="color: #000000"
                  >and</span
                >
                <span class="textcolor" style="color: #000000">+</span
                ><span class="textcolor" style="color: #800080">(up:5mm)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;..&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(enter critical.north)</span
                >;<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>

          <p>
            Hagen sees how he can now add all his edges, but the whole process
            seems a but awkward and not very flexible. Again, the code seems to
            obscure the structure of the graphic rather than showing it.
          </p>

          <p>
            So, let us start improving the code for the edges. First, Hagen can
            leave out the anchors:
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-76"
                  ><!--
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-76.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <span class="c- preamble">\usetikzlibrary {positioning} </span
                ><br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(waiting)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(critical)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                  class="textcolor"
                  style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000"
                  >of waiting</span
                >]&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(semaphore)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                  class="textcolor"
                  style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(leave critical)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >right</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(enter critical)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >left</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\draw</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >-&gt;</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(enter critical)</span
                >&numsp;<span class="textcolor" style="color: #000000">--</span>
                <span class="textcolor" style="color: #800080">(critical)</span
                >;<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\draw</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >-&gt;</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(waiting)</span
                >&numsp;..&numsp;<span class="textcolor" style="color: #000000"
                  >controls</span
                >
                <span class="textcolor" style="color: #000000">+</span
                ><span class="textcolor" style="color: #800080">(left:8mm)</span
                >&numsp;<span class="textcolor" style="color: #000000"
                  >and</span
                >
                <span class="textcolor" style="color: #000000">+</span
                ><span class="textcolor" style="color: #800080">(up:8mm)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;..&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(enter critical)</span
                >;<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>

          <p>
            Hagen is a bit surprised that this works. After all, how did
            Ti<em>k</em>Z know that the line from
            <span class="texttt">enter critical</span> to
            <span class="texttt">critical</span> should actually start on the
            borders? Whenever Ti<em>k</em>Z encounters a whole node name as a
            &ldquo;coordinate&rdquo;, it tries to &ldquo;be smart&rdquo; about
            the anchor that it should choose for this node. Depending on what
            happens next, Ti<em>k</em>Z will choose an anchor that lies on the
            border of the node on a line to the next coordinate or control
            point. The exact rules are a bit complex, but the chosen point will
            usually be correct &ndash; and when it is not, Hagen can still
            specify the desired anchor by hand.
          </p>

          <p>
            Hagen would now like to simplify the curve operation somehow. It
            turns out that this can be accomplished using a special path
            operation: the <span class="texttt">to</span> operation. This
            operation takes many options (you can even define new ones
            yourself). One pair of options is useful for Hagen: The pair
            <span class="texttt">in</span> and <span class="texttt">out</span>.
            These options take angles at which a curve should leave or reach the
            start or target coordinates. Without these options, a straight line
            is drawn:
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-77"
                  ><!--
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-77.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <span class="c- preamble">\usetikzlibrary {positioning} </span
                ><br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(waiting)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(critical)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                  class="textcolor"
                  style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000"
                  >of waiting</span
                >]&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(semaphore)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                  class="textcolor"
                  style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(leave critical)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >right</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(enter critical)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >left</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\draw</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >-&gt;</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(enter critical)</span
                >&numsp;<span class="textcolor" style="color: #000000">to</span>
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(critical)</span
                >;<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\draw</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >-&gt;</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(waiting)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >to</span
                >
                [<span class="textcolor" style="color: #008000">out</span>=<span
                  class="textcolor"
                  style="color: #008000"
                  >180</span
                >,<span class="textcolor" style="color: #008000">in</span>=<span
                  class="textcolor"
                  style="color: #008000"
                  >90</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(enter critical)</span
                >;<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>

          <p>
            There is another option for the
            <span class="texttt">to</span> operation, that is even better suited
            to Hagen&rsquo;s problem: The
            <span class="texttt">bend right</span> option. This option also
            takes an angle, but this angle only specifies the angle by which the
            curve is bent to the right:
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-78"
                  ><!--
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-78.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <span class="c- preamble">\usetikzlibrary {positioning} </span
                ><br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(waiting)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(critical)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                  class="textcolor"
                  style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000"
                  >of waiting</span
                >]&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(semaphore)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                  class="textcolor"
                  style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(leave critical)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >right</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(enter critical)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >left</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\draw</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >-&gt;</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(enter critical)</span
                >&numsp;<span class="textcolor" style="color: #000000">to</span>
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(critical)</span
                >;<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\draw</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >-&gt;</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(waiting)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >to</span
                >
                [<span class="textcolor" style="color: #008000">bend right</span
                >=<span class="textcolor" style="color: #008000">45</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(enter critical)</span
                >;<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\draw</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >-&gt;</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(enter critical)</span
                >&numsp;<span class="textcolor" style="color: #000000">to</span>
                [<span class="textcolor" style="color: #008000">bend right</span
                >=<span class="textcolor" style="color: #008000">45</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(semaphore)</span
                >;<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>

          <p>
            It is now time for Hagen to learn about yet another way of
            specifying edges: Using the <span class="texttt">edge</span> path
            operation. This operation is very similar to the
            <span class="texttt">to</span> operation, but there is one important
            difference: Like a node the edge generated by the
            <span class="texttt">edge</span> operation is not part of the main
            path, but is added only later. This may not seem very important, but
            it has some nice consequences. For example, every edge can have its
            own arrow tips and its own color and so on and, still, all the edges
            can be given on the same path. This allows Hagen to write the
            following:
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-79"
                  ><!--
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-79.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <span class="c- preamble">\usetikzlibrary {positioning} </span
                ><br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(waiting)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(critical)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                  class="textcolor"
                  style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000"
                  >of waiting</span
                >]&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(semaphore)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                  class="textcolor"
                  style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(leave critical)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >right</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(enter critical)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >left</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">-&gt;</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(critical)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">&lt;-</span
                >,<span class="textcolor" style="color: #008000">bend left</span
                >=<span class="textcolor" style="color: #008000">45</span
                >]&numsp;&numsp;<span class="textcolor" style="color: #800080"
                  >(waiting)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">-&gt;</span
                >,<span class="textcolor" style="color: #008000"
                  >bend right</span
                >=<span class="textcolor" style="color: #008000">45</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(semaphore)</span
                >;<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>

          <p>
            Each <span class="texttt">edge</span> caused a new path to be
            constructed, consisting of a <span class="texttt">to</span> between
            the node <span class="texttt">enter critical</span> and the node
            following the <span class="texttt">edge</span> command.
          </p>

          <p>
            The finishing touch is to introduce two styles
            <span class="texttt">pre</span> and
            <span class="texttt">post</span> and to use the
            <span class="texttt">bend angle=45</span> option to set the bend
            angle once and for all:
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-80"
                  ><!--
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-80.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <span class="c- preamble"
                  >\usetikzlibrary {arrows.meta,positioning} </span
                ><br />
                <span class="example-code-comment"
                  >% Styles place and transition as before</span
                ><br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                &numsp;&numsp;[<span class="textcolor" style="color: #008000"
                  >bend angle</span
                >=<span class="textcolor" style="color: #008000">45</span
                >,<br />
                &numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #008000"
                  >pre</span
                >/<span class="textcolor" style="color: #0000b2">.style</span
                >={<span class="textcolor" style="color: #008000">&lt;-</span
                >,<span class="textcolor" style="color: #008000"
                  >shorten &lt;</span
                >=<span class="textcolor" style="color: #008000">1pt</span
                >,<span class="textcolor" style="color: #008000">&gt;</span
                >=<span class="textcolor" style="color: #008000"
                  >{Stealth[<span class="textcolor" style="color: #008000"
                    >round</span
                  >]}</span
                >,<span class="textcolor" style="color: #008000">semithick</span
                >},<br />
                &numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #008000"
                  >post</span
                >/<span class="textcolor" style="color: #0000b2">.style</span
                >={<span class="textcolor" style="color: #008000">-&gt;</span
                >,<span class="textcolor" style="color: #008000"
                  >shorten &gt;</span
                >=<span class="textcolor" style="color: #008000">1pt</span
                >,<span class="textcolor" style="color: #008000">&gt;</span
                >=<span class="textcolor" style="color: #008000"
                  >{Stealth[<span class="textcolor" style="color: #008000"
                    >round</span
                  >]}</span
                >,<span class="textcolor" style="color: #008000">semithick</span
                >}]<br />
                <br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(waiting)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(critical)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                  class="textcolor"
                  style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000"
                  >of waiting</span
                >]&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(semaphore)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                  class="textcolor"
                  style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;{};<br />
                <br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(leave critical)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >right</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(critical)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >,<span class="textcolor" style="color: #008000"
                  >bend right</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(waiting)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span
                >,&numsp;<span class="textcolor" style="color: #008000"
                  >bend left</span
                >]&numsp;&numsp;<span class="textcolor" style="color: #800080"
                  >(semaphore)</span
                >;<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(enter critical)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >left</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(critical)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span
                >,&numsp;<span class="textcolor" style="color: #008000"
                  >bend left</span
                >]&numsp;&numsp;<span class="textcolor" style="color: #800080"
                  >(waiting)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >,<span class="textcolor" style="color: #008000"
                  >bend right</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(semaphore)</span
                >;<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>
          <h5 id="autosec-224">
            <span class="sectionnumber" id="sec-3.11">3.11&emsp;</span>Adding
            Labels Next to Lines<a class="anchor-link" href="#sec-3.11"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-224"></a>

          <p>
            The next thing that Hagen needs to add is the &ldquo;\(2\)&rdquo; at
            the arcs. For this Hagen can use Ti<em>k</em>Z&rsquo;s automatic
            node placement: By adding the option
            <span class="texttt">auto</span>, Ti<em>k</em>Z will position nodes
            on curves and lines in such a way that they are not on the curve but
            next to it. Adding <span class="texttt">swap</span> will mirror the
            label with respect to the line. Here is a general example:
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-81"
                  ><!--
  120◦ 1’
         1
2’ 2 0◦
         3
  240◦ 3’
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-81.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}[<span class="textcolor" style="color: #008000">auto</span
                >,<span class="textcolor" style="color: #008000"
                  >bend right</span
                >]<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #800080">(a)</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">(0:1)</span
                >&numsp;{<span class="textcolor" style="color: #000000"
                  >$0^</span
                ><span class="textcolor" style="color: #0000b2">\circ</span
                ><span class="textcolor" style="color: #000000">$</span>};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #800080">(b)</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">(120:1)</span
                >&numsp;{<span class="textcolor" style="color: #000000"
                  >$120^</span
                ><span class="textcolor" style="color: #0000b2">\circ</span
                ><span class="textcolor" style="color: #000000">$</span>};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #800080">(c)</span
                >&numsp;<span class="textcolor" style="color: #000000">at</span>
                <span class="textcolor" style="color: #800080">(240:1)</span
                >&numsp;{<span class="textcolor" style="color: #000000"
                  >$240^</span
                ><span class="textcolor" style="color: #0000b2">\circ</span
                ><span class="textcolor" style="color: #000000">$</span>};<br />
                <br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\draw</span
                >&numsp;<span class="textcolor" style="color: #800080">(a)</span
                >&numsp;<span class="textcolor" style="color: #000000">to</span>
                <span class="textcolor" style="color: #000000">node</span>
                {<span class="textcolor" style="color: #000000">1</span
                >}&numsp;<span class="textcolor" style="color: #000000"
                  >node</span
                >
                [<span class="textcolor" style="color: #008000">swap</span
                >]&numsp;{<span class="textcolor" style="color: #000000"
                  >1'</span
                >}&numsp;<span class="textcolor" style="color: #800080"
                  >(b)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(b)</span
                >&numsp;<span class="textcolor" style="color: #000000">to</span>
                <span class="textcolor" style="color: #000000">node</span>
                {<span class="textcolor" style="color: #000000">2</span
                >}&numsp;<span class="textcolor" style="color: #000000"
                  >node</span
                >
                [<span class="textcolor" style="color: #008000">swap</span
                >]&numsp;{<span class="textcolor" style="color: #000000"
                  >2'</span
                >}&numsp;<span class="textcolor" style="color: #800080"
                  >(c)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(c)</span
                >&numsp;<span class="textcolor" style="color: #000000">to</span>
                <span class="textcolor" style="color: #000000">node</span>
                {<span class="textcolor" style="color: #000000">3</span
                >}&numsp;<span class="textcolor" style="color: #000000"
                  >node</span
                >
                [<span class="textcolor" style="color: #008000">swap</span
                >]&numsp;{<span class="textcolor" style="color: #000000"
                  >3'</span
                >}&numsp;<span class="textcolor" style="color: #800080"
                  >(a)</span
                >;<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>

          <p>
            What is happening here? The nodes are given somehow inside the
            <span class="texttt">to</span> operation! When this is done, the
            node is placed on the middle of the curve or line created by the
            <span class="texttt">to</span> operation. The
            <span class="texttt">auto</span> option then causes the node to be
            moved in such a way that it does not lie on the curve, but next to
            it. In the example we provide even two nodes on each
            <span class="texttt">to</span> operation.
          </p>

          <p>
            For Hagen that <span class="texttt">auto</span> option is not really
            necessary since the two &ldquo;2&rdquo; labels could also easily be
            placed &ldquo;by hand&rdquo;. However, in a complicated plot with
            numerous edges automatic placement can be a blessing.
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-82"
                  ><!--
2
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-82.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <span class="c- preamble"
                  >\usetikzlibrary {arrows.meta,positioning} </span
                ><br />
                <span class="example-code-comment">% Styles as before</span
                ><br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}[<span class="textcolor" style="color: #008000"
                  >bend angle</span
                >=<span class="textcolor" style="color: #008000">45</span
                >]<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(waiting)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(critical)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                  class="textcolor"
                  style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000"
                  >of waiting</span
                >]&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(semaphore)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                  class="textcolor"
                  style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;{};<br />
                <br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(leave critical)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >right</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(critical)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >,<span class="textcolor" style="color: #008000"
                  >bend right</span
                >]&numsp;<span class="textcolor" style="color: #000000"
                  >node</span
                >[<span class="textcolor" style="color: #008000">auto</span
                >,<span class="textcolor" style="color: #008000">swap</span
                >]&numsp;{<span class="textcolor" style="color: #000000">2</span
                >}&numsp;<span class="textcolor" style="color: #800080"
                  >(waiting)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span
                >,&numsp;<span class="textcolor" style="color: #008000"
                  >bend left</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(semaphore)</span
                >;<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(enter critical)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >left</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(critical)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span
                >,&numsp;<span class="textcolor" style="color: #008000"
                  >bend left</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(waiting)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >,<span class="textcolor" style="color: #008000"
                  >bend right</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(semaphore)</span
                >;<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>
          <h5 id="autosec-229">
            <span class="sectionnumber" id="sec-3.12">3.12&emsp;</span>Adding
            the Snaked Line and Multi-Line Text<a
              class="anchor-link"
              href="#sec-3.12"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-229"></a>

          <p>
            With the node mechanism Hagen can now easily create the two Petri
            nets. What he is unsure of is how he can create the snaked line
            between the nets.
          </p>

          <p>
            For this he can use a <em>decoration</em>. To draw the snaked line,
            Hagen only needs to set the two options
            <span class="texttt">decoration=snake</span> and
            <span class="texttt">decorate</span> on the path. This causes all
            lines of the path to be replaced by snakes. It is also possible to
            use snakes only in certain parts of a path, but Hagen will not need
            this.
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-83"
                  ><!--
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-83.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <span class="c- preamble"
                  >\usetikzlibrary {decorations.pathmorphing} </span
                ><br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\draw</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >-&gt;</span
                >,<span class="textcolor" style="color: #008000">decorate</span
                >,<span class="textcolor" style="color: #008000"
                  >decoration</span
                >=<span class="textcolor" style="color: #008000">snake</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(0,0)</span
                >&numsp;<span class="textcolor" style="color: #000000">--</span>
                <span class="textcolor" style="color: #800080">(2,0)</span
                >;<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>

          <p>
            Well, that does not look quite right, yet. The problem is that the
            snake happens to end exactly at the position where the arrow begins.
            Fortunately, there is an option that helps here. Also, the snake
            should be a bit smaller, which can be influenced by even more
            options.
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-84"
                  ><!--
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-84.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <span class="c- preamble"
                  >\usetikzlibrary {decorations.pathmorphing} </span
                ><br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\draw</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >-&gt;</span
                >,<span class="textcolor" style="color: #008000">decorate</span
                >,<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #008000"
                  >decoration</span
                >=<span class="textcolor" style="color: #008000"
                  >{snake,amplitude=.4mm,segment length=2mm,post
                  length=1mm}</span
                >]<br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(0,0)</span
                >&numsp;<span class="textcolor" style="color: #000000">--</span>
                <span class="textcolor" style="color: #800080">(3,0)</span
                >;<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>

          <p>
            Now Hagen needs to add the text above the snake. This text is a bit
            challenging since it is a multi-line text. Hagen has two options for
            this: First, he can specify an
            <span class="texttt">align=center</span> and then use the
            <span class="texttt">\\</span> command to enforce the line breaks at
            the desired positions.
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-85"
                  ><!--
replacement of
  the capacity
 by two places
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-85.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <span class="c- preamble"
                  >\usetikzlibrary {decorations.pathmorphing} </span
                ><br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\draw</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >-&gt;</span
                >,<span class="textcolor" style="color: #008000">decorate</span
                >,<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #008000"
                  >decoration</span
                >=<span class="textcolor" style="color: #008000"
                  >{snake,amplitude=.4mm,segment length=2mm,post
                  length=1mm}</span
                >]<br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(0,0)</span
                >&numsp;<span class="textcolor" style="color: #000000">--</span>
                <span class="textcolor" style="color: #800080">(3,0)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >node</span
                >
                [<span class="textcolor" style="color: #008000">above</span
                >,<span class="textcolor" style="color: #008000">align</span
                >=<span class="textcolor" style="color: #008000">center</span
                >,<span class="textcolor" style="color: #008000">midway</span
                >]<br />
                &numsp;&numsp;&numsp;&numsp;{<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >replacement</span
                >
                <span class="textcolor" style="color: #000000">of</span
                ><span class="textcolor" style="color: #0000b2">\</span
                ><span class="textcolor" style="color: #0000b2">\</span><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >the</span
                >
                <span class="textcolor" style="color: #0000b2">\textcolor</span
                >{<span class="textcolor" style="color: #000000">red</span
                >}{<span class="textcolor" style="color: #000000">capacity</span
                >}<span class="textcolor" style="color: #0000b2">\</span
                ><span class="textcolor" style="color: #0000b2">\</span><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >by</span
                >
                <span class="textcolor" style="color: #0000b2">\textcolor</span
                >{<span class="textcolor" style="color: #000000">red</span
                >}{<span class="textcolor" style="color: #000000">two</span>
                <span class="textcolor" style="color: #000000">places</span
                >}<br />
                &numsp;&numsp;&numsp;&numsp;};<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>

          <p>
            Instead of specifying the line breaks &ldquo;by hand&rdquo;, Hagen
            can also specify a width for the text and let
            <span class="latexlogofont"
              ><span class="latexlogo"
                >T<span class="latexlogosub">e</span>X</span
              ></span
            >
            perform the line breaking for him:
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-86"
                  ><!--
 replacement
of the capacity
 by two places
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-86.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <span class="c- preamble"
                  >\usetikzlibrary {decorations.pathmorphing} </span
                ><br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\draw</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >-&gt;</span
                >,<span class="textcolor" style="color: #008000">decorate</span
                >,<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #008000"
                  >decoration</span
                >=<span class="textcolor" style="color: #008000"
                  >{snake,amplitude=.4mm,segment length=2mm,post
                  length=1mm}</span
                >]<br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(0,0)</span
                >&numsp;<span class="textcolor" style="color: #000000">--</span>
                <span class="textcolor" style="color: #800080">(3,0)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >node</span
                >
                [<span class="textcolor" style="color: #008000">above</span
                >,<span class="textcolor" style="color: #008000"
                  >text width</span
                >=<span class="textcolor" style="color: #008000">3cm</span
                >,<span class="textcolor" style="color: #008000">align</span
                >=<span class="textcolor" style="color: #008000">center</span
                >,<span class="textcolor" style="color: #008000">midway</span
                >]<br />
                &numsp;&numsp;&numsp;&numsp;{<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >replacement</span
                >
                <span class="textcolor" style="color: #000000">of</span>
                <span class="textcolor" style="color: #000000">the</span>
                <span class="textcolor" style="color: #0000b2">\textcolor</span
                >{<span class="textcolor" style="color: #000000">red</span
                >}{<span class="textcolor" style="color: #000000">capacity</span
                >}&numsp;<span class="textcolor" style="color: #000000">by</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\textcolor</span
                >{<span class="textcolor" style="color: #000000">red</span
                >}{<span class="textcolor" style="color: #000000">two</span>
                <span class="textcolor" style="color: #000000">places</span
                >}<br />
                &numsp;&numsp;&numsp;&numsp;};<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>
          <h5 id="autosec-238">
            <span class="sectionnumber" id="sec-3.13">3.13&emsp;</span>Using
            Layers: The Background Rectangles<a
              class="anchor-link"
              href="#sec-3.13"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-238"></a>

          <p>
            Hagen still needs to add the background rectangles. These are a bit
            tricky: Hagen would like to draw the rectangles <em>after</em> the
            Petri nets are finished. The reason is that only then can he
            conveniently refer to the coordinates that make up the corners of
            the rectangle. If Hagen draws the rectangle first, then he needs to
            know the exact size of the Petri net &ndash; which he does not.
          </p>

          <p>
            The solution is to use <em>layers</em>. When the
            <span class="texttt">backgrounds</span> library is loaded, Hagen can
            put parts of his picture inside a scope with the
            <span class="texttt">on background layer</span> option. Then this
            part of the picture becomes part of the layer that is given as an
            argument to this environment. When the
            <span class="texttt">{tikzpicture}</span> environment ends, the
            layers are put on top of each other, starting with the background
            layer. This causes everything drawn on the background layer to be
            behind the main text.
          </p>

          <p>
            The next tricky question is, how big should the rectangle be?
            Naturally, Hagen can compute the size &ldquo;by hand&rdquo; or using
            some clever observations concerning the \(x\)- and \(y\)-coordinates
            of the nodes, but it would be nicer to just have Ti<em>k</em>Z
            compute a rectangle into which all the nodes &ldquo;fit&rdquo;. For
            this, the <span class="texttt">fit</span> library can be used. It
            defines the <span class="texttt">fit</span> options, which, when
            given to a node, causes the node to be resized and shifted such that
            it exactly covers all the nodes and coordinates given as parameters
            to the <span class="texttt">fit</span> option.
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-87"
                  ><!--
2
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-87.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <span class="c- preamble"
                  >\usetikzlibrary {arrows.meta,backgrounds,fit,positioning} </span
                ><br />
                <span class="example-code-comment">% Styles as before</span
                ><br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}[<span class="textcolor" style="color: #008000"
                  >bend angle</span
                >=<span class="textcolor" style="color: #008000">45</span
                >]<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(waiting)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(critical)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                  class="textcolor"
                  style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000"
                  >of waiting</span
                >]&numsp;&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000">place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(semaphore)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                  class="textcolor"
                  style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;{};<br />
                <br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(leave critical)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >right</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(critical)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >,<span class="textcolor" style="color: #008000"
                  >bend right</span
                >]&numsp;<span class="textcolor" style="color: #000000"
                  >node</span
                >[<span class="textcolor" style="color: #008000">auto</span
                >,<span class="textcolor" style="color: #008000">swap</span
                >]&numsp;{<span class="textcolor" style="color: #000000">2</span
                >}&numsp;<span class="textcolor" style="color: #800080"
                  >(waiting)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span
                >,&numsp;<span class="textcolor" style="color: #008000"
                  >bend left</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(semaphore)</span
                >;<br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\node</span
                >[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(enter critical)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >left</span
                >=<span class="textcolor" style="color: #008000"
                  >of critical</span
                >]&numsp;&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(critical)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span
                >,&numsp;<span class="textcolor" style="color: #008000"
                  >bend left</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(waiting)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >,<span class="textcolor" style="color: #008000"
                  >bend right</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(semaphore)</span
                >;<br />
                <br />
                &numsp;&numsp;<span class="textcolor" style="color: #000000"
                  >\begin</span
                >{<span class="textcolor" style="color: #0000b2">scope</span
                >}[<span class="textcolor" style="color: #008000"
                  >on background layer</span
                >]<br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\node</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >fill</span
                >=<span class="textcolor" style="color: #008000">black!30</span
                >,<span class="textcolor" style="color: #008000">fit</span
                >=<span class="textcolor" style="color: #008000"
                  ><span class="textcolor" style="color: #800080"
                    >(waiting)</span
                  >&numsp;<span class="textcolor" style="color: #800080"
                    >(critical)</span
                  >&numsp;<span class="textcolor" style="color: #800080"
                    >(semaphore)</span
                  ><br />
                  &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #800080"
                    >(leave critical)</span
                  >&numsp;<span class="textcolor" style="color: #800080"
                    >(enter critical)</span
                  ></span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #000000"
                  >\end</span
                >{<span class="textcolor" style="color: #0000b2">scope</span
                >}<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>
          <h5 id="autosec-241">
            <span class="sectionnumber" id="sec-3.14">3.14&emsp;</span>The
            Complete Code<a class="anchor-link" href="#sec-3.14">&para;</a>
          </h5>
          <a id="pgfmanual-autopage-241"></a>

          <p>
            Hagen has now finally put everything together. Only then does he
            learn that there is already a library for drawing Petri nets! It
            turns out that this library mainly provides the same definitions as
            Hagen did. For example, it defines a
            <span class="texttt">place</span> style in a similar way as Hagen
            did. Adjusting the code so that it uses the library shortens Hagen
            code a bit, as shown in the following.
          </p>

          <p>
            First, Hagen needs less style definitions, but he still needs to
            specify the colors of places and transitions.
          </p>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000">\begin</span
                >{<span class="textcolor" style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
                &numsp;&numsp;[<span class="textcolor" style="color: #008000"
                  >node distance</span
                >=<span class="textcolor" style="color: #008000">1.3cm</span
                >,<span class="textcolor" style="color: #008000">on grid</span
                >,<span class="textcolor" style="color: #008000">&gt;</span
                >=<span class="textcolor" style="color: #008000"
                  >{Stealth[<span class="textcolor" style="color: #008000"
                    >round</span
                  >]}</span
                >,<span class="textcolor" style="color: #008000"
                  >bend angle</span
                >=<span class="textcolor" style="color: #008000">45</span>,<span
                  class="textcolor"
                  style="color: #008000"
                  >auto</span
                >,<br />
                &numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #008000"
                  >every place</span
                >/<span class="textcolor" style="color: #0000b2">.style</span>=
                {<span class="textcolor" style="color: #008000"
                  >minimum size</span
                >=<span class="textcolor" style="color: #008000">6mm</span
                >,<span class="textcolor" style="color: #008000">thick</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >=<span class="textcolor" style="color: #008000">blue!75</span
                >,<span class="textcolor" style="color: #008000">fill</span
                >=<span class="textcolor" style="color: #008000">blue!20}</span
                >,<br />
                &numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #008000"
                  >every transition</span
                >/<span class="textcolor" style="color: #0000b2">.style</span
                >={<span class="textcolor" style="color: #008000">thick</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >=<span class="textcolor" style="color: #008000">black!75</span
                >,<span class="textcolor" style="color: #008000">fill</span
                >=<span class="textcolor" style="color: #008000">black!20}</span
                >,<br />
                &numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #008000"
                  >red place</span
                >/<span class="textcolor" style="color: #0000b2">.style</span>=
                {<span class="textcolor" style="color: #008000">place</span
                >,<span class="textcolor" style="color: #008000">draw</span
                >=<span class="textcolor" style="color: #008000">red!75</span
                >,<span class="textcolor" style="color: #008000">fill</span
                >=<span class="textcolor" style="color: #008000">red!20}</span
                >,<br />
                &numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #008000"
                  >every label</span
                >/<span class="textcolor" style="color: #0000b2">.style</span>=
                {<span class="textcolor" style="color: #008000">red</span
                >}]<br />
              </code>
            </div>
          </figure>

          <p>Now comes the code for the nets:</p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-88"
                  ><!--
      2




s≤3




      2
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-88.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <span class="c- preamble"
                  >\usetikzlibrary {arrows.meta,petri,positioning} </span
                ><br />
                &numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\node</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >,<span class="textcolor" style="color: #008000">tokens</span
                >=<span class="textcolor" style="color: #008000">1</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(w1)</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{};<br />
                &numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\node</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(c1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000">of w1</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{};<br />
                &numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\node</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(s)</span
                >&numsp;&numsp;[<span class="textcolor" style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000">of c1</span
                >,<span class="textcolor" style="color: #008000">label</span
                >=<span class="textcolor" style="color: #008000"
                  >above:$s<span class="textcolor" style="color: #0000b2"
                    >\le</span
                  >&numsp;3$</span
                >]&numsp;{};<br />
                &numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\node</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(c2)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000">of s</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{};<br />
                &numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\node</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >,<span class="textcolor" style="color: #008000">tokens</span
                >=<span class="textcolor" style="color: #008000">1</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(w2)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000">of c2</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{};<br />
                <br />
                &numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\node</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(e1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >left</span
                >=<span class="textcolor" style="color: #008000">of c1</span
                >]&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span>,<span
                  class="textcolor"
                  style="color: #008000"
                  >bend left</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(w1)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >,<span class="textcolor" style="color: #008000"
                  >bend right</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(s)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(c1)</span
                >;<br />
                &numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\node</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(e2)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >left</span
                >=<span class="textcolor" style="color: #008000">of c2</span
                >]&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span>,<span
                  class="textcolor"
                  style="color: #008000"
                  >bend right</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(w2)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >,<span class="textcolor" style="color: #008000">bend left</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(s)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(c2)</span
                >;<br />
                &numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\node</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(l1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >right</span
                >=<span class="textcolor" style="color: #008000">of c1</span
                >]&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(c1)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span>,<span
                  class="textcolor"
                  style="color: #008000"
                  >bend left</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(s)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >,<span class="textcolor" style="color: #008000"
                  >bend right</span
                >]&numsp;<span class="textcolor" style="color: #000000"
                  >node</span
                >[<span class="textcolor" style="color: #008000">swap</span
                >]&numsp;{<span class="textcolor" style="color: #000000">2</span
                >}&numsp;<span class="textcolor" style="color: #800080"
                  >(w1)</span
                >;<br />
                &numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\node</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(l2)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >right</span
                >=<span class="textcolor" style="color: #008000">of c2</span
                >]&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(c2)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span>,<span
                  class="textcolor"
                  style="color: #008000"
                  >bend right</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(s)</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >,<span class="textcolor" style="color: #008000">bend left</span
                >]&numsp;&numsp;<span class="textcolor" style="color: #000000"
                  >node</span
                >
                {<span class="textcolor" style="color: #000000">2</span
                >}&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(w2)</span
                >;<br />
              </code>
            </div>
          </figure>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-89"
                  ><!--
         2




s s̄




         2
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    src="pgfmanual-images/image-89.svg"
                    style
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <span class="c- preamble"
                  >\usetikzlibrary {arrows.meta,petri,positioning} </span
                ><br />
                &numsp;&numsp;<span class="textcolor" style="color: #000000"
                  >\begin</span
                >{<span class="textcolor" style="color: #0000b2">scope</span
                >}[<span class="textcolor" style="color: #008000">xshift</span
                >=<span class="textcolor" style="color: #008000">6cm</span
                >]<br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\node</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >,<span class="textcolor" style="color: #008000">tokens</span
                >=<span class="textcolor" style="color: #008000">1</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(w1')</span
                >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{};<br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\node</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(c1')</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000">of w1'</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{};<br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\node</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >red place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(s1')</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000">of c1'</span
                >,<span class="textcolor" style="color: #008000">xshift</span
                >=<span class="textcolor" style="color: #008000">-5mm</span
                >]<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                  class="textcolor"
                  style="color: #008000"
                  >label</span
                >=<span class="textcolor" style="color: #008000">left:$s$</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{}
                /&gt; &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\node</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >red place</span
                >,<span class="textcolor" style="color: #008000">tokens</span
                >=<span class="textcolor" style="color: #008000">3</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(s2')</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000">of c1'</span
                >,<span class="textcolor" style="color: #008000">xshift</span
                >=<span class="textcolor" style="color: #008000">5mm</span
                >]<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;[<span
                  class="textcolor"
                  style="color: #008000"
                  >label</span
                >=<span class="textcolor" style="color: #008000"
                  >right:$<span class="textcolor" style="color: #0000b2"
                    >\bar</span
                  >&numsp;s$</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{};<br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\node</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(c2')</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000">of s1'</span
                >,<span class="textcolor" style="color: #008000">xshift</span
                >=<span class="textcolor" style="color: #008000">5mm</span
                >]&numsp;&numsp;{};<br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\node</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >place</span
                >,<span class="textcolor" style="color: #008000">tokens</span
                >=<span class="textcolor" style="color: #008000">1</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(w2')</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >below</span
                >=<span class="textcolor" style="color: #008000">of c2'</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{};<br />
                <br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\node</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(e1')</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >left</span
                >=<span class="textcolor" style="color: #008000">of c1'</span
                >]&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span>,<span
                  class="textcolor"
                  style="color: #008000"
                  >bend left</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(w1')</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(s1')</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(s2')</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(c1')</span
                >;<br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\node</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(e2')</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >left</span
                >=<span class="textcolor" style="color: #008000">of c2'</span
                >]&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span>,<span
                  class="textcolor"
                  style="color: #008000"
                  >bend right</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(w2')</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(s1')</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(s2')</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(c2')</span
                >;<br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\node</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(l1')</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >right</span
                >=<span class="textcolor" style="color: #008000">of c1'</span
                >]&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(c1')</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(s1')</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(s2')</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >,<span class="textcolor" style="color: #008000"
                  >bend right</span
                >]&numsp;<span class="textcolor" style="color: #000000"
                  >node</span
                >[<span class="textcolor" style="color: #008000">swap</span
                >]&numsp;{<span class="textcolor" style="color: #000000">2</span
                >}&numsp;<span class="textcolor" style="color: #800080"
                  >(w1')</span
                >;<br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\node</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >transition</span
                >]&numsp;<span class="textcolor" style="color: #800080"
                  >(l2')</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >right</span
                >=<span class="textcolor" style="color: #008000">of c2'</span
                >]&numsp;{}<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(c2')</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">pre</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(s1')</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >]&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(s2')</span
                ><br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #000000"
                  >edge</span
                >
                [<span class="textcolor" style="color: #008000">post</span
                >,<span class="textcolor" style="color: #008000">bend left</span
                >]&numsp;&numsp;<span class="textcolor" style="color: #000000"
                  >node</span
                >
                {<span class="textcolor" style="color: #000000">2</span
                >}&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(w2')</span
                >;<br />
                &numsp;&numsp;<span class="textcolor" style="color: #000000"
                  >\end</span
                >{<span class="textcolor" style="color: #0000b2">scope</span
                >}<br />
              </code>
            </div>
          </figure>

          <p>The code for the background and the snake is the following:</p>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                &numsp;&numsp;<span class="textcolor" style="color: #000000"
                  >\begin</span
                >{<span class="textcolor" style="color: #0000b2">scope</span
                >}[<span class="textcolor" style="color: #008000"
                  >on background layer</span
                >]<br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #800080"
                  >(r1)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >fill</span
                >=<span class="textcolor" style="color: #008000">black!10</span
                >,<span class="textcolor" style="color: #008000"
                  >rounded corners</span
                >,<span class="textcolor" style="color: #008000">fit</span
                >=<span class="textcolor" style="color: #008000"
                  ><span class="textcolor" style="color: #800080">(w1)</span
                  ><span class="textcolor" style="color: #800080">(w2)</span
                  ><span class="textcolor" style="color: #800080">(e1)</span
                  ><span class="textcolor" style="color: #800080">(e2)</span
                  ><span class="textcolor" style="color: #800080">(l1)</span
                  ><span class="textcolor" style="color: #800080"
                    >(l2)</span
                  ></span
                >]&numsp;{};<br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #0000b2"
                  >\node</span
                >&numsp;<span class="textcolor" style="color: #800080"
                  >(r2)</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >fill</span
                >=<span class="textcolor" style="color: #008000">black!10</span
                >,<span class="textcolor" style="color: #008000"
                  >rounded corners</span
                >,<span class="textcolor" style="color: #008000">fit</span
                >=<span class="textcolor" style="color: #008000"
                  ><span class="textcolor" style="color: #800080">(w1')</span
                  ><span class="textcolor" style="color: #800080">(w2')</span
                  ><span class="textcolor" style="color: #800080">(e1')</span
                  ><span class="textcolor" style="color: #800080">(e2')</span
                  ><span class="textcolor" style="color: #800080">(l1')</span
                  ><span class="textcolor" style="color: #800080"
                    >(l2')</span
                  ></span
                >]&numsp;{};<br />
                &numsp;&numsp;<span class="textcolor" style="color: #000000"
                  >\end</span
                >{<span class="textcolor" style="color: #0000b2">scope</span
                >}<br />
                <br />
                &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                  >\draw</span
                >&numsp;[<span class="textcolor" style="color: #008000"
                  >shorten &gt;</span
                >=<span class="textcolor" style="color: #008000">1mm</span
                >,<span class="textcolor" style="color: #008000">-&gt;</span
                >,<span class="textcolor" style="color: #008000">thick</span
                >,<span class="textcolor" style="color: #008000">decorate</span
                >,<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #008000"
                  >decoration</span
                >=<span class="textcolor" style="color: #008000"
                  >{snake,amplitude=.4mm,segment length=2mm,<br />
                  &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;pre=moveto,pre
                  length=1mm,post length=2mm}</span
                >]<br />
                &numsp;&numsp;&numsp;&numsp;<span
                  class="textcolor"
                  style="color: #800080"
                  >(r1)</span
                >&numsp;<span class="textcolor" style="color: #000000">--</span>
                <span class="textcolor" style="color: #800080">(r2)</span
                >&numsp;<span class="textcolor" style="color: #000000"
                  >node</span
                >
                [<span class="textcolor" style="color: #008000">above</span
                >=<span class="textcolor" style="color: #008000">1mm</span
                >,<span class="textcolor" style="color: #008000">midway</span
                >,<span class="textcolor" style="color: #008000"
                  >text width</span
                >=<span class="textcolor" style="color: #008000">3cm</span
                >,<span class="textcolor" style="color: #008000">align</span
                >=<span class="textcolor" style="color: #008000">center</span
                >]<br />
                &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{<span
                  class="textcolor"
                  style="color: #000000"
                  >replacement</span
                >
                <span class="textcolor" style="color: #000000">of</span>
                <span class="textcolor" style="color: #000000">the</span>
                <span class="textcolor" style="color: #0000b2">\textcolor</span
                >{<span class="textcolor" style="color: #000000">red</span
                >}{<span class="textcolor" style="color: #000000">capacity</span
                >}&numsp;<span class="textcolor" style="color: #000000"
                  >by</span
                >
                <span class="textcolor" style="color: #0000b2">\textcolor</span
                >{<span class="textcolor" style="color: #000000">red</span
                >}{<span class="textcolor" style="color: #000000">two</span>
                <span class="textcolor" style="color: #000000">places</span
                >}};<br />
                <span class="textcolor" style="color: #000000">\end</span>{<span
                  class="textcolor"
                  style="color: #0000b2"
                  >tikzpicture</span
                >}<br />
              </code>
            </div>
          </figure>

          <div class="hidden"></div>
        </section>
      </main>

      <footer>
        <div class_="footer-left">
          <a href="https://github.com/pgf-tikz/pgf">Github</a> &middot;
          <a href="/license">License</a> &middot;
          <a href="https://ctan.org/pkg/pgf">CTAN</a> &middot;
          <a href="https://pgf-tikz.github.io/pgf/pgfmanual.pdf">PDF version</a>
          &middot;
          <a href="https://github.com/DominikPeters/pgf-tikz-html-manual"
            >About this HTML version</a
          >
        </div>
        <div class_="footer-right">
          <em>Manual last updated: 2022-03-05</em>
        </div>
      </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@alpha"></script>
    <script>
      docsearch({
        apiKey: "ae66ec3fc9df4b52b4d6f24fc8508fd3",
        indexName: "tikz.dev",
        appId: "Q70NNMA9GC",
        container: "#search",
      });
    </script>
  </body>
</html>
