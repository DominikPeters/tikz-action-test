<!doctype html>
<html lang="en-US">
  <!--TikZ/PGF documentation:
Copyright 2019 by Renée Ahrens, Olof Frahm, Jens Kluttig, Matthias Schulz, Stephan Schuster
Copyright 2019 by Till Tantau
Copyright 2019 by Jannis Pohlmann

This file may be distributed and/or modified

1. under the LaTeX Project Public License and/or
2. under the GNU Free Documentation License.

See https://tikz.dev/license for more details.

Translated to HTML using the lwarp package:
Copyright 2016-2024 Brian Dunn - BD Tech Concepts LLC

tikz.dev:
Copyright 2021-2024 Dominik Peters
This file may be distributed and/or modified under the LaTeX Project Public License.--><head>
    <meta charset="utf-8" />
    <meta content="LaTeX Lwarp package" name="generator" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>The Algorithm Layer - PGF/TikZ Manual</title>
    <link href="style.css?v=20240317" rel="stylesheet" type="text/css" />

    <script
      async
      id="MathJax-script"
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"
    ></script>

    <script src="pgfmanual.js?v=20240317"></script>

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Graph Drawing",
            "item": "https://tikz.dev/gd"
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "The Algorithm Layer",
            "item": "https://tikz.dev/gd-algorithm-layer"
          }
        ]
      }
    </script>
    <script async src="lwarp-mathjax-emulation.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"
      rel="stylesheet"
    />
    <link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png" />
    <link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png" />
    <link
      href="/apple-touch-icon.png"
      rel="apple-touch-icon"
      sizes="180x180"
      type="image/png"
    />
    <link href="/site.webmanifest" rel="manifest" />
    <link href="https://tikz.dev/gd-algorithm-layer" rel="canonical" />
    <meta content="https://tikz.dev/gd-algorithm-layer" property="og:url" />
    <meta content="article" property="og:type" />
    <meta content="The Algorithm Layer - PGF/TikZ Manual" property="og:title" />
    <meta content="summary" name="twitter:card" />
  </head>
  <body>
    <a id="pgfmanual-autopage-4835"></a>

    <div class="bodyandsidetoc grid-container">
      <header>
        <div id="hamburger-button">☰</div>
        <strong
          ><a href="/">PGF/<span class="tikzname">TikZ</span> Manual</a></strong
        >
        <div id="search"></div>
      </header>
      <div class="sidetoccontainer" id="local-toc-container">
        <nav class="sidetoc">
          <div class="sidetoctitle"><p>On this page</p></div>
          <div class="sidetoccontents">
            <p><a class="tocsubsection" href="#sec-36.1">Overview</a></p>
            <p><a class="tocsubsection" href="#sec-36.2">Getting Started</a></p>
            <p>
              <a class="tocsubsubsection" href="#sec-36.2.1"
                >The Hello World of Graph Drawing</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-36.2.2"
                >Declaring an Algorithm</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-36.2.3">The Run Method</a>
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-36.2.4"
                >Loading Algorithms on Demand</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-36.2.5"
                >Declaring Options</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-36.2.6"
                >Adding Inline Documentation</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-36.2.7"
                >Adding External Documentation</a
              >
            </p>
            <p>
              <a class="tocsubsection" href="#sec-36.3"
                >Namespaces and File Names</a
              >
            </p>
            <p><a class="tocsubsubsection" href="#sec-36.3.1">Namespaces</a></p>
            <p>
              <a class="tocsubsubsection" href="#sec-36.3.2"
                >Defining and Using Namespaces and Classes</a
              >
            </p>
            <p>
              <a class="tocsubsection" href="#sec-36.4"
                >The Graph Drawing Scope</a
              >
            </p>
            <p>
              <a class="tocsubsection" href="#sec-36.5">The Model Classes</a>
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-36.5.1"
                >Directed Graphs (Digraphs)</a
              >
            </p>
            <p><a class="tocsubsubsection" href="#sec-36.5.2">Vertices</a></p>
            <p><a class="tocsubsubsection" href="#sec-36.5.3">Arcs</a></p>
            <p><a class="tocsubsubsection" href="#sec-36.5.4">Edges</a></p>
            <p>
              <a class="tocsubsubsection" href="#sec-36.5.5">Collections</a>
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-36.5.6"
                >Coordinates, Paths, and Transformations</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-36.5.7"
                >Options and Data Storages for Vertices, Arcs, and Digraphs</a
              >
            </p>
            <p><a class="tocsubsubsection" href="#sec-36.5.8">Events</a></p>
            <p>
              <a class="tocsubsection" href="#sec-36.6"
                >Graph Transformations</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-36.6.1"
                >The Layout Pipeline</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-36.6.2"
                >Hints For Edge Routing</a
              >
            </p>
            <p>
              <a class="tocsubsection" href="#sec-36.7"
                >The Interface To Algorithms</a
              >
            </p>
            <p>
              <a class="tocsubsection" href="#sec-36.8"
                >Examples of Implementations of Graph Drawing Algorithms</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-36.8.1"
                >The &ldquo;Hello World&rdquo; of Graph Drawing</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-36.8.2"
                >How To Generate Edges Inside an Algorithm</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-36.8.3"
                >How To Generate Nodes Inside an Algorithm</a
              >
            </p>
            <p>
              <a class="tocsubsection" href="#sec-36.9">Support Libraries</a>
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-36.9.1">Basic Functions</a>
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-36.9.2">Lookup Tables</a>
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-36.9.3"
                >Computing Distances in Graphs</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-36.9.4">Priority Queues</a>
            </p>
          </div>
        </nav>
      </div>
      <div class="sidetoccontainer" id="chapter-toc-container">
        <nav class="sidetoc">
          <div class="sidetoctitle">
            <p>
              <span class="sidetocthetitle"
                >The <span class="tikzname">TikZ</span> and PGF Packages<br />
                Manual for version 3.1.10</span
              >
            </p>

            <p>Contents</p>
          </div>

          <div class="sidetoccontents">
            <p></p>

            <p>
              <a class="linkintro" href="/">Introduction</a>
            </p>

            <p>
              <a class="tocpart" href="tutorials-guidelines"
                >Tutorials and Guidelines</a
              >
            </p>

            <p>
              <a class="tocpart" href="install"
                >Installation and Configuration</a
              >
            </p>

            <p>
              <a class="tocpart" href="tikz">Ti<em>k</em>Z</a>
            </p>

            <p class="current-part">
              <a class="tocpart" href="gd">Graph Drawing</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="gd-overview"
                >Introduction to Algorithmic Graph Drawing</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="gd-usage-tikz"
                >Using Graph Drawing in <span class="tikzname">TikZ</span></a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="gd-usage-pgf"
                >Using Graph Drawing in PGF</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="gd-trees"
                >Graph Drawing Layouts: Trees</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="gd-layered"
                >Graph Drawing Algorithms: Layered Layouts</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="gd-force"
                >Graph Drawing Algorithms: Force-Based Methods</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="gd-circular"
                >Graph Drawing Algorithms: Circular Layouts</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="gd-phylogenetics"
                >Graph Drawing Layouts: Phylogenetic Trees</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="gd-edge-routing"
                >Graph Drawing Algorithms: Edge Routing</a
              >
            </p>

            <p class="current current-part">
              <a class="tocsection" href="gd-algorithm-layer"
                >The Algorithm Layer</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="gd-algorithms-in-c"
                >Writing Graph Drawing Algorithms in C</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="gd-display-layer"
                >The Display Layer</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="gd-binding-layer"
                >The Binding Layer</a
              >
            </p>

            <p>
              <a class="tocpart" href="libraries">Libraries</a>
            </p>

            <p>
              <a class="tocpart" href="dv">Data Visualization</a>
            </p>

            <p>
              <a class="tocpart" href="utilities">Utilities</a>
            </p>

            <p>
              <a class="tocpart" href="math"
                >Mathematical and Object-Oriented Engines</a
              >
            </p>

            <p>
              <a class="tocpart" href="base">The Basic Layer</a>
            </p>

            <p>
              <a class="tocpart" href="pgfsys">The System Layer</a>
            </p>
          </div>
        </nav>
      </div>

      <main class="bodycontainer">
        <section class="textbody">
          <h1>
            The <span class="tikzname">TikZ</span> and PGF Packages<br />
            Manual for version 3.1.10
          </h1>
          <h2 class="inserted">Graph Drawing</h2>

          <!--MathJax customizations:-->

          <p></p>
          <h4 id="autosec-4836">
            <a id="section-gd-algorithm-layer"></a
            ><span
              ><span class="sectionnumber" id="sec-36">36</span> The Algorithm
              Layer</span
            ><a
              class="anchor-link"
              data-pdf-destination="section.36"
              data-pdf-page="490"
              href="#sec-36"
              >&para;</a
            >
          </h4>
          <a id="pgfmanual-autopage-4836"></a>
          <a id="pgfmanual-autofile-40"></a>

          <p>
            <em>by Till Tantau</em>
          </p>
          <h5 id="autosec-4837">
            <span
              ><span class="sectionnumber" id="sec-36.1">36.1</span>
              Overview</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.1"
              data-pdf-destination="subsection.36.1"
              data-pdf-page="490"
              href="#sec-36.1"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-4837"></a>

          <p>
            The present section is addressed at readers interested in
            implementing new graph drawing algorithms for the graph drawing
            system. Obviously, in order to do so, you need to have an algorithm
            in mind and also some programming skills; but fortunately only in
            the Lua programming language: Even though the graph drawing system
            was originally developed as an extension of
            <span class="tikzname">TikZ</span>, is has been restructured so that
            the &ldquo;algorithm layer&rdquo; where you define algorithms is
            scrupulously separated from <span class="tikzname">TikZ</span>. In
            particular, an algorithm declared and implemented on this layer can
            be used in with every &ldquo;display layers&rdquo;, see
            Section&nbsp;<a href="gd-display-layer#section-gd-display-layer"
              >38</a
            >, without change. Nevertheless, in the following we will use the
            <span class="tikzname">TikZ</span> display layer and syntax in our
            examples.
          </p>

          <p>
            Normally, new graph drawing algorithms can and must be implemented
            in the Lua programming language, which is a small, easy-to-learn
            (and quite beautiful) language integrated into current versions of
            <span class="latexlogofont"
              ><span class="latexlogo"
                >T<span class="latexlogosub">e</span>X</span
              ></span
            >. However, as explained in Section&nbsp;<a
              href="gd-algorithms-in-c#section-algorithms-in-c"
              >37</a
            >, you can also implement algorithms in C or C++ (and, possibly, in
            the future also in other languages), but this comes at a great cost
            concerning portability. In the present section, I assume that you
            are only interested in writing an algorithm using Lua.
          </p>

          <p>
            In the following, after a small &ldquo;hello world&rdquo; example of
            graph drawing and a discussion of technical details like how to name
            files so that
            <span class="latexlogofont"
              ><span class="latexlogo"
                >T<span class="latexlogosub">e</span>X</span
              ></span
            >
            will find them, we have a look at the main parts of the algorithm
            layer:
          </p>
          <ul class="itemize" style="list-style-type: none">
            <li>
              <p>
                <span class="listmarker">&bull;</span> Section&nbsp;<a
                  href="gd-algorithm-layer#section-gd-namespaces"
                  >36.3</a
                >
                gives and overview of the available namespaces and also of
                naming conventions used in the graph drawing system.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span> Section&nbsp;<a
                  href="gd-algorithm-layer#section-gd-gd-scope"
                  >36.4</a
                >
                explores what graph drawing scopes &ldquo;look like on the
                algorithm layer&rdquo;. As the graph of a graph drawing scope is
                being parsed on the display layer, a lot of information is
                gathered: The nodes and edges of the graph are identified and
                the object-oriented model is built, but other information is
                also collected. For instance, a sequence of <em>events</em> is
                created during the parsing process. As another example, numerous
                kinds of <em>collections</em> may be identified by the parser.
                The parsed graph together with the event sequence and the
                collections are all gathered in a single table, called the
                <em>scope table</em> of the current graph drawing scope.
                Algorithms can access this table to retrieve information that
                goes beyond the &ldquo;pure&rdquo; graph model.
              </p>
              <p>
                One entry in this table is of particular importance: The
                <em>syntactic digraph.</em> While most graph drawing algorithms
                are not really interested in the &ldquo;details&rdquo; of how a
                graph was specified, for some algorithms it makes a big
                difference whether you write
                <span class="verb">a -&gt; b</span> or
                <span class="verb">b &lt;- a</span> in your specification of the
                graph. These algorithms can access the &ldquo;fine
                details&rdquo; of how the input graph was specified through the
                syntactic digraph; all other algorithms can access their
                <span class="verb">digraph</span> or
                <span class="verb">ugraph</span> fields and do not have to worry
                about the difference between
                <span class="verb">a -&gt; b</span> and
                <span class="verb">b &lt;- a</span>.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span> Section&nbsp;<a
                  href="gd-algorithm-layer#section-gd-models"
                  >36.5</a
                >
                explains the object-oriented model of graphs used throughout the
                graph drawing system. Graph drawing algorithms do not get the
                &ldquo;raw&rdquo; specification used by the user to specify a
                graph (like <span class="verb">{a -&gt; {b,c}}</span> in the
                <span class="verb">graph</span> syntax). Instead, what a graph
                drawing algorithm sees is &ldquo;just&rdquo; a graph object that
                provides methods for accessing the vertices and arcs.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span> Section&nbsp;<a
                  href="gd-algorithm-layer#section-gd-transformations"
                  >36.6</a
                >
                explains how the information in the graph drawing scope is
                processed. One might expect that we simply run the algorithm
                selected by the user; however, things are more involved in
                practice. When the layout of a graph needs to be computed, only
                very few algorithms will actually be able to compute positions
                for the nodes of <em>every</em> graph. For instance, most
                algorithms implicitly assume that the input graph is connected;
                algorithms for computing layouts for trees assume that the input
                is, well, a tree; and so on. For this reason, graph drawing
                algorithms will not actually need the original input graph as
                their input, but some <em>transformed</em> version of it.
                Indeed, <em>all</em> graph drawing algorithms are treated as
                graph transformations by the graph drawing engine.
              </p>
              <p>
                This section explains how transformations are chosen and which
                transformations are applied by default.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span> Section&nbsp;<a
                  href="gd-algorithm-layer#section-gd-interface-to-algorithms"
                  >36.7</a
                >
                documents the interface-to-algorithm class. This interface
                encapsulates all that an algorithm &ldquo;sees&rdquo; of the
                graph drawing system (apart from the classes in
                <span class="verb">model</span> and
                <span class="verb">lib</span>).
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span> Section&nbsp;<a
                  href="gd-algorithm-layer#section-gd-examples"
                  >36.8</a
                >
                provides a number of complete examples that show how graph
                drawing algorithms can, actually, be implemented.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span> Section&nbsp;<a
                  href="gd-algorithm-layer#section-gd-libs"
                  >36.9</a
                >
                documents the different libraries functions that come with the
                graph drawing engine. For instance, there are library functions
                for computing the (path) distance of nodes in a graph; a
                parameter that is needed by some algorithms.
              </p>
            </li>
          </ul>
          <h5 id="autosec-4838">
            <span
              ><span class="sectionnumber" id="sec-36.2">36.2</span> Getting
              Started</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.2"
              data-pdf-destination="subsection.36.2"
              data-pdf-page="491"
              href="#sec-36.2"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-4838"></a>

          <p>
            In this section, a &ldquo;hello world&rdquo; example of a graph
            drawing algorithm is given, followed by an overview of the
            organization of the whole engine.
          </p>
          <h6 id="autosec-4839">
            <span
              ><span class="sectionnumber" id="sec-36.2.1">36.2.1</span> The
              Hello World of Graph Drawing</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.2.1"
              data-pdf-destination="subsubsection.36.2.1"
              data-pdf-page="491"
              href="#sec-36.2.1"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4839"></a>

          <p>
            Let us start our tour of the algorithm layer with a &ldquo;hello
            world&rdquo; version of graph drawing: An algorithm that simply
            places all nodes of a graph in a circle of a fixed radius.
            Naturally, this is not a particularly impressive or intelligent
            graph drawing algorithm; but neither is the classical &ldquo;hello
            world&rdquo;\(\dots \) Here is a minimal version of the needed code
            (this is not the typical way of formulating the code, but it is the
            shortest; we will have a look at the more standard and verbose way
            in a moment):
          </p>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000"
                  ><a href="base-scopes#pgf.pgf">pgf</a></span
                >.<span class="textcolor" style="color: #000000">gd</span>.<span
                  class="textcolor"
                  style="color: #000000"
                  >interface</span
                >.<span class="textcolor" style="color: #000000"
                  >InterfaceToAlgorithms</span
                >.<span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.declare">declare</a></span
                >
                {<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  >key</span
                >
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #000000">"very</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.simple">simple</a></span
                >
                <span class="textcolor" style="color: #000000">demo</span>
                <span class="textcolor" style="color: #000000">layout"</span
                >,<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  >algorithm</span
                >
                <span class="textcolor" style="color: #000000">=</span> {<br />
                <span class="spaces">    </span><span
                  class="textcolor"
                  style="color: #000000"
                  >run</span
                >
                <span class="textcolor" style="color: #000000">=</span><br />
                <span class="spaces">      </span><span
                  class="textcolor"
                  style="color: #000000"
                  ><a href="dv-formats#pgf.function">function</a></span
                >
                <span class="textcolor" style="color: #800080">(self)</span
                ><br />
                <span class="spaces">        </span><span
                  class="textcolor"
                  style="color: #000000"
                  >local</span
                >
                <span class="textcolor" style="color: #000000">alpha</span>
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #800080"
                  >(2 * math.pi)</span
                > <span class="textcolor" style="color: #000000">/</span>
                <span class="textcolor" style="color: #000000">#self</span
                >.<span class="textcolor" style="color: #000000">ugraph</span
                >.<span class="textcolor" style="color: #000000">vertices</span
                ><br />
                <span class="spaces">        </span><span
                  class="textcolor"
                  style="color: #000000"
                  >for</span
                >
                <span class="textcolor" style="color: #000000">i</span>,<span
                  class="textcolor"
                  style="color: #000000"
                  >vertex</span
                >
                <span class="textcolor" style="color: #000000"
                  ><a href="library-edges#pgf.in">in</a></span
                >
                <span class="textcolor" style="color: #000000">ipairs</span
                ><span class="textcolor" style="color: #800080"
                  >(self.ugraph.vertices)</span
                > <span class="textcolor" style="color: #000000">do</span
                ><br />
                <span class="spaces">          </span><span
                  class="textcolor"
                  style="color: #000000"
                  >vertex</span
                >.<span class="textcolor" style="color: #000000"
                  ><a href="tikz-shapes#pgf.pos">pos</a></span
                >.<span class="textcolor" style="color: #000000"
                  ><a href="tikz-coordinates#pgf.x">x</a></span
                >
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="library-math#pgf.math">math</a></span
                >.<span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.cos">cos</a></span
                ><span class="textcolor" style="color: #800080"
                  >(i * alpha)</span
                > <span class="textcolor" style="color: #000000">*</span>
                <span class="textcolor" style="color: #000000">25</span><br />
                <span class="spaces">          </span><span
                  class="textcolor"
                  style="color: #000000"
                  >vertex</span
                >.<span class="textcolor" style="color: #000000"
                  ><a href="tikz-shapes#pgf.pos">pos</a></span
                >.<span class="textcolor" style="color: #000000"
                  ><a href="tikz-coordinates#pgf.y">y</a></span
                >
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="library-math#pgf.math">math</a></span
                >.<span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.sin">sin</a></span
                ><span class="textcolor" style="color: #800080"
                  >(i * alpha)</span
                > <span class="textcolor" style="color: #000000">*</span>
                <span class="textcolor" style="color: #000000">25</span><br />
                <span class="spaces">        </span><span
                  class="textcolor"
                  style="color: #000000"
                  ><a href="base-animations#pgf.end">end</a></span
                ><br />
                <span class="spaces">      </span><span
                  class="textcolor"
                  style="color: #000000"
                  ><a href="base-animations#pgf.end">end</a></span
                ><br />
                <span class="spaces">  </span>}<br />
                }<br />
              </code>
            </div>
          </figure>

          <p>
            This code <em>declares</em> a new algorithm (<span class="verb"
              >very simple demo layout</span
            >) and includes an implementation of the algorithm (through the
            <span class="verb">run</span> field of the
            <span class="verb">algorithm</span> field). When the
            <span class="verb">run</span> method is called, the
            <span class="verb">self</span> parameter will contain the
            to-be-drawn graph in its <span class="verb">ugraph</span> field. It
            is now the job of the code to modify the positions of the vertices
            in this graph (in the example, this is done by assigning values to
            <span class="verb">vertex.pos.x</span> and
            <span class="verb">vertex.pos.y</span>).
          </p>

          <p>
            In order to actually <em>use</em> the algorithm, the above code
            first needs to be executed somehow. For
            <span class="tikzname">TikZ</span>, one can just call
            <span class="verb">\directlua</span> on it or put it in a file and
            then use <span class="verb">\directlua</span> plus
            <span class="verb">require</span> (a better alternative) or you put
            it in a file like <span class="verb">simpledemo.lua</span> and use
            <span class="verb">\usegdlibrary{simpledemo}</span> (undoubtedly the
            &ldquo;best&rdquo; way). For another display layer, like a graphical
            editor, the code could also be executed through the use of
            <span class="verb">require</span>.
          </p>

          <p>
            Executing the code &ldquo;just&rdquo; declares the algorithm, this
            is what the <span class="verb">declare</span> function does. Inside
            some internal tables, the algorithm layer will store the fact that a
            <span class="verb">very simple demo layout</span> is now available.
            The algorithm layer will also communicate with the display layer
            through the binding layer to advertise this fact to the
            &ldquo;user&rdquo;. In the case of
            <span class="tikzname">TikZ</span>, this means that the option key
            <span class="verb">very simple demo layout</span> becomes available
            at this point and we can use it like this:
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-2044"
                  ><!--
    d
b f

a c
    e
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    height="76.754"
                    loading="lazy"
                    src="pgfmanual-images/image-2044.png"
                    style
                    width="67.418"
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #0000b2"
                  ><a href="tikz-scopes#pgf.back/tikz">\tikz</a></span
                > [<span class="textcolor" style="color: #008000"
                  >very simple demo layout</span
                >]<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #0000b2"
                  ><a href="tikz-graphs#pgf.back/graph">\graph</a></span
                > {<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                  >f</span
                >
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.-&gt;">-&gt;</a></span
                >
                <span class="textcolor" style="color: #000000">c</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.-&gt;">-&gt;</a></span
                >
                <span class="textcolor" style="color: #000000">e</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.-&gt;">-&gt;</a></span
                >
                <span class="textcolor" style="color: #000000">a</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.-&gt;">-&gt;</a></span
                >
                {<span class="textcolor" style="color: #000000">b</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.-&gt;">-&gt;</a></span
                >
                {<span class="textcolor" style="color: #000000">c</span
                >, <span class="textcolor" style="color: #000000">d</span
                >, <span class="textcolor" style="color: #000000">f</span
                >}, <span class="textcolor" style="color: #000000"
                  >e</span
                >
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.-&gt;">-&gt;</a></span
                >
                <span class="textcolor" style="color: #000000">b</span>}};<br />
              </code>
            </div>
          </figure>

          <p>
            It turns out, that our little algorithm is already more powerful
            than one might expect. Consider the following example:
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-2045"
                  ><!--
                d

    1 a c

                b
2 3
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    height="94.754"
                    loading="lazy"
                    src="pgfmanual-images/image-2045.png"
                    style
                    width="140.690"
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #0000b2"
                  ><a href="tikz-scopes#pgf.back/tikz">\tikz</a></span
                > [<span class="textcolor" style="color: #008000"
                  >very simple demo layout</span
                >, <span class="textcolor" style="color: #008000"
                  ><a href="gd-usage-tikz#pgf.componentwise"
                    >componentwise</a
                  ></span
                >]<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #0000b2"
                  ><a href="tikz-graphs#pgf.back/graph">\graph</a></span
                > {<br />
                <span class="spaces">    </span><span
                  class="textcolor"
                  style="color: #000000"
                  >1</span
                >
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.-&gt;">-&gt;</a></span
                >
                <span class="textcolor" style="color: #000000">2</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.-&gt;">-&gt;</a></span
                >[<span class="textcolor" style="color: #008000"
                  ><a href="gd-usage-tikz#pgf.orient">orient</a></span
                >=<span class="textcolor" style="color: #008000"
                  ><a href="tikz-arrows#pgf.right">right</a></span
                >] <span class="textcolor" style="color: #000000">3</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.-&gt;">-&gt;</a></span
                >
                <span class="textcolor" style="color: #000000">1</span>;<br />
                <span class="spaces">    </span><span
                  class="textcolor"
                  style="color: #000000"
                  >a</span
                >
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >
                <span class="textcolor" style="color: #000000">b</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >[<span class="textcolor" style="color: #008000"
                  ><a href="gd-usage-tikz#pgf.orient">orient</a></span
                >=<span class="textcolor" style="color: #008000">45</span
                >]<span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  >c</span
                >
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >
                <span class="textcolor" style="color: #000000">d</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >
                <span class="textcolor" style="color: #000000">a</span>;<br />
                <span class="spaces">  </span>};<br />
              </code>
            </div>
          </figure>

          <p>
            Note that, in our algorithm, we &ldquo;just&rdquo; put all nodes on
            a circle around the origin. Nevertheless, the graph gets decomposed
            into two connected components, the components are rotated so that
            the edge from node <span class="verb">2</span> to node
            <span class="verb">3</span> goes from left to right and the edge
            from <span class="verb">b</span> to <span class="verb">c</span> goes
            up at an angle of \(45^\circ \), and the components are placed next
            to each other so that some spacing is achieved.
          </p>

          <p>
            The &ldquo;magic&rdquo; that achieves all this behind the scenes is
            called &ldquo;graph transformations&rdquo;. They will heavily pre-
            and postprocess the input and output of graph drawing algorithms to
            achieve the above results.
          </p>

          <p>
            Naturally, some algorithms may not wish their inputs and/or outputs
            to be &ldquo;tampered&rdquo; with. An algorithm can easily configure
            which transformations should be applied, by passing appropriate
            options to <span class="verb">declare</span>.
          </p>
          <h6 id="autosec-4844">
            <span
              ><span class="sectionnumber" id="sec-36.2.2">36.2.2</span>
              Declaring an Algorithm</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.2.2"
              data-pdf-destination="subsubsection.36.2.2"
              data-pdf-page="492"
              href="#sec-36.2.2"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4844"></a>

          <p>
            Let us now have a look at how one would &ldquo;really&rdquo;
            implement the example algorithm. First of all, we place our
            algorithm in a separate file called, say,
            <span class="verb">ExampleLayout.lua</span>. This way, by putting it
            in a separate file, all display layers can easily install the
            algorithm at runtime by saying
            <span class="verb">require "ExampleLayout"</span>.
          </p>

          <p>
            Next, the <span class="verb">declare</span> function is needed quite
            often, so it makes sense to create a short local name for it:
          </p>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >
                <span class="textcolor" style="color: #000000">This</span>
                <span class="textcolor" style="color: #000000">is</span>
                <span class="textcolor" style="color: #000000">the</span>
                <span class="textcolor" style="color: #000000">file</span>
                <span class="textcolor" style="color: #000000"
                  >ExampleLayout</span
                >.<span class="textcolor" style="color: #000000">lua</span
                ><br />
                <span class="textcolor" style="color: #000000">local</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.declare">declare</a></span
                >
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #000000">require</span>
                <span class="textcolor" style="color: #000000">"pgf</span>.<span
                  class="textcolor"
                  style="color: #000000"
                  >gd</span
                >.<span class="textcolor" style="color: #000000">interface</span
                >.<span class="textcolor" style="color: #000000"
                  >InterfaceToAlgorithms"</span
                >.<span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.declare">declare</a></span
                ><br />
              </code>
            </div>
          </figure>

          <p>
            The <span class="verb">declare</span> function is the work-horse of
            the algorithm layer. It takes a table that contains at least a
            <span class="verb">key</span> field, which must be a unique string,
            and some other fields that specify in more detail what kind of key
            is declared. Once declared through a call of
            <span class="verb">declare</span>, the &ldquo;key&rdquo; can be used
            on the display layer.
          </p>

          <p>
            For declaring an algorithm, the table passed to
            <span class="verb">declare</span> must contain a field
            <span class="verb">algorithm</span>. This field, in turn, must
            (normally) be set to a table that will become the algorithm class.
            In the above example, our algorithm was so simple that we could
            place the whole definition of the class inside the call of
            <span class="verb">declare</span>, but normally the class is defined
            in more detail after the call to <span class="verb">declare</span>:
          </p>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000">local</span>
                <span class="textcolor" style="color: #000000"
                  >ExampleClass</span
                >
                <span class="textcolor" style="color: #000000">=</span>
                {}<span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >
                <span class="textcolor" style="color: #000000">A</span>
                <span class="textcolor" style="color: #000000">local</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-plots#pgf.variable">variable</a></span
                >
                <span class="textcolor" style="color: #000000">holding</span>
                <span class="textcolor" style="color: #000000">the</span>
                <span class="textcolor" style="color: #000000"
                  >class</span
                >
                <span class="textcolor" style="color: #000000"
                  ><a href="dv-formats#pgf.table">table</a></span
                ><br />
                <br />
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.declare">declare</a></span
                >
                {<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  >key</span
                >
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #000000">"very</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.simple">simple</a></span
                >
                <span class="textcolor" style="color: #000000">demo</span>
                <span class="textcolor" style="color: #000000">layout"</span
                >,<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  >algorithm</span
                >
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #000000"
                  >ExampleClass</span
                ><br />
                }<br />
                <br />
                <span class="textcolor" style="color: #000000"
                  ><a href="dv-formats#pgf.function">function</a></span
                >
                <span class="textcolor" style="color: #000000"
                  >ExampleClass:run</span
                >
                <span class="textcolor" style="color: #800080">()</span><br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  >local</span
                >
                <span class="textcolor" style="color: #000000">alpha</span>
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #800080"
                  >(2 * math.pi)</span
                > <span class="textcolor" style="color: #000000">/</span>
                <span class="textcolor" style="color: #000000">#self</span
                >.<span class="textcolor" style="color: #000000">ugraph</span
                >.<span class="textcolor" style="color: #000000">vertices</span
                ><br />
                <span class="spaces">  </span>...<br />
                <span class="textcolor" style="color: #000000"
                  ><a href="base-animations#pgf.end">end</a></span
                ><br />
              </code>
            </div>
          </figure>

          <p>
            The effect of the <span class="verb">declare</span> will be that the
            table stored in <span class="verb">ExampleClass</span> is setup to
            form a class in the sense of object-oriented programming. In
            particular, a static <span class="verb">new</span> function is
            installed.
          </p>

          <p>
            Now, whenever the user uses the key
            <span class="verb">very simple demo layout</span> on a graph, at
            some point the graph drawing engine will create a new instance of
            the <span class="verb">ExampleClass</span> using
            <span class="verb">new</span> and will then call the
            <span class="verb">run</span> method of this class. The class can
            have any number of other methods, but
            <span class="verb">new</span> and <span class="verb">run</span> are
            the only ones directly called by the graph drawing system.
          </p>
          <h6 id="autosec-4845">
            <span
              ><span class="sectionnumber" id="sec-36.2.3">36.2.3</span> The Run
              Method</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.2.3"
              data-pdf-destination="subsubsection.36.2.3"
              data-pdf-page="492"
              href="#sec-36.2.3"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4845"></a>

          <p>
            The <span class="verb">run</span> method of an algorithm classes
            lies at the heart of any graph drawing algorithm. This method will
            be called whenever a graph needs to be laid out. Upon this call, the
            <span class="verb">self</span>
            object will have some important fields set:
          </p>
          <ul class="itemize" style="list-style-type: none">
            <li>
              <p>
                <span class="listmarker">&bull;</span>
                <span class="verb">ugraph</span> This stands for
                &ldquo;undirected graph&rdquo; and is the
                &ldquo;undirected&rdquo; version of the to-be-laid out graph. In
                this graph, whenever there is an arc between \(u\) and \(v\),
                there is also an arc between \(v\) and \(u\). It is obtained by
                considering the syntactic digraph and then
                &ldquo;forgetting&rdquo; about the actual direction of the
                edges.
              </p>
              <p>
                When you have set certain
                <span class="verb">preconditions</span> in your algorithm class,
                like <span class="verb">connected=true</span>, the
                <span class="verb">ugraph</span> will satisfy these conditions.
                In particular, the <span class="verb">ugraph</span> typically
                will not be the underlying undirected graph of the complete
                syntactic digraph, but rather of some part of it. The use of
                (sub)layouts will also modify the syntactic digraph is fancy
                ways.
              </p>
              <p>
                Refer to this graph whenever your algorithm is &ldquo;most
                comfortable&rdquo; with an undirected graph, as is the case for
                instance for most force-base algorithms.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span>
                <span class="verb">digraph</span> This stands for
                &ldquo;directed graph&rdquo; and is the &ldquo;semantically
                directed&rdquo; version of the to-be-laid out graph. Basically,
                when happens is that reverse edges in the syntactic digraph (an
                edge like <span class="verb">b &lt;- a</span>) will yield an
                <span class="verb">Arc</span> from
                <span class="verb">a</span> to <span class="verb">b</span> in
                the <span class="verb">digraph</span> while they yield a
                <span class="verb">b</span> to <span class="verb">a</span> arc
                and edge in the syntactic digraph. Also, undirected edges like
                <span class="verb">a -- b</span> are replaced by directed edges
                in both directions between the vertices.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span>
                <span class="verb">scope</span> The graph drawing scope.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span>
                <span class="verb">layout</span> The layout object for this
                graph. This is a collection of kind
                <span class="verb">layout</span>.
              </p>
            </li>
          </ul>
          <h6 id="autosec-4846">
            <span
              ><span class="sectionnumber" id="sec-36.2.4">36.2.4</span> Loading
              Algorithms on Demand</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.2.4"
              data-pdf-destination="subsubsection.36.2.4"
              data-pdf-page="493"
              href="#sec-36.2.4"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4846"></a>

          <p>
            In order to use the
            <span class="verb">very simple demo layout</span> on the display
            layer, <span class="verb">declare</span> must have been called for
            this key. However, we just saw that the
            <span class="verb">declare</span> function takes the actual class
            table as parameter and, thus, whenever an algorithm is declared, it
            is also completely loaded and compiled at this point.
          </p>

          <p>
            This is not always desirable. A user may wish to include a number of
            libraries in order to declare a large number of potentially useful
            algorithms, but will not actually use all of them. Indeed, at least
            for large, complex algorithms, it is preferable that the
            algorithm&rsquo;s code is loaded only when the algorithm is used for
            the first time.
          </p>

          <p>
            Such a &ldquo;loading of algorithms on demand&rdquo; is supported
            through the option of setting the
            <span class="verb">algorithm</span> field in a
            <span class="verb">declare</span> to a string. This string must now
            be the file name of a Lua file that contains the code of the actual
            algorithm. When the key is actually used for the first time, this
            file will be loaded. It must return a table that will be plugged
            into the <span class="verb">algorithm</span> field; so subsequent
            usages of the key will not load the file again.
          </p>

          <p>
            The net effect of all this is that you can place implementations of
            algorithms in files separate from interface files that just contain
            the <span class="verb">declare</span> commands for these algorithms.
            You will typically do this only for rather large algorithms.
          </p>

          <p>For our example, the code would look like this:</p>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >
                <span class="textcolor" style="color: #000000">File</span>
                <span class="textcolor" style="color: #000000"
                  >ExampleLayout</span
                >.<span class="textcolor" style="color: #000000">lua</span
                ><br />
                <span class="textcolor" style="color: #000000">local</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.declare">declare</a></span
                >
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #000000">require</span>
                <span class="textcolor" style="color: #000000">"pgf</span>.<span
                  class="textcolor"
                  style="color: #000000"
                  >gd</span
                >.<span class="textcolor" style="color: #000000">interface</span
                >.<span class="textcolor" style="color: #000000"
                  >InterfaceToAlgorithms"</span
                >.<span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.declare">declare</a></span
                ><br />
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.declare">declare</a></span
                >
                {<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  >key</span
                >
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #000000">"very</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.simple">simple</a></span
                >
                <span class="textcolor" style="color: #000000">demo</span>
                <span class="textcolor" style="color: #000000">layout"</span
                >,<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  >algorithm</span
                >
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #000000"
                  >"ExampleLayoutImplementation"</span
                ><br />
                }<br />
              </code>
            </div>
          </figure>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >
                <span class="textcolor" style="color: #000000">File</span>
                <span class="textcolor" style="color: #000000"
                  >ExampleLayoutImplementation</span
                >.<span class="textcolor" style="color: #000000">lua</span
                ><br />
                <span class="textcolor" style="color: #000000">local</span>
                <span class="textcolor" style="color: #000000"
                  >ExampleClass</span
                >
                <span class="textcolor" style="color: #000000">=</span> {}<br />
                <span class="textcolor" style="color: #000000"
                  ><a href="dv-formats#pgf.function">function</a></span
                >
                <span class="textcolor" style="color: #000000"
                  >ExampleClass:run</span
                >
                <span class="textcolor" style="color: #800080">()</span><br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  >local</span
                >
                <span class="textcolor" style="color: #000000">alpha</span>
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #800080"
                  >(2 * math.pi)</span
                > <span class="textcolor" style="color: #000000">/</span>
                <span class="textcolor" style="color: #000000">#self</span
                >.<span class="textcolor" style="color: #000000">ugraph</span
                >.<span class="textcolor" style="color: #000000">vertices</span
                ><br />
                <span class="spaces">  </span>...<br />
                <span class="textcolor" style="color: #000000"
                  ><a href="base-animations#pgf.end">end</a></span
                ><br />
                <span class="textcolor" style="color: #000000">return</span>
                <span class="textcolor" style="color: #000000"
                  >ExampleClass</span
                ><br />
              </code>
            </div>
          </figure>
          <h6 id="autosec-4847">
            <span
              ><span class="sectionnumber" id="sec-36.2.5">36.2.5</span>
              Declaring Options</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.2.5"
              data-pdf-destination="subsubsection.36.2.5"
              data-pdf-page="493"
              href="#sec-36.2.5"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4847"></a>

          <p>
            Let us now make our example algorithm a bit more
            &ldquo;configurable&rdquo;. For this, we use
            <span class="verb">declare</span> once more, but instead of the
            <span class="verb">algorithm</span> field, we use a
            <span class="verb">type</span> field. This tells the display layer
            that the key is not used to select an algorithm, but to configure
            &ldquo;something&rdquo; about the graph or about nodes or edges.
          </p>

          <p>
            In our example, we may wish to configure the radius of the graph.
            So, we introduce a <span class="verb">radius</span> key (actually,
            this key already exists, so we would not need to declare it, but let
            us do so anyway for example purposes):
          </p>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.declare">declare</a></span
                >
                {<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  >key</span
                >
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #000000">"radius"</span
                >,<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  ><a href="library-patterns#pgf.type">type</a></span
                >
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #000000">"length"</span
                >,<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  ><a href="library-automata#pgf.initial">initial</a></span
                >
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #000000">"25pt"</span
                ><br />
                }<br />
              </code>
            </div>
          </figure>

          <p>
            This tells the display layer that there is now an option called
            <span class="verb">radius</span>, that users set it to some
            &ldquo;length&rdquo;, and that if it is not set at all, then the
            25pt should be used.
          </p>

          <p>
            To access what the user has specified for this key, an algorithm can
            access the <span class="verb">options</span> field of a graph,
            vertex, or arc at the key&rsquo;s name:
          </p>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="spaces">          </span><span
                  class="textcolor"
                  style="color: #000000"
                  >vertex</span
                >.<span class="textcolor" style="color: #000000"
                  ><a href="tikz-shapes#pgf.pos">pos</a></span
                >.<span class="textcolor" style="color: #000000"
                  ><a href="tikz-coordinates#pgf.x">x</a></span
                >
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="library-math#pgf.math">math</a></span
                >.<span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.cos">cos</a></span
                ><span class="textcolor" style="color: #800080"
                  >(i * alpha)</span
                > <span class="textcolor" style="color: #000000">*</span>
                <span class="textcolor" style="color: #000000">vertex</span
                >.<span class="textcolor" style="color: #000000">options</span
                >.<span class="textcolor" style="color: #000000"
                  ><a href="tikz-coordinates#pgf.radius">radius</a></span
                ><br />
                <span class="spaces">          </span><span
                  class="textcolor"
                  style="color: #000000"
                  >vertex</span
                >.<span class="textcolor" style="color: #000000"
                  ><a href="tikz-shapes#pgf.pos">pos</a></span
                >.<span class="textcolor" style="color: #000000"
                  ><a href="tikz-coordinates#pgf.y">y</a></span
                >
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="library-math#pgf.math">math</a></span
                >.<span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.sin">sin</a></span
                ><span class="textcolor" style="color: #800080"
                  >(i * alpha)</span
                > <span class="textcolor" style="color: #000000">*</span>
                <span class="textcolor" style="color: #000000">vertex</span
                >.<span class="textcolor" style="color: #000000">options</span
                >.<span class="textcolor" style="color: #000000"
                  ><a href="tikz-coordinates#pgf.radius">radius</a></span
                ><br />
              </code>
            </div>
          </figure>
          <h6 id="autosec-4848">
            <span
              ><span class="sectionnumber" id="sec-36.2.6">36.2.6</span> Adding
              Inline Documentation</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.2.6"
              data-pdf-destination="subsubsection.36.2.6"
              data-pdf-page="494"
              href="#sec-36.2.6"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4848"></a>

          <p>
            You should always document the keys you
            <span class="verb">declare</span>. For this, the
            <span class="verb">declare</span> function allows you to add three
            fields to its argument table:
          </p>
          <ul class="itemize" style="list-style-type: none">
            <li>
              <p>
                <span class="listmarker">&bull;</span>
                <span class="verb">summary</span> This should be a string that
                succinctly summarizes the effect this key has. The idea is that
                this text will be shown as a &ldquo;tooltip&rdquo; in a
                graphical editor or will be printed out by a command line tool
                when a user requests help about the key. You can profit from
                using Lua&rsquo;s <span class="verb">[[</span> and
                <span class="verb">]]</span> syntax for specifying multi-line
                strings.
              </p>
              <p>
                Also, when the file containing the key is parsed for this
                manual, this text will be shown.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span>
                <span class="verb">documentation</span> When present, this field
                contains a more extensive documentation of the key. It will also
                be shown in this manual, but typically not as a tool tip.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span>
                <span class="verb">examples</span> This should either be a
                single string or an array of strings. Each string should be an
                example demonstrating how the key is used in
                <span class="tikzname">TikZ</span>. They will all be included in
                the manual, each surrounded by a
                <span class="verb">codeexample</span> environment.
              </p>
            </li>
          </ul>

          <p>
            Let us augment our <span class="verb">radius</span> key with some
            documentation. The three dashes before the
            <span class="verb">declare</span> are only needed when the
            declaration is part of this manual and they will trigger an
            inclusion of the key in the manual.
          </p>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000">---</span><br />
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.declare">declare</a></span
                >
                {<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  >key</span
                >
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #000000">"radius"</span
                >,<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  ><a href="library-patterns#pgf.type">type</a></span
                >
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #000000">"length"</span
                >,<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  ><a href="library-automata#pgf.initial">initial</a></span
                >
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #000000">"25pt"</span
                >,<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  >summary</span
                >
                <span class="textcolor" style="color: #000000">=</span> [<span
                  class="textcolor"
                  style="color: #008000"
                  >[</span
                ><br />
                <br />
                <span class="spaces">    </span><span
                  class="textcolor"
                  style="color: #008000"
                  >Specifies the radius of a circle on which the nodes are
                  placed when</span
                ><br />
                <br />
                <span class="spaces">    </span><span
                  class="textcolor"
                  style="color: #008000"
                  >the |very simple example layout| is used. Each vertex can
                  have a</span
                ><br />
                <br />
                <span class="spaces">    </span><span
                  class="textcolor"
                  style="color: #008000"
                  >different radius.</span
                ><br />
                <br />
                <span class="spaces">  </span>]<span class="textcolor" style="color: #000000"
                  >]</span
                >,<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  ><a href="gd-algorithm-layer#pgf.examples">examples</a></span
                >
                <span class="textcolor" style="color: #000000">=</span> [<span
                  class="textcolor"
                  style="color: #008000"
                  >[</span
                ><br />
                <br />
                <span class="spaces">    </span><span
                  class="textcolor"
                  style="color: #0000b2"
                  ><a href="tikz-scopes#pgf.back/tikz">\tikz</a></span
                > <span class="textcolor" style="color: #0000b2"
                  ><a href="tikz-graphs#pgf.back/graph">\graph</a></span
                > <span class="textcolor" style="color: #008000"
                  >[very simple example layout</span
                >, <span class="textcolor" style="color: #008000"
                  ><a href="tikz-coordinates#pgf.radius">radius</a></span
                >=<span class="textcolor" style="color: #008000">2cm</span
                >] {<br />
                <span class="spaces">      </span><span
                  class="textcolor"
                  style="color: #000000"
                  >a</span
                >
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >
                <span class="textcolor" style="color: #000000">b</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >
                <span class="textcolor" style="color: #000000">c</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >
                <span class="textcolor" style="color: #000000">d</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >
                <span class="textcolor" style="color: #000000">e</span>;<br />
                <span class="spaces">    </span>};<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  >]]</span
                ><br />
                }<br />
              </code>
            </div>
          </figure>

          <p>
            As a courtesy, all of the strings given in the documentation can
            start and end with quotation marks, which will be removed. (This
            helps syntax highlighting with editors that do not recognize the
            <span class="verb">[[</span> to
            <span class="verb">]]</span> syntax.) Also, the indentation of the
            strings is removed (we compute the minimum number of leading spaces
            on any line and remove this many spaces from all lines).
          </p>
          <h6 id="autosec-4849">
            <a id="section-gd-documentation-in"></a
            ><span
              ><span class="sectionnumber" id="sec-36.2.7">36.2.7</span> Adding
              External Documentation</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.2.7"
              data-pdf-destination="subsubsection.36.2.7"
              data-pdf-page="494"
              href="#sec-36.2.7"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4849"></a>

          <p>
            As an alternative to inlining documentation, you can also store the
            documentation of keys in a separate file that is loaded only when
            the documentation is actually accessed. Since this happens only
            rarely (for instance, not at all, when
            <span class="tikzname">TikZ</span> is run, except for this manual),
            this will save time and space. Also, for C code, it is impractical
            to store multi-line documentation strings directly in the C file.
          </p>

          <p>
            In order to store documentation externally, instead of the
            <span class="verb">summary</span>,
            <span class="verb">documentation</span>, and
            <span class="verb">examples</span> keys, you provide the key
            <span class="verb">documentation_in</span>. The
            <span class="verb">documentation_in</span> key must be set to a
            string that is input using <span class="verb">require</span>.
          </p>

          <p>
            In detail, when someone tries to access the
            <span class="verb">summary</span>,
            <span class="verb">documentation</span>, or
            <span class="verb">examples</span> field of a key and these keys are
            not (yet) defined, the system checks whether the
            <span class="verb">documentation_in</span> key is set. If so, we
            apply <span class="verb">require</span> to the string stored in this
            field. The file loaded in this way can now setup the missing fields
            of the current key and, typically, also of all other keys defined in
            the same file as the current key. For this purpose, it is advisable
            to use the <span class="verb">pgf.gd.doc</span> class:
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><b>Lua table</b>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >doc</span
                        ></kbd
                      >
                      (declared in <kbd>pgf.gd.doc</kbd>)</span
                    >
                  </p>
                </li>
              </div>
              <p>
                The table doc is used for documentation purposes. It is used to
                provide lazy documentation for keys, that is, to install
                documentation for keys only when this information is requested
                and when the documentation is kept in a separate file.
              </p>
              <p>Using the doc facility is easy:</p>
              <ul class="enumerate" style="list-style-type: none">
                <li>
                  <p>
                    <span class="listmarker">1.</span> In the
                    <span class="verb">declare</span> statement of the key, you
                    do not provide fields like
                    <span class="verb">documentation</span> or
                    <span class="verb">summary</span>. Rather, you provide the
                    field <span class="verb">documentation_in</span>, which gets
                    the name of a Lua file the will be read whenever one of the
                    fields <span class="verb">documentation</span>,
                    <span class="verb">summary</span>, or
                    <span class="verb">examples</span> is requested for the key.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">2.</span> When the key is
                    requested, <span class="verb">require</span> will be applied
                    to the filename given in the
                    <span class="verb">documentation_in</span> field.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">3.</span> In this file, you start
                    with the following code:
                  </p>

                  <figure class="example">
                    <div class="example-code">
                      <button class="clipboardButton" type="button">
                        copy
                      </button>
                      <code>
                        <br />
                        <span class="textcolor" style="color: #000000"
                          >local</span
                        >
                        <span class="textcolor" style="color: #000000"
                          >doc</span
                        >
                        <span class="spaces">          </span><span
                          class="textcolor"
                          style="color: #000000"
                          >=</span
                        >
                        <span class="textcolor" style="color: #000000"
                          >require</span
                        >
                        <span class="textcolor" style="color: #000000"
                          >'pgf</span
                        >.<span class="textcolor" style="color: #000000"
                          >gd</span
                        >.<span class="textcolor" style="color: #000000"
                          >doc'</span
                        ><br />
                        <span class="textcolor" style="color: #000000"
                          >local</span
                        >
                        <span class="textcolor" style="color: #000000"
                          >key</span
                        >
                        <span class="spaces">          </span><span
                          class="textcolor"
                          style="color: #000000"
                          >=</span
                        >
                        <span class="textcolor" style="color: #000000">doc</span
                        >.<span class="textcolor" style="color: #000000"
                          >key</span
                        ><br />
                        <span class="textcolor" style="color: #000000"
                          >local</span
                        >
                        <span class="textcolor" style="color: #000000"
                          >documentation</span
                        >
                        <span class="textcolor" style="color: #000000">=</span>
                        <span class="textcolor" style="color: #000000">doc</span
                        >.<span class="textcolor" style="color: #000000"
                          >documentation</span
                        ><br />
                        <span class="textcolor" style="color: #000000"
                          >local</span
                        >
                        <span class="textcolor" style="color: #000000"
                          >summary</span
                        >
                        <span class="spaces">      </span><span
                          class="textcolor"
                          style="color: #000000"
                          >=</span
                        >
                        <span class="textcolor" style="color: #000000">doc</span
                        >.<span class="textcolor" style="color: #000000"
                          >summary</span
                        ><br />
                        <span class="textcolor" style="color: #000000"
                          >local</span
                        >
                        <span class="textcolor" style="color: #000000"
                          >example</span
                        >
                        <span class="spaces">      </span><span
                          class="textcolor"
                          style="color: #000000"
                          >=</span
                        >
                        <span class="textcolor" style="color: #000000">doc</span
                        >.<span class="textcolor" style="color: #000000"
                          >example</span
                        ><br />
                      </code>
                    </div>
                  </figure>
                  <p>
                    This will setup nice shortcuts for the commands you are
                    going to use in your file.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">4.</span> Next, for each
                    to-be-lazily-documented key, add a block to the file like
                    the following:
                  </p>

                  <figure class="example">
                    <div class="example-code">
                      <button class="clipboardButton" type="button">
                        copy
                      </button>
                      <code>
                        <br />
                        <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                          >---</span
                        ><br />
                        <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                          >key</span
                        >
                        <span class="spaces">          </span><span
                          class="textcolor"
                          style="color: #000000"
                          >"my</span
                        >
                        <span class="textcolor" style="color: #000000"
                          >radius"</span
                        ><br />
                        <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                          >summary</span
                        >
                        <span class="spaces">      </span><span
                          class="textcolor"
                          style="color: #000000"
                          >"This</span
                        >
                        <span class="textcolor" style="color: #000000"
                          >key</span
                        >
                        <span class="textcolor" style="color: #000000"
                          >specifies</span
                        >
                        <span class="textcolor" style="color: #000000">a</span>
                        <span class="textcolor" style="color: #000000"
                          ><a href="tikz-coordinates#pgf.radius"
                            >radius</a
                          ></span
                        >.<span class="textcolor" style="color: #000000">"</span
                        ><br />
                        <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                          >documentation</span
                        ><br />
                        <span class="spaces"> </span>[<span class="textcolor" style="color: #008000"
                          >[</span
                        ><br />
                        <br />
                        <span class="spaces"> </span><span class="textcolor" style="color: #008000"
                          >This key is used</span
                        >, <span class="textcolor" style="color: #008000"
                          >whenever...</span
                        ><br />
                        <br />
                        <span class="spaces"> </span>]<span class="textcolor" style="color: #000000"
                          >]</span
                        ><br />
                        <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                          >example</span
                        >
                        <span class="spaces">      </span><span
                          class="textcolor"
                          style="color: #000000"
                          >"</span
                        ><span class="textcolor" style="color: #0000b2"
                          ><a href="tikz-scopes#pgf.back/tikz">\tikz</a></span
                        > <span class="textcolor" style="color: #0000b2"
                          ><a href="tikz-graphs#pgf.back/graph">\graph</a></span
                        > [<span class="textcolor" style="color: #008000"
                          >foo layout</span
                        >, <span class="textcolor" style="color: #008000"
                          >my radius</span
                        >=<span class="textcolor" style="color: #008000">5</span
                        >] {<span class="spaces"> </span><span
                          class="textcolor"
                          style="color: #000000"
                          >a--b</span
                        >
                        };<span class="textcolor" style="color: #000000">"</span
                        ><br />
                        <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                          >example</span
                        >
                        <span class="spaces">      </span><span
                          class="textcolor"
                          style="color: #000000"
                          >"</span
                        ><span class="textcolor" style="color: #0000b2"
                          ><a href="tikz-scopes#pgf.back/tikz">\tikz</a></span
                        > <span class="textcolor" style="color: #0000b2"
                          ><a href="tikz-graphs#pgf.back/graph">\graph</a></span
                        > [<span class="textcolor" style="color: #008000"
                          >foo layout</span
                        >, <span class="textcolor" style="color: #008000"
                          >my radius</span
                        >=<span class="textcolor" style="color: #008000">3</span
                        >] {<span class="spaces"> </span><span
                          class="textcolor"
                          style="color: #000000"
                          >c--d</span
                        >
                        };<span class="textcolor" style="color: #000000">"</span
                        ><br />
                      </code>
                    </div>
                  </figure>
                  <p>
                    Note that <span class="verb">[[</span> and
                    <span class="verb">]]</span> are used in Lua for raw
                    multi-line strings.
                  </p>
                  <p>
                    The effect of the above code will be that for the key
                    <span class="verb">my radius</span> the different field like
                    <span class="verb">summary</span> or
                    <span class="verb">documentation</span> get updated. The
                    <span class="verb">key</span> function simple
                    &ldquo;selects&rdquo; a key and subsequent commands like
                    <span class="verb">summary</span> will update this key until
                    a different key is selected through another use of
                    <span class="verb">key</span>.
                  </p>
                </li>
              </ul>
              <p>
                <em>Alphabetical method summary:</em>
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/doc.documentation"
                    >function doc.<span class="textcolor" style="color: #bf0000"
                      >documentation</span
                    >
                    (string)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/doc.example"
                    >function doc.<span class="textcolor" style="color: #bf0000"
                      >example</span
                    >
                    (string)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/doc.key"
                    >function doc.<span class="textcolor" style="color: #bf0000"
                      >key</span
                    >
                    (key)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/doc.summary"
                    >function doc.<span class="textcolor" style="color: #bf0000"
                      >summary</span
                    >
                    (string)</a
                  ></kbd
                >
              </p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/doc.key"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >doc.<span class="textcolor" style="color: #bf0000"
                          >key</span
                        ></kbd
                      ><kbd>(key)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Selects the key which will be subsequently updated by the other
                functions of this class.
              </p>
              <p><em>Parameters:</em> <em>1.</em> <kbd>key</kbd> A key.</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/doc.summary"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >doc.<span class="textcolor" style="color: #bf0000"
                          >summary</span
                        ></kbd
                      ><kbd>(string)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Updates (replaces) the summary field of the last key selected
                through the <span class="verb">key</span> command.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>string</kbd> A (new)
                summary string.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/doc.documentation"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >doc.<span class="textcolor" style="color: #bf0000"
                          >documentation</span
                        ></kbd
                      ><kbd>(string)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Updates (replaces) the documentation field of the last key
                selected through the <span class="verb">key</span> command.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>string</kbd> A (new)
                documentation string. Typically, the
                <span class="verb">[[</span> syntax will be used to specify this
                string.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/doc.example"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >doc.<span class="textcolor" style="color: #bf0000"
                          >example</span
                        ></kbd
                      ><kbd>(string)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Adds an example to the <span class="verb">examples</span> field
                of the last key selected through the
                <span class="verb">key</span> command.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>string</kbd> An additional
                example string.
              </p>
              <p></p>
            </ul>
          </div>

          <p>As a longer example, consider the following declarations:</p>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000">---</span><br />
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.declare">declare</a></span
                >
                {<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  >key</span
                >
                <span class="spaces">              </span><span
                  class="textcolor"
                  style="color: #000000"
                  >=</span
                >
                <span class="textcolor" style="color: #000000">"very</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.simple">simple</a></span
                >
                <span class="textcolor" style="color: #000000">demo</span>
                <span class="textcolor" style="color: #000000">layout"</span
                >,<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  >algorithm</span
                >
                <span class="spaces">        </span><span
                  class="textcolor"
                  style="color: #000000"
                  >=</span
                >
                <span class="textcolor" style="color: #000000"
                  >ExampleClass</span
                >,<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  >documentation_in</span
                >
                <span class="spaces"> </span><span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #000000"
                  >"documentation_file"</span
                ><br />
                }<br />
                <br />
                <span class="textcolor" style="color: #000000">---</span><br />
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.declare">declare</a></span
                >
                {<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  >key</span
                >
                <span class="spaces">              </span><span
                  class="textcolor"
                  style="color: #000000"
                  >=</span
                >
                <span class="textcolor" style="color: #000000">"radius"</span
                >,<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  ><a href="library-patterns#pgf.type">type</a></span
                >
                <span class="spaces">             </span><span
                  class="textcolor"
                  style="color: #000000"
                  >=</span
                >
                <span class="textcolor" style="color: #000000">"length"</span
                >,<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  ><a href="library-automata#pgf.initial">initial</a></span
                >
                <span class="spaces">          </span><span
                  class="textcolor"
                  style="color: #000000"
                  >=</span
                >
                <span class="textcolor" style="color: #000000">"25"</span
                >,<br />
                <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                  >documentation_in</span
                >
                <span class="spaces"> </span><span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #000000"
                  >"documentation_file"</span
                ><br />
                }<br />
              </code>
            </div>
          </figure>

          <p>
            The file <span class="verb">documentation_file.lua</span> would look
            like this:
          </p>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >
                <span class="textcolor" style="color: #000000">File</span>
                <span class="textcolor" style="color: #000000"
                  >documentation_file</span
                >.<span class="textcolor" style="color: #000000">lua</span
                ><br />
                <span class="textcolor" style="color: #000000">local</span>
                <span class="textcolor" style="color: #000000">key</span>
                <span class="spaces">          </span><span
                  class="textcolor"
                  style="color: #000000"
                  >=</span
                >
                <span class="textcolor" style="color: #000000">require</span>
                <span class="textcolor" style="color: #000000">'pgf</span>.<span
                  class="textcolor"
                  style="color: #000000"
                  >gd</span
                >.<span class="textcolor" style="color: #000000">doc'</span
                >.<span class="textcolor" style="color: #000000">key</span
                ><br />
                <span class="textcolor" style="color: #000000">local</span>
                <span class="textcolor" style="color: #000000"
                  >documentation</span
                >
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #000000">require</span>
                <span class="textcolor" style="color: #000000">'pgf</span>.<span
                  class="textcolor"
                  style="color: #000000"
                  >gd</span
                >.<span class="textcolor" style="color: #000000">doc'</span
                >.<span class="textcolor" style="color: #000000"
                  >documentation</span
                ><br />
                <span class="textcolor" style="color: #000000">local</span>
                <span class="textcolor" style="color: #000000">summary</span>
                <span class="spaces">      </span><span
                  class="textcolor"
                  style="color: #000000"
                  >=</span
                >
                <span class="textcolor" style="color: #000000">require</span>
                <span class="textcolor" style="color: #000000">'pgf</span>.<span
                  class="textcolor"
                  style="color: #000000"
                  >gd</span
                >.<span class="textcolor" style="color: #000000">doc'</span
                >.<span class="textcolor" style="color: #000000">summary</span
                ><br />
                <span class="textcolor" style="color: #000000">local</span>
                <span class="textcolor" style="color: #000000">example</span>
                <span class="spaces">      </span><span
                  class="textcolor"
                  style="color: #000000"
                  >=</span
                >
                <span class="textcolor" style="color: #000000">require</span>
                <span class="textcolor" style="color: #000000">'pgf</span>.<span
                  class="textcolor"
                  style="color: #000000"
                  >gd</span
                >.<span class="textcolor" style="color: #000000">doc'</span
                >.<span class="textcolor" style="color: #000000">example</span
                ><br />
                <br />
                <span class="textcolor" style="color: #000000">key</span>
                <span class="spaces">          </span><span
                  class="textcolor"
                  style="color: #000000"
                  >"very</span
                >
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.simple">simple</a></span
                >
                <span class="textcolor" style="color: #000000">demo</span>
                <span class="textcolor" style="color: #000000">layout"</span
                ><br />
                <span class="textcolor" style="color: #000000"
                  >documentation</span
                >
                <span class="textcolor" style="color: #000000">"This</span>
                <span class="textcolor" style="color: #000000">layout</span>
                <span class="textcolor" style="color: #000000">is</span>
                <span class="textcolor" style="color: #000000">a</span>
                <span class="textcolor" style="color: #000000">very</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.simple">simple</a></span
                >
                <span class="textcolor" style="color: #000000">layout</span>
                <span class="textcolor" style="color: #000000">that</span
                >,<span class="spaces"> </span>...<span class="textcolor" style="color: #000000"
                  >"</span
                ><br />
                <br />
                <span class="textcolor" style="color: #000000">key</span>
                <span class="spaces">          </span><span
                  class="textcolor"
                  style="color: #000000"
                  >"radius"</span
                ><br />
                <span class="textcolor" style="color: #000000">summary</span>
                <span class="spaces">      </span><span
                  class="textcolor"
                  style="color: #000000"
                  >"Specifies</span
                >
                <span class="textcolor" style="color: #000000">the</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-coordinates#pgf.radius">radius</a></span
                >
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-coordinates#pgf.of">of</a></span
                >
                <span class="textcolor" style="color: #000000">a</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.circle">circle</a></span
                >
                <span class="textcolor" style="color: #000000">on</span>
                <span class="textcolor" style="color: #000000">which</span>
                <span class="textcolor" style="color: #000000">the</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.nodes">nodes</a></span
                >
                <span class="textcolor" style="color: #000000">are</span>
                <span class="textcolor" style="color: #000000">placed</span
                >.<span class="textcolor" style="color: #000000">"</span><br />
                <span class="textcolor" style="color: #000000"
                  >documentation</span
                ><br />
                [<span class="textcolor" style="color: #008000">[</span><br />
                <br />
                <span class="textcolor" style="color: #008000"
                  >This key can be used together with |very simple example
                  layout|. An</span
                ><br />
                <br />
                <span class="textcolor" style="color: #008000"
                  >important feature is that...</span
                ><br />
                <br />
                ]<span class="textcolor" style="color: #000000">]</span><br />
                <span class="textcolor" style="color: #000000">example</span
                ><br />
                [<span class="textcolor" style="color: #008000">[</span><br />
                <br />
                <span class="textcolor" style="color: #0000b2"
                  ><a href="tikz-scopes#pgf.back/tikz">\tikz</a></span
                > <span class="textcolor" style="color: #0000b2"
                  ><a href="tikz-graphs#pgf.back/graph">\graph</a></span
                > <span class="textcolor" style="color: #008000"
                  >[very simple example layout</span
                >, <span class="textcolor" style="color: #008000"
                  ><a href="tikz-coordinates#pgf.radius">radius</a></span
                >=<span class="textcolor" style="color: #008000">2cm</span
                >]<br />
                {<span class="spaces"> </span><span class="textcolor" style="color: #000000">a</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >
                <span class="textcolor" style="color: #000000">b</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >
                <span class="textcolor" style="color: #000000">c</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >
                <span class="textcolor" style="color: #000000">d</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >
                <span class="textcolor" style="color: #000000">e</span
                >;<span class="spaces"> </span>};<br />
                <span class="textcolor" style="color: #000000">]]</span><br />
              </code>
            </div>
          </figure>
          <h5 id="autosec-4851">
            <a id="section-gd-namespaces"></a
            ><span
              ><span class="sectionnumber" id="sec-36.3">36.3</span> Namespaces
              and File Names</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.3"
              data-pdf-destination="subsection.36.3"
              data-pdf-page="496"
              href="#sec-36.3"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-4851"></a>

          <h6 id="autosec-4852">
            <span
              ><span class="sectionnumber" id="sec-36.3.1">36.3.1</span>
              Namespaces</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.3.1"
              data-pdf-destination="subsubsection.36.3.1"
              data-pdf-page="496"
              href="#sec-36.3.1"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4852"></a>

          <p>
            All parts of the <span class="verb">graphdrawing</span> library
            reside in the Lua &ldquo;namespace&rdquo;
            <span class="verb">pgf.gd</span>, which is itself a
            &ldquo;sub-namespace&rdquo; of <span class="verb">pgf</span>. For
            your own algorithms, you are free to place them in whatever
            namespace you like; only for the official distribution of
            <span class="textsc">pgf</span> everything has been put into the
            correct namespace.
          </p>

          <p>
            Let us now have a more detailed look at these namespaces. A
            namespace is just a Lua table, and sub-namespaces are just subtables
            of namespace tables. Following the Java convention, namespaces are
            in lowercase letters. The following namespaces are part of the core
            of the graph drawing engine:
          </p>
          <ul class="itemize" style="list-style-type: none">
            <li>
              <p>
                <span class="listmarker">&bull;</span>
                <span class="verb">pgf</span> This namespace is the main
                namespace of <span class="textsc">pgf</span>. Other parts of
                <span class="textsc">pgf</span> and
                <span class="tikzname">TikZ</span> that also employ Lua should
                put an entry into this table. Since, currently, only the graph
                drawing engine adheres to this rule, this namespace is declared
                inside the graph drawing directory, but this will change.
              </p>
              <p>
                The <span class="verb">pgf</span> table is the
                <em>only</em> entry into the global table of Lua generated by
                the graph drawing engine (or, <span class="textsc">pgf</span>,
                for that matter). If you intend to extend the graph drawing
                engine, do not even <em>think</em> of polluting the global
                namespace. You will be fined.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span>
                <span class="verb">pgf.gd</span> This namespace is the main
                namespace of the graph drawing engine, including the
                object-oriented models of graphs and the layout pipeline.
                Algorithms that are part of the distribution are also inside
                this namespace, but if you write your own algorithms you do not
                need place them inside this namespace. (Indeed, you probably
                should not before they are made part of the official
                distribution.)
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span>
                <span class="verb">pgf.gd.interface</span> This namespace
                handles, on the one hand, the communication between the
                algorithm layer and the binding layer and, on the other hand,
                the communication between the display layer (<span
                  class="tikzname"
                  >TikZ</span
                >) and the binding layer.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span>
                <span class="verb">pgf.gd.binding</span> So-called
                &ldquo;bindings&rdquo; between display layers and the graph
                drawing system reside in this namespace.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span>
                <span class="verb">pgf.gd.lib</span> Numerous useful classes
                that &ldquo;make an algorithm&rsquo;s your life easier&rdquo;
                are collected in this namespace. Examples are a class for
                decomposing a graph into connected components or a class for
                computing the ideal distance between two sibling nodes in a
                tree, taking all sorts of rotations and separation parameters
                into account.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span>
                <span class="verb">pgf.gd.model</span> This namespace contains
                all Lua classes that are part of the object-oriented model of
                graphs employed throughout the graph drawing engine. For readers
                familiar with the model&ndash;view&ndash;controller pattern:
                This is the namespace containing the model-part of this pattern.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span>
                <span class="verb">pgf.gd.control</span> This namespace contains
                the &ldquo;control logic&rdquo; of the graph drawing system. It
                will transform graphs according to rules, disassemble layouts
                and sublayouts and will call the appropriate algorithms. For
                readers still familiar with the
                model&ndash;view&ndash;controller pattern: This is the namespace
                containing the control-part of this pattern.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span>
                <span class="verb">pgf.gd.trees</span> This namespace contains
                classes that are useful for dealing with graphs that are trees.
                In particular, it contains a class for computing a spanning tree
                of an arbitrary connected graph; an operation that is an
                important preprocessing step for many algorithms.
              </p>
              <p>
                In addition to providing &ldquo;utility functions for
                trees&rdquo;, the namespace <em>also</em> includes actual
                algorithms for computing graph layouts like
                <span class="verb">pgf.gd.trees.ReingoldTilford1981</span>. It
                may seem to be a bit of an &ldquo;impurity&rdquo; that a
                namespace mixes utility classes and &ldquo;real&rdquo;
                algorithms, but experience has shown that it is better to keep
                things together in this way.
              </p>
              <p>
                Concluding the analogy to the model&ndash;view&ndash;controller
                pattern, a graph drawing algorithm is, in a loose sense, the
                &ldquo;view&rdquo; part of the pattern.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span>
                <span class="verb">pgf.gd.layered</span> This namespace provides
                classes and functions for &ldquo;layered&rdquo; layouts; the
                Sugiyama layout method being the most well-known one. Again, the
                namespace contains both algorithms to be used by a user and
                utility functions.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span>
                <span class="verb">pgf.gd.force</span> Collects force-based
                algorithms and, again, also utility functions and classes.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span>
                <span class="verb">pgf.gd.examples</span> Contains some example
                algorithms. They are <em>not</em> intended to be used directly,
                rather they should serve as inspirations for readers wishing to
                implement their own algorithms.
              </p>
            </li>
          </ul>

          <p>
            There are further namespaces that also reside in the
            <span class="verb">pgf.gd</span> namespace, these namespaces are
            used to organize different graph drawing algorithms into categories.
          </p>

          <p>
            In Lua, similarly to Java, when a class
            <span class="verb">SomeClass</span> is part of, say, the namespace
            <span class="verb">pgf.gd.example</span>, it is customary to put the
            class&rsquo;s code in a file
            <span class="verb">SomeClass.lua</span> and then put this class in a
            directory <span class="verb">example</span>, that is a subdirectory
            of a directory <span class="verb">gd</span>, which is in turn a
            subdirectory of a directory <span class="verb">pgf</span>. When you
            write <kbd>require "pgf.gd.example.SomeClass"</kbd> the so-called
            <em>loader</em> will turn this into a request for the file
            <kbd>pgf/gd/example/SomeClass.lua</kbd> (for Unix systems).
          </p>
          <h6 id="autosec-4853">
            <span
              ><span class="sectionnumber" id="sec-36.3.2">36.3.2</span>
              Defining and Using Namespaces and Classes</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.3.2"
              data-pdf-destination="subsubsection.36.3.2"
              data-pdf-page="497"
              href="#sec-36.3.2"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4853"></a>

          <p>
            There are a number of rules concerning the structure and naming of
            namespaces as well as the naming of files. Let us start with the
            rules for naming namespaces, classes, and functions. They follow the
            &ldquo;Java convention&rdquo;:
          </p>
          <ul class="enumerate" style="list-style-type: none">
            <li>
              <p>
                <span class="listmarker">1.</span> A namespace is a short
                lowercase <span class="verb">word</span>.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">2.</span> A function in a namespace is
                in
                <span class="verb"
                  >lowercase_with_underscores_between_words</span
                >.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">3.</span> A class name is in
                <span class="verb">CamelCaseWithAnUppercaseFirstLetter</span>.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">4.</span> A class method name is in
                <span class="verb">camelCaseWithALowercaseFirstLetter</span>.
              </p>
            </li>
          </ul>

          <p>
            From Lua&rsquo;s point of view, every namespace and every class is
            just a table. However, since these tables will be loaded using
            Lua&rsquo;s <span class="verb">require</span> function, each
            namespace and each class must be placed inside a separate file
            (unless you modify the
            <span class="verb">package.loaded</span> table, but, then, you know
            what you are doing anyway). Inside such a file, you should first
            declare a local variable whose name is the name of the namespace or
            class that you intend to define and then assign a (possibly empty)
            table to this variable:
          </p>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >
                <span class="textcolor" style="color: #000000">File</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="base-scopes#pgf.pgf">pgf</a></span
                >.<span class="textcolor" style="color: #000000">gd</span>.<span
                  class="textcolor"
                  style="color: #000000"
                  >example</span
                >.<span class="textcolor" style="color: #000000">SomeClass</span
                >.<span class="textcolor" style="color: #000000">lua:</span
                ><br />
                <span class="textcolor" style="color: #000000">local</span>
                <span class="textcolor" style="color: #000000">SomeClass</span>
                <span class="textcolor" style="color: #000000">=</span> {}<br />
              </code>
            </div>
          </figure>

          <p>
            Next, you should add your class to the encompassing namespace. This
            is achieved as follows:
          </p>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000">require</span
                ><span class="textcolor" style="color: #800080"
                  >("pgf.gd.example")</span
                >.<span class="textcolor" style="color: #000000"
                  >SomeClass</span
                >
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #000000">SomeClass</span
                ><br />
              </code>
            </div>
          </figure>

          <p>
            The reason this works is that the
            <span class="verb">require</span> will return the table that is the
            namespace <span class="verb">pgf.gd.example</span>. So, inside this
            namespace, the <span class="verb">SomeClass</span> field will be
            filled with the table stored in the local variable of the same name
            &ndash; which happens to be the table representing the class.
          </p>

          <p>At the end of the file, you must write</p>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000">return</span>
                <span class="textcolor" style="color: #000000">SomeClass</span
                ><br />
              </code>
            </div>
          </figure>

          <p>
            This ensures that the table that is defined in this file gets stored
            by Lua in the right places. Note that you need and should not use
            Lua&rsquo;s <span class="verb">module</span> command. The reason is
            that this command has disappeared in the new version of Lua and that
            it is not really needed.
          </p>

          <p>Users of your class can import and use your class by writing:</p>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                ...<br />
                <span class="textcolor" style="color: #000000">local</span>
                <span class="textcolor" style="color: #000000">SomeClass</span>
                <span class="textcolor" style="color: #000000">=</span>
                <span class="textcolor" style="color: #000000">require</span>
                <span class="textcolor" style="color: #000000">"pgf</span>.<span
                  class="textcolor"
                  style="color: #000000"
                  >gd</span
                >.<span class="textcolor" style="color: #000000"
                  ><a href="gd-algorithm-layer#pgf.examples">examples</a></span
                >.<span class="textcolor" style="color: #000000"
                  >SomeClass"</span
                ><br />
                ...<br />
              </code>
            </div>
          </figure>
          <h5 id="autosec-4854">
            <a id="section-gd-gd-scope"></a
            ><span
              ><span class="sectionnumber" id="sec-36.4">36.4</span> The Graph
              Drawing Scope</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.4"
              data-pdf-destination="subsection.36.4"
              data-pdf-page="498"
              href="#sec-36.4"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-4854"></a>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><b>Lua table</b>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >Scope</span
                        ></kbd
                      >
                      (declared in <kbd>pgf.gd.interface.Scope</kbd>)</span
                    >
                  </p>
                </li>
              </div>
              <p>
                In theory, graph drawing algorithms take graphs as input and
                output graphs embedded into the plane as output. In practice,
                however, the input to a graph drawing algorithm is not
                &ldquo;just&rdquo; the graph. Rather, additional information
                about the graph, in particular about the way the user specified
                the graph, is also important to many graph drawing algorithms.
              </p>
              <p>
                The graph drawing system gathers both the original input graph
                as well as all additional information that is provided in the
                graph drawing scope inside a scope table. The object has a
                number of fields that inform an algorithm about the input.
              </p>
              <p>
                For each graph drawing scope, a new
                <span class="verb">Scope</span> object is created. Graph drawing
                scopes are kept track of using a stack, but only the top of this
                stack is available to the interface classes.
              </p>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >syntactic_digraph</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    The syntactic digraph is a digraph that faithfully encodes
                    the way the input graph is represented syntactically.
                    However, this does not mean that the syntactic digraph
                    contains the actual textual representation of the input
                    graph. Rather, when an edge is specified as, say,
                    <span class="verb">a &lt;- b</span>, the syntactic digraph
                    will contains an arc from <span class="verb">a</span> to
                    <span class="verb">b</span> with an edge object attached to
                    it that is labeled as a &ldquo;backward&rdquo; edge.
                    Similarly, an edge <span class="verb">a -- b</span> is also
                    stored as a directed arc from <span class="verb">a</span> to
                    <span class="verb">b</span> with the label
                    <span class="verb">--</span> attached to it. Algorithms will
                    often be more interested graphs derived from the syntactic
                    digraph such as its underlying undirected graph. These
                    derived graphs are made accessible by the graph drawing
                    engine during the preprocessing.
                  </p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >events</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    An array of <span class="verb">Event</span> objects. These
                    objects, see the <span class="verb">Event</span> class for
                    details, are created during the parsing of the input graph.
                  </p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >node_names</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    A table that maps the names of nodes to node objects. Every
                    node must have a unique name.
                  </p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >coroutine</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    A Lua coroutine that is used internally to allow callbacks
                    to the display layer to be issued deep down during a run of
                    an algorithm.
                  </p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >collections</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    The collections specified inside the scope, see the
                    <span class="verb">Collection</span> class.
                  </p>
                </ul>
              </div>
              <p>
                <em>Alphabetical method summary:</em>
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Scope.new"
                    >function Scope.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >new</span
                    >
                    (initial)</a
                  ></kbd
                >
              </p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Scope.new"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Scope.<span class="textcolor" style="color: #bf0000"
                          >new</span
                        ></kbd
                      ><kbd>(initial)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Create a new <span class="verb">Scope</span> object.</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>initial</kbd> A table of
                initial values for the newly created
                <span class="verb">Scope</span> object.
              </p>
              <p><em>Returns:</em> <em>1.</em> The new scope object.</p>
              <p></p>
            </ul>
          </div>
          <h5 id="autosec-4855">
            <a id="section-gd-models"></a
            ><span
              ><span class="sectionnumber" id="sec-36.5">36.5</span> The Model
              Classes</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.5"
              data-pdf-destination="subsection.36.5"
              data-pdf-page="499"
              href="#sec-36.5"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-4855"></a>

          <p>
            All that a graph drawing algorithm will &ldquo;see&rdquo; of the
            graph specified by the user is a &ldquo;graph object&rdquo;. Such an
            object is an object-oriented model of the user&rsquo;s graph that no
            longer encodes the specific way in which the user specified the
            graph; it only encodes which nodes and edges are present. For
            instance, the <span class="tikzname">TikZ</span> graph specification
          </p>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.graph">graph</a></span
                >
                {<span class="spaces"> </span><span class="textcolor" style="color: #000000">a</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >
                {<span class="textcolor" style="color: #000000">b</span
                >, <span class="textcolor" style="color: #000000">c</span
                >}<span class="spaces"> </span>}<br />
              </code>
            </div>
          </figure>

          <p>and the graph specification</p>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-coordinates#pgf.node">node</a></span
                >
                <span class="textcolor" style="color: #800080">(a)</span
                > {<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                  >a</span
                >
                }<br />
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-trees#pgf.child">child</a></span
                >
                {<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                  ><a href="tikz-coordinates#pgf.node">node</a></span
                >
                <span class="textcolor" style="color: #800080">(b)</span
                > {<span class="textcolor" style="color: #000000">b</span
                >}<span class="spaces"> </span>}<br />
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-trees#pgf.child">child</a></span
                >
                {<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                  ><a href="tikz-coordinates#pgf.node">node</a></span
                >
                <span class="textcolor" style="color: #800080">(c)</span
                > {<span class="textcolor" style="color: #000000">c</span
                >}<span class="spaces"> </span>}<br />
              </code>
            </div>
          </figure>

          <p>will generate exactly the same graph object.</p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><b>Lua namespace</b>
                      <kbd
                        >pgf.gd.<span class="textcolor" style="color: #bf0000"
                          >model</span
                        ></kbd
                      ></span
                    >
                  </p>
                </li>
              </div>
              <p>
                This namespace contains the classes modeling graphs, nodes, and
                edges. Also, the <span class="verb">Coordinate</span> class is
                found here, since coordinates are also part of the modeling.
              </p>
            </ul>
          </div>
          <h6 id="autosec-4856">
            <span
              ><span class="sectionnumber" id="sec-36.5.1">36.5.1</span>
              Directed Graphs (Digraphs)</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.5.1"
              data-pdf-destination="subsubsection.36.5.1"
              data-pdf-page="499"
              href="#sec-36.5.1"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4856"></a>

          <p>
            Inside the graph drawing engine, the only model of a graph that is
            available treats graphs as
          </p>
          <ul class="enumerate" style="list-style-type: none">
            <li>
              <p>
                <span class="listmarker">1.</span> directed (all edges have a
                designated head and a designated tail) and
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">2.</span> simple (there can be at most
                one edge between any pair of nodes).
              </p>
            </li>
          </ul>

          <p>
            These two properties may appear to be somewhat at odds with what
            users can specify as graphs and with what some graph drawing
            algorithms might expect as input. For instance, suppose a user
            writes
          </p>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-graphs#pgf.graph">graph</a></span
                >
                {<span class="spaces"> </span><span class="textcolor" style="color: #000000">a</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >
                <span class="textcolor" style="color: #000000">b</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >[<span class="textcolor" style="color: #008000">red</span
                >] <span class="textcolor" style="color: #000000">c</span
                >, <span class="textcolor" style="color: #000000">b</span>
                <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >[<span class="textcolor" style="color: #008000">green</span
                >, <span class="textcolor" style="color: #008000"
                  ><a href="library-edges#pgf.bend:right">bend right</a></span
                >] <span class="textcolor" style="color: #000000">c</span>
                }<br />
              </code>
            </div>
          </figure>

          <p>
            In this case, it seems that the input graph for a graph drawing
            algorithm should actually be an <em>undirected</em> graph in which
            there are <em>multiple</em> edges (namely \(2\)) between
            <span class="verb">b</span> and&nbsp;<span class="verb">c</span>.
            Nevertheless, the graph drawing engine will turn the user&rsquo;s
            input a directed simple graph in ways described later. You do not
            need to worry that information gets lost during this process: The
            <em>syntactic digraph,</em> which is available to graph drawing
            algorithms on request, stores all the information about which edges
            are present in the original input graph.
          </p>

          <p>
            The main reasons for only considering directed, simple graphs are
            speed and simplicity: The implementation of these graphs has been
            optimized so that all operations on these graphs have a guaranteed
            running time that is small in practice.
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><b>Lua table</b>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >Digraph</span
                        ></kbd
                      >
                      (declared in <kbd>pgf.gd.model.Digraph</kbd>)</span
                    >
                  </p>
                </li>
              </div>
              <p>
                Each <span class="verb">Digraph</span> instance models a
                <em>directed, simple</em> graph. &ldquo;Directed&rdquo; means
                that all edges &ldquo;point&rdquo; from a head node to a tail
                node. &ldquo;Simple&rdquo; means that between any nodes there
                can be (at most) one edge. Since these properties are a bit at
                odds with the normal behavior of &ldquo;nodes&rdquo; and
                &ldquo;edges&rdquo; in <span class="tikzname">TikZ</span>,
                different names are used for them inside the
                <span class="verb">model</span> namespace: The class modeling
                &ldquo;edges&rdquo; is actually called
                <span class="verb">Arc</span> to stress that an arc has a
                specific &ldquo;start&rdquo; (the tail) and a specific
                &ldquo;end&rdquo; (the head). The class modeling
                &ldquo;nodes&rdquo; is actually called
                <span class="verb">Vertex</span>, just to stress that this is
                not a direct model of a <span class="tikzname">TikZ</span>
                <span class="verb">node</span>, but can represent a arbitrary
                vertex of a graph, independently of whether it is an actual
                <span class="verb">node</span> in
                <span class="tikzname">TikZ</span>.
              </p>
              <p>
                <em>Time Bounds.</em> Since digraphs are constantly created and
                modified inside the graph drawing engine, some care was taken to
                ensure that all operations work as quickly as possible. In
                particular:
              </p>
              <ul class="itemize" style="list-style-type: none">
                <li>
                  <p>
                    <span class="listmarker">&bull;</span> Adding an array of
                    \(k\) vertices using the
                    <span class="verb">add</span> method needs time \(O(k)\).
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span> Adding an arc between
                    two vertices needs time \(O(1)\).
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span> Accessing both the
                    <span class="verb">vertices</span> and the
                    <span class="verb">arcs</span> fields takes time \(O(1)\),
                    provided only the above operations are used.
                  </p>
                </li>
              </ul>
              <p>Deleting vertices and arcs takes more time:</p>
              <ul class="itemize" style="list-style-type: none">
                <li>
                  <p>
                    <span class="listmarker">&bull;</span> Deleting the vertices
                    given in an array of \(k\) vertices from a graph with \(n\)
                    vertices takes time \(O(\max \{n,c\})\) where \(c\) is the
                    number of arcs between the to-be-deleted nodes and the
                    remaining nodes. Note that this time bound in independent
                    of&nbsp;\(k\). In particular, it will be much faster to
                    delete many vertices by once calling the
                    <span class="verb">remove</span> function instead of calling
                    it repeatedly.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span> Deleting an arc takes
                    time \(O(t_o+h_i)\) where \(t_o\) is the number of outgoing
                    arcs at the arc&rsquo;s tail and \(h_i\) is the number of
                    incoming arcs at the arc&rsquo;s head. After a call to
                    <span class="verb">disconnect</span>, the next use of the
                    <span class="verb">arcs</span> field will take time \(O(|V|
                    + |E|)\), while subsequent accesses take time \(O(1)\)
                    &ndash; till the next use of
                    <span class="verb">disconnect</span>. This means that once
                    you start deleting arcs using
                    <span class="verb">disconnect</span>, you should perform as
                    many additional <span class="verb">disconnect</span>s as
                    possible before accessing <span class="verb">arcs</span> one
                    more.
                  </p>
                </li>
              </ul>
              <p>
                <em>Stability.</em> The <span class="verb">vertices</span> field
                and the array returned by
                <span class="verb">Digraph:incoming</span> and
                <span class="verb">Digraph:outgoing</span> are
                <em>stable</em> in the following sense: The ordering of the
                elements when you use <span class="verb">ipairs</span> on the
                will be the ordering in which the vertices or arcs were added to
                the graph. Even when you remove a vertex or an arc, the ordering
                of the remaining elements stays the same.
              </p>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >vertices</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    This array contains the vertices that are part of the
                    digraph. Internally, this array is an object of type
                    <span class="verb">LookupTable</span>, but you can mostly
                    treat it as if it were an array. In particular, you can
                    iterate over its elements using
                    <span class="verb">ipairs</span>, but you may not modify the
                    array; use the <span class="verb">add</span> and
                    <span class="verb">remove</span> methods, instead.
                  </p>

                  <figure class="example">
                    <div class="example-code">
                      <button class="clipboardButton" type="button">
                        copy
                      </button>
                      <code>
                        <br />
                        <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                          >local</span
                        >
                        <span class="textcolor" style="color: #000000">g</span>
                        <span class="textcolor" style="color: #000000">=</span>
                        <span class="textcolor" style="color: #000000"
                          >Digraph</span
                        >.<span class="textcolor" style="color: #000000"
                          >new</span
                        >
                        {}<br />
                        <br />
                        <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                          >g:add</span
                        >
                        {<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                          >v1</span
                        >, <span class="textcolor" style="color: #000000"
                          >v2</span
                        >
                        } <span class="textcolor" style="color: #000000"
                          ><a href="tikz-paths#pgf.--">--</a></span
                        >
                        <span class="textcolor" style="color: #000000"
                          >Add</span
                        >
                        <span class="textcolor" style="color: #000000"
                          >vertices</span
                        >
                        <span class="textcolor" style="color: #000000">v1</span>
                        <span class="textcolor" style="color: #000000"
                          ><a href="pgfkeys#pgf.and">and</a></span
                        >
                        <span class="textcolor" style="color: #000000">v2</span
                        ><br />
                        <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                          >g:remove</span
                        >
                        {<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                          >v2</span
                        >
                        }<span class="spaces">  </span><span
                          class="textcolor"
                          style="color: #000000"
                          ><a href="tikz-paths#pgf.--">--</a></span
                        >
                        <span class="textcolor" style="color: #000000"
                          >Get</span
                        >
                        <span class="textcolor" style="color: #000000"
                          >rid</span
                        >
                        <span class="textcolor" style="color: #000000"
                          ><a href="tikz-coordinates#pgf.of">of</a></span
                        >
                        <span class="textcolor" style="color: #000000">v2</span
                        >.<br />
                        <br />
                        <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                          >assert</span
                        >
                        <span class="textcolor" style="color: #800080"
                          >(g:contains(v1)</span
                        >)<br />
                        <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                          >assert</span
                        >
                        <span class="textcolor" style="color: #800080"
                          >(not g:contains(v2)</span
                        >)<br />
                        <span class="spaces"> </span>
                      </code>
                    </div>
                  </figure>
                  <p>
                    It is important to note that although each digraph stores a
                    <span class="verb">vertices</span> array, the elements in
                    this array are not exclusive to the digraph: A vertex can be
                    an element of any number of digraphs. Whether or not a
                    vertex is an element of digraph is not stored in the vertex,
                    only in the <span class="verb">vertices</span> array of the
                    digraph. To test whether a digraph contains a specific node,
                    use the <span class="verb">contains</span> method, which
                    takes time \(O(1)\) to perform the test (this is because, as
                    mentioned earlier, the
                    <span class="verb">vertices</span> array is actually a
                    <span class="verb">LookupTable</span> and for each vertex
                    <span class="verb">v</span> the field
                    <span class="verb">vertices[v]</span> will be true if, and
                    only if, <span class="verb">v</span> is an element of the
                    <span class="verb">vertices</span> array).
                  </p>
                  <p>
                    Do not use
                    <span class="verb">pairs(g.vertices)</span> because this may
                    cause your graph drawing algorithm to produce different
                    outputs on different runs.
                  </p>
                  <p>
                    A slightly annoying effect of vertices being able to belong
                    to several graphs at the same time is that the set of arcs
                    incident to a vertex is not a property of the vertex, but
                    rather of the graph. In other words, to get a list of all
                    arcs whose tail is a given vertex
                    <span class="verb">v</span>, you cannot say something like
                    <span class="verb">v.outgoings</span> or perhaps
                    <span class="verb">v:getOutgoings()</span>. Rather, you have
                    to say <span class="verb">g:outgoing(v)</span> to get this
                    list:
                  </p>

                  <figure class="example">
                    <div class="example-code">
                      <button class="clipboardButton" type="button">
                        copy
                      </button>
                      <code>
                        <br />
                        <span class="textcolor" style="color: #000000"
                          >for</span
                        >
                        <span class="textcolor" style="color: #000000">_</span
                        >,<span class="textcolor" style="color: #000000"
                          >a</span
                        >
                        <span class="textcolor" style="color: #000000"
                          ><a href="library-edges#pgf.in">in</a></span
                        >
                        <span class="textcolor" style="color: #000000"
                          >ipairs</span
                        ><span class="textcolor" style="color: #800080"
                          >(g:outgoing(v)</span
                        >)<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                          >do</span
                        >
                        <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                          ><a href="tikz-paths#pgf.--">--</a></span
                        >
                        <span class="textcolor" style="color: #000000">g</span>
                        <span class="textcolor" style="color: #000000">is</span>
                        <span class="textcolor" style="color: #000000">a</span>
                        <span class="textcolor" style="color: #000000"
                          >Digraph</span
                        >
                        <span class="textcolor" style="color: #000000"
                          ><a href="tikz-animations#pgf.object">object</a></span
                        >.<br />
                        <span class="spaces">  </span><span
                          class="textcolor"
                          style="color: #000000"
                          ><a href="base-scopes#pgf.pgf">pgf</a></span
                        >.<span class="textcolor" style="color: #000000"
                          >debug</span
                        >
                        <span class="textcolor" style="color: #800080"
                          >("There is an arc leaving " .. tostring(v)</span
                        ><span class="spaces"> </span>..<br />
                        <span class="spaces">             </span><span
                          class="textcolor"
                          style="color: #000000"
                          >"</span
                        >
                        <span class="textcolor" style="color: #000000"
                          >heading</span
                        >
                        <span class="textcolor" style="color: #000000"
                          ><a href="tikz-paths#pgf.to">to</a></span
                        >
                        <span class="textcolor" style="color: #000000">"</span>
                        ..<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                          >tostring</span
                        ><span class="textcolor" style="color: #800080"
                          >(a.head)</span
                        >)<br />
                        <span class="textcolor" style="color: #000000"
                          ><a href="base-animations#pgf.end">end</a></span
                        ><br />
                      </code>
                    </div>
                  </figure>
                  <p>
                    Naturally, there is also a method
                    <span class="verb">g:incoming()</span>.
                  </p>
                  <p>To iterate over all arcs of a graph you can say:</p>

                  <figure class="example">
                    <div class="example-code">
                      <button class="clipboardButton" type="button">
                        copy
                      </button>
                      <code>
                        <br />
                        <span class="textcolor" style="color: #000000"
                          >for</span
                        >
                        <span class="textcolor" style="color: #000000">_</span
                        >,<span class="textcolor" style="color: #000000"
                          >v</span
                        >
                        <span class="textcolor" style="color: #000000"
                          ><a href="library-edges#pgf.in">in</a></span
                        >
                        <span class="textcolor" style="color: #000000"
                          >ipairs</span
                        ><span class="textcolor" style="color: #800080"
                          >(g.vertices)</span
                        > <span class="textcolor" style="color: #000000"
                          >do</span
                        ><br />
                        <span class="spaces">  </span><span
                          class="textcolor"
                          style="color: #000000"
                          >for</span
                        >
                        <span class="textcolor" style="color: #000000">_</span
                        >,<span class="textcolor" style="color: #000000"
                          >a</span
                        >
                        <span class="textcolor" style="color: #000000"
                          ><a href="library-edges#pgf.in">in</a></span
                        >
                        <span class="textcolor" style="color: #000000"
                          >ipairs</span
                        ><span class="textcolor" style="color: #800080"
                          >(g:outgoing(v)</span
                        >)<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                          >do</span
                        ><br />
                        <span class="spaces">   </span>...<br />
                        <span class="spaces">  </span><span
                          class="textcolor"
                          style="color: #000000"
                          ><a href="base-animations#pgf.end">end</a></span
                        ><br />
                        <span class="textcolor" style="color: #000000"
                          ><a href="base-animations#pgf.end">end</a></span
                        ><br />
                      </code>
                    </div>
                  </figure>
                  <p>
                    However, it will often be more convenient and, in case the
                    there are far less arcs than vertices, also faster to write
                  </p>

                  <figure class="example">
                    <div class="example-code">
                      <button class="clipboardButton" type="button">
                        copy
                      </button>
                      <code>
                        <br />
                        <span class="textcolor" style="color: #000000"
                          >for</span
                        >
                        <span class="textcolor" style="color: #000000">_</span
                        >,<span class="textcolor" style="color: #000000"
                          >a</span
                        >
                        <span class="textcolor" style="color: #000000"
                          ><a href="library-edges#pgf.in">in</a></span
                        >
                        <span class="textcolor" style="color: #000000"
                          >ipairs</span
                        ><span class="textcolor" style="color: #800080"
                          >(g.arcs)</span
                        > <span class="textcolor" style="color: #000000"
                          >do</span
                        ><br />
                        <span class="spaces">  </span>...<br />
                        <span class="textcolor" style="color: #000000"
                          ><a href="base-animations#pgf.end">end</a></span
                        ><br />
                      </code>
                    </div>
                  </figure>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >arcs</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    For any two vertices <span class="verb">t</span> and
                    <span class="verb">h</span> of a graph, there may or may not
                    be an arc from <span class="verb">t</span> to
                    <span class="verb">h</span>. If this is the case, there is
                    an <span class="verb">Arc</span> object that represents this
                    arc. Note that, since <span class="verb">Digraph</span>s are
                    always simple graphs, there can be at most one such object
                    for every pair of vertices. However, you can store any
                    information you like for an
                    <span class="verb">Arc</span> through a
                    <span class="verb">Storage</span>, see the
                    <span class="verb">Storage</span> class for details. Each
                    <span class="verb">Arc</span> for an edge of the syntactic
                    digraph stores an array called
                    <span class="verb">syntactic_edges</span> of all the
                    multiple edges that are present in the user&rsquo;s input.
                  </p>
                  <p>
                    Unlike vertices, the arc objects of a graph are always local
                    to a graph; an <span class="verb">Arc</span> object can
                    never be part of two digraphs at the same time. For this
                    reason, while for vertices it makes sense to create
                    <span class="verb">Vertex</span> objects independently of
                    any <span class="verb">Digraph</span> objects, it is not
                    possible to instantiate an
                    <span class="verb">Arc</span> directly: only the
                    <span class="verb">Digraph</span> method
                    <span class="verb">connect</span> is allowed to create new
                    <span class="verb">Arc</span> objects and it will return any
                    existing arcs instead of creating new ones, if there is
                    already an arc present between two nodes.
                  </p>
                  <p>
                    The <span class="verb">arcs</span> field of a digraph
                    contains a <span class="verb">LookupTable</span> of all arc
                    objects present in the <span class="verb">Digraph</span>.
                    Although you can access this field normally and use it in
                    <span class="verb">ipairs</span> to iterate over all arcs of
                    a graph, note that this array is actually
                    &ldquo;reconstructed lazily&rdquo; whenever an arc is
                    deleted from the graph. What happens is the following: As
                    long as you just add arcs to a graph, the
                    <span class="verb">arcs</span> array gets updated normally.
                    However, when you remove an arc from a graph, the arc does
                    not get removed from the
                    <span class="verb">arcs</span> array (which would be an
                    expensive operation). Instead, the
                    <span class="verb">arcs</span> array is invalidated
                    (internally set to <span class="verb">nil</span>), allowing
                    us to perform a <span class="verb">disconnect</span> in time
                    \(O(1)\). The <span class="verb">arcs</span> array is then
                    ignored until the next time it is accessed, for instance
                    when a user says <span class="verb">ipairs(g.arcs)</span>.
                    At this point, the <span class="verb">arcs</span> array is
                    reconstructed by adding all arcs of all nodes to it.
                  </p>
                  <p>
                    The bottom line of the behavior of the
                    <span class="verb">arcs</span> field is that (a) the
                    ordering of the elements may change abruptly whenever you
                    remove an arc from a graph and (b) performing \(k\)
                    <span class="verb">disconnect</span> operations in sequence
                    takes time \(O(k)\), provided you do not access the
                    <span class="verb">arcs</span> field between calls.
                  </p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >syntactic_digraph</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    is a reference to the syntactic digraph from which this
                    graph stems ultimately. This may be a cyclic reference to
                    the graph itself.
                  </p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >options</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    If present, it will be a table storing the options set for
                    the syntactic digraph.
                  </p>
                  <p></p>
                </ul>
              </div>
              <p>
                <em>Alphabetical method summary:</em>
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Digraph.new"
                    >function Digraph.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >new</span
                    >
                    (initial)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Digraph:__tostring"
                    >function Digraph:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >__tostring</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Digraph:add"
                    >function Digraph:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >add</span
                    >
                    (array)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Digraph:arc"
                    >function Digraph:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >arc</span
                    >
                    (tail, head)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Digraph:collapse"
                    >function Digraph:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >collapse</span
                    >
                    (collapse_vertices, collapse_vertex, vertex_fun, arc_fun)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Digraph:connect"
                    >function Digraph:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >connect</span
                    >
                    (s, t)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Digraph:contains"
                    >function Digraph:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >contains</span
                    >
                    (v)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Digraph:disconnect"
                    >function Digraph:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >disconnect</span
                    >
                    (v, t)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Digraph:expand"
                    >function Digraph:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >expand</span
                    >
                    (vertex, vertex_fun, arc_fun)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Digraph:incoming"
                    >function Digraph:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >incoming</span
                    >
                    (v)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Digraph:orderIncoming"
                    >function Digraph:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >orderIncoming</span
                    >
                    (v, vertices)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Digraph:orderOutgoing"
                    >function Digraph:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >orderOutgoing</span
                    >
                    (v, vertices)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Digraph:outgoing"
                    >function Digraph:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >outgoing</span
                    >
                    (v)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Digraph:reconnect"
                    >function Digraph:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >reconnect</span
                    >
                    (arc, tail, head)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Digraph:remove"
                    >function Digraph:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >remove</span
                    >
                    (array)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Digraph:sortIncoming"
                    >function Digraph:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >sortIncoming</span
                    >
                    (v, f)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Digraph:sortOutgoing"
                    >function Digraph:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >sortOutgoing</span
                    >
                    (v, f)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Digraph:sync"
                    >function Digraph:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >sync</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Digraph.new"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Digraph.<span class="textcolor" style="color: #bf0000"
                          >new</span
                        ></kbd
                      ><kbd>(initial)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Graphs are created using the
                <span class="verb">new</span> method, which takes a table of
                <span class="verb">initial</span> values as input (like most
                <span class="verb">new</span> methods in the graph drawing
                system). It is permissible that this table of initial values has
                a <span class="verb">vertices</span> field, in which case this
                array will be copied. In contrast, an
                <span class="verb">arcs</span> field in the table will be
                ignored &ndash; newly created graphs always have an empty arcs
                set. This means that writing
                <span class="verb">Digraph.new(g)</span> where
                <span class="verb">g</span> is a graph creates a new graph whose
                vertex set is the same as <span class="verb">g</span>&rsquo;s,
                but where there are no edges:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000">g</span>
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">Digraph</span
                    >.<span class="textcolor" style="color: #000000">new</span>
                    {}<br />
                    <span class="textcolor" style="color: #000000">g:add</span>
                    {<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >v1</span
                    >, <span class="textcolor" style="color: #000000"
                      >v2</span
                    >, <span class="textcolor" style="color: #000000"
                      >v3</span
                    >
                    }<br />
                    <span class="textcolor" style="color: #000000"
                      >g:connect</span
                    >
                    <span class="textcolor" style="color: #800080"
                      >(v1, v2)</span
                    ><br />
                    <br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000">h</span>
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">Digraph</span
                    >.<span class="textcolor" style="color: #000000">new</span>
                    <span class="textcolor" style="color: #800080">(g)</span
                    ><br />
                    <span class="textcolor" style="color: #000000">assert</span>
                    <span class="textcolor" style="color: #800080"
                      >(h:contains(v1)</span
                    >)<br />
                    <span class="textcolor" style="color: #000000">assert</span>
                    <span class="textcolor" style="color: #800080"
                      >(not h:arc(v1, v2)</span
                    >)<br />
                  </code>
                </div>
              </figure>
              <p>
                To completely copy a graph, including all arcs, you have to
                write:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000">h</span>
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">Digraph</span
                    >.<span class="textcolor" style="color: #000000">new</span>
                    <span class="textcolor" style="color: #800080">(g)</span
                    ><br />
                    <span class="textcolor" style="color: #000000">for</span>
                    <span class="textcolor" style="color: #000000">_</span
                    >,<span class="textcolor" style="color: #000000">a</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="library-edges#pgf.in">in</a></span
                    >
                    <span class="textcolor" style="color: #000000">ipairs</span
                    ><span class="textcolor" style="color: #800080"
                      >(g.arcs)</span
                    > <span class="textcolor" style="color: #000000"
                      >do</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >h:connect</span
                    ><span class="textcolor" style="color: #800080"
                      >(a.tail, a.head)</span
                    > <span class="textcolor" style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                  </code>
                </div>
              </figure>
              <p>This operation takes time \(O(1)\).</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>initial</kbd> A table of
                initial values. It is permissible that this array contains a
                <span class="verb">vertices</span> field. In this case, this
                field must be an array and its entries must be nodes, which will
                be inserted. If initial has an
                <span class="verb">arcs</span> field, this field will be
                ignored. The table must contain a field
                <span class="verb">syntactic_digraph</span>, which should
                normally be the syntactic digraph of the graph, but may also be
                the string <span class="verb">"self"</span>, in which case it
                will be set to the newly created (syntactic) digraph.
              </p>
              <p><em>Returns:</em> <em>1.</em> A newly-allocated digraph.</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Digraph:add"></a>
          </p>
          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Digraph:<span class="textcolor" style="color: #bf0000"
                          >add</span
                        ></kbd
                      ><kbd>(array)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Add vertices to a digraph.</p>
              <p>This operation takes time \(O(|\verb !array!|)\).</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>array</kbd> An array of
                to-be-added vertices.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Digraph:remove"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Digraph:<span class="textcolor" style="color: #bf0000"
                          >remove</span
                        ></kbd
                      ><kbd>(array)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Remove vertices from a digraph.</p>
              <p>
                This operation removes an array of vertices from a graph. The
                operation takes time linear in the number of vertices,
                regardless of how many vertices are to be removed. Thus, it will
                be (much) faster to delete many vertices by first compiling them
                in an array and to then delete them using one call to this
                method.
              </p>
              <p>
                This operation takes time \(O(\max \{|\verb !array!|, |\verb
                !self.vertices!|\})\).
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>array</kbd> The
                to-be-removed vertices.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Digraph:contains"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Digraph:<span class="textcolor" style="color: #bf0000"
                          >contains</span
                        ></kbd
                      ><kbd>(v)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Test, whether a graph contains a given vertex.</p>
              <p>This operation takes time \(O(1)\).</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>v</kbd> The vertex to be
                tested.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Digraph:arc"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Digraph:<span class="textcolor" style="color: #bf0000"
                          >arc</span
                        ></kbd
                      ><kbd>(tail, head)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Returns the arc between two nodes, provided it exists.
                Otherwise, <span class="verb">nil</span> is returned.
              </p>
              <p>This operation takes time \(O(1)\).</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>tail</kbd> The tail vertex
                <em>2.</em> <kbd>head</kbd> The head vertex
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> The arc object connecting them
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Digraph:outgoing"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Digraph:<span class="textcolor" style="color: #bf0000"
                          >outgoing</span
                        ></kbd
                      ><kbd>(v)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Returns an array containing the outgoing arcs of a vertex. You
                may only iterate over his array using ipairs, not using pairs.
              </p>
              <p>This operation takes time \(O(1)\).</p>
              <p><em>Parameters:</em> <em>1.</em> <kbd>v</kbd> The vertex</p>
              <p>
                <em>Returns:</em> <em>1.</em> An array of all outgoing arcs of
                this vertex (all arcs whose tail is the vertex)
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Digraph:sortOutgoing"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Digraph:<span class="textcolor" style="color: #bf0000"
                          >sortOutgoing</span
                        ></kbd
                      ><kbd>(v, f)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Sorts the array of outgoing arcs of a vertex. This allows you to
                later iterate over the outgoing arcs in a specific order.
              </p>
              <p>
                This operation takes time \(O(|\verb !outgoing!| \log |\verb
                !outgoings!|)\).
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>v</kbd> The vertex
                <em>2.</em> <kbd>f</kbd> A comparison function that is passed to
                <span class="verb">table.sort</span>
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Digraph:orderOutgoing"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Digraph:<span class="textcolor" style="color: #bf0000"
                          >orderOutgoing</span
                        ></kbd
                      ><kbd>(v, vertices)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Reorders the array of outgoing arcs of a vertex. The parameter
                array <em>must</em> contain the same set of vertices as the
                outgoing array, but possibly in a different order.
              </p>
              <p>
                This operation takes time \(O(|\verb !outgoing!|)\), where
                <span class="verb">outgoing</span> is the array of
                <span class="verb">v</span>&rsquo;s outgoing arcs in
                <span class="verb">self</span>.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>v</kbd> The vertex
                <em>2.</em> <kbd>vertices</kbd> An array containing the outgoing
                vertices in some order.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Digraph:incoming"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Digraph:<span class="textcolor" style="color: #bf0000"
                          >incoming</span
                        ></kbd
                      ><kbd>(v)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>See <span class="verb">outgoing</span>.</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Digraph:sortIncoming"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Digraph:<span class="textcolor" style="color: #bf0000"
                          >sortIncoming</span
                        ></kbd
                      ><kbd>(v, f)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>See <span class="verb">sortOutgoing</span>.</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Digraph:orderIncoming"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Digraph:<span class="textcolor" style="color: #bf0000"
                          >orderIncoming</span
                        ></kbd
                      ><kbd>(v, vertices)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>See <span class="verb">orderOutgoing</span>.</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Digraph:connect"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Digraph:<span class="textcolor" style="color: #bf0000"
                          >connect</span
                        ></kbd
                      ><kbd>(s, t)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Connects two nodes by an arc and returns the newly created arc
                object. If they are already connected, the existing arc is
                returned.
              </p>
              <p>This operation takes time \(O(1)\).</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>s</kbd> The tail vertex
                <em>2.</em> <kbd>t</kbd> The head vertex (may be identical to
                <span class="verb">tail</span> in case of a loop)
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> The arc object connecting them
                (either newly created or already existing)
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Digraph:disconnect"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Digraph:<span class="textcolor" style="color: #bf0000"
                          >disconnect</span
                        ></kbd
                      ><kbd>(v, t)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Disconnect either a single vertex
                <span class="verb">v</span> from all its neighbors (remove all
                incoming and outgoing arcs of this vertex) or, in case two nodes
                are given as parameter, remove the arc between them, if it
                exists.
              </p>
              <p>
                This operation takes time \(O(|I_v| + |I_t|)\), where \(I_x\) is
                the set of vertices incident to \(x\), to remove the single arc
                between \(v\) and \(v\). For a single vertex \(v\), it takes
                time \(O(\sum _{y: \text {there is some arc between $v$ and $y$
                or $y$ and $v$}} |I_y|)\).
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>v</kbd> The single vertex
                or the tail vertex <em>2.</em> <kbd>t</kbd> The head vertex
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Digraph:reconnect"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Digraph:<span class="textcolor" style="color: #bf0000"
                          >reconnect</span
                        ></kbd
                      ><kbd>(arc, tail, head)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                An arc is changed so that instead of connecting
                <span class="verb">self.tail</span> and
                <span class="verb">self.head</span>, it now connects a new
                <span class="verb">head</span> and
                <span class="verb">tail</span>. The difference to first
                disconnecting and then reconnecting is that all fields of the
                arc (other than <span class="verb">head</span> and
                <span class="verb">tail</span>, of course), will be &ldquo;moved
                along&rdquo;. Reconnecting an arc in the same way as before has
                no effect.
              </p>
              <p>
                If there is already an arc at the new position, fields of the
                to-be-reconnected arc overwrite fields of the original arc. This
                is especially dangerous with a syntactic digraph, so do not
                reconnect arcs of the syntactic digraph (which you should not do
                anyway).
              </p>
              <p>
                The <span class="verb">arc</span> object may no longer be valid
                after a reconnect, but the operation returns the new arc object.
              </p>
              <p>
                This operation needs the time of a disconnect (if necessary).
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>arc</kbd> The original arc
                object <em>2.</em> <kbd>tail</kbd> The new tail vertex
                <em>3.</em> <kbd>head</kbd> The new head vertex
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> The new arc object connecting them
                (either newly created or already existing)
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Digraph:collapse"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Digraph:<span class="textcolor" style="color: #bf0000"
                          >collapse</span
                        ></kbd
                      ><kbd
                        >(collapse_vertices, collapse_vertex, vertex_fun,
                        arc_fun)</kbd
                      ></span
                    >
                  </p>
                </li>
              </div>
              <p>Collapse a set of vertices into a single vertex</p>
              <p>
                Often, algorithms will wish to treat a whole set of vertices
                &ldquo;as a single vertex&rdquo;. The idea is that a new vertex
                is then inserted into the graph, and this vertex is connected to
                all vertices to which any of the original vertices used to be
                connected.
              </p>
              <p>
                The <span class="verb">collapse</span> method takes an array of
                to-be-collapsed vertices as well as a vertex. First, it will
                store references to the to-be-collapsed vertices inside the
                vertex. Second, we iterate over all arcs of the to-be-collapsed
                vertices. If this arc connects a to-be-collapsed vertex with a
                not-to-be-collapsed vertex, the not-to-be-collapsed vertex is
                connected to the collapse vertex. Additionally, the arc is
                stored at the vertex.
              </p>
              <p>
                Note that the collapse vertex will be added to the graph if it
                is not already an element. The collapsed vertices will not be
                removed from the graph, so you must remove them yourself, if
                necessary.
              </p>
              <p>
                A collapse vertex will store the collapsed vertices so that you
                can call <span class="verb">expand</span> later on to
                &ldquo;restore&rdquo; the vertices and arcs that were saved
                during a collapse. This storage is <em>not</em> local to the
                graph in which the collapse occurred.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>collapse_vertices</kbd> An
                array of to-be-collapsed vertices <em>2.</em>
                <kbd>collapse_vertex</kbd> The vertex that represents the
                collapse. If missing, a vertex will be created automatically and
                added to the graph. <em>3.</em> <kbd>vertex_fun</kbd> This
                function is called for each to-be-collapsed vertex. The
                parameters are the collapse vertex and the to-be-collapsed
                vertex. May be <span class="verb">nil</span>. <em>4.</em>
                <kbd>arc_fun</kbd> This function is called whenever a new arc is
                added between <span class="verb">rep</span> and some other
                vertex. The arguments are the new arc and the original arc. May
                be <span class="verb">nil</span>.
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> The new vertex that represents the
                collapsed vertices.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Digraph:expand"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Digraph:<span class="textcolor" style="color: #bf0000"
                          >expand</span
                        ></kbd
                      ><kbd>(vertex, vertex_fun, arc_fun)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Expand a previously collapsed vertex.</p>
              <p>
                If you have collapsed a set of vertices in a graph using
                <span class="verb">collapse</span>, you can expand this set once
                more using this method. It will add all vertices that were
                previously removed from the graph and will also reinstall the
                deleted arcs. The collapse vertex is not removed.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>vertex</kbd> A
                to-be-expanded vertex that was previously returned by
                <span class="verb">collapse</span>. <em>2.</em>
                <kbd>vertex_fun</kbd> A function that is called once for each
                reinserted vertex. The parameters are the collapse vertex and
                the reinstalled vertex. May be <span class="verb">nil</span>.
                <em>3.</em> <kbd>arc_fun</kbd> A function that is called once
                for each reinserted arc. The parameter is the arc and the
                <span class="verb">vertex</span>. May be
                <span class="verb">nil</span>.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Digraph:sync"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Digraph:<span class="textcolor" style="color: #bf0000"
                          >sync</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Invokes the <span class="verb">sync</span> method for all arcs
                of the graph.
              </p>
              <p><em>See also:</em> <kbd>Arc:sync()</kbd></p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Digraph:__tostring"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Digraph:<span class="textcolor" style="color: #bf0000"
                          >__tostring</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Computes a string representation of this graph including all
                nodes and edges. The syntax of this representation is such that
                it can be used directly in
                <span class="tikzname">TikZ</span>&rsquo;s
                <span class="verb">graph</span> syntax.
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> <span class="verb">self</span> as
                string.
              </p>
              <p></p>
            </ul>
          </div>
          <h6 id="autosec-4858">
            <span
              ><span class="sectionnumber" id="sec-36.5.2">36.5.2</span>
              Vertices</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.5.2"
              data-pdf-destination="subsubsection.36.5.2"
              data-pdf-page="504"
              href="#sec-36.5.2"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4858"></a>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><b>Lua table</b>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >Vertex</span
                        ></kbd
                      >
                      (declared in <kbd>pgf.gd.model.Vertex</kbd>)</span
                    >
                  </p>
                </li>
              </div>
              <p>
                A <span class="verb">Vertex</span> instance models a node of
                graphs. Each <span class="verb">Vertex</span> object can be an
                element of any number of graphs (whereas an
                <span class="verb">Arc</span> object can only be an element of a
                single graph).
              </p>
              <p>
                When a vertex is added to a digraph <span class="verb">g</span>,
                two tables are created in the vertex&rsquo; storage: An array of
                incoming arcs (with respect to <span class="verb">g</span>) and
                an array of outgoing arcs (again, with respect to
                <span class="verb">g</span>). The fields are managed by the
                <span class="verb">Digraph</span> class and should not be
                modified directly.
              </p>
              <p>
                Note that a <span class="verb">Vertex</span> is an abstraction
                of <span class="tikzname">TikZ</span> nodes; indeed the
                objective is to ensure that, in principle, we can use them
                independently of
                <span class="latexlogofont"
                  ><span class="latexlogo"
                    >T<span class="latexlogosub">e</span>X</span
                  ></span
                >. For this reason, you will not find any references to
                <span class="verb">tex</span> inside a
                <span class="verb">Vertex</span>; this information is only
                available in the syntactic digraph.
              </p>
              <p>
                One important aspect of vertices are its anchors &ndash; a
                concept well familiar for users of
                <span class="tikzname">TikZ</span>, but since we need to
                abstract from <span class="tikzname">TikZ</span>, a separate
                anchor management is available inside the graph drawing system.
                It works as follows:
              </p>
              <p>
                First of all, every vertex has a path, which is a (typically
                closed) line around the vertex. The display system will pass
                down the vertex&rsquo; path to the graph drawing system and this
                path will be stored as a <span class="verb">Path</span> object
                in the <span class="verb">path</span> field of the vertex. This
                path lives in a special &ldquo;local&rdquo; coordinate system,
                that is, all coordinates of this path should actually be
                considered relative to the vertex&rsquo;
                <span class="verb">pos</span>
                field. Note that the path is typically, but not always,
                &ldquo;centered&rdquo; on the origin. A graph drawing algorithm
                should arrange the vertices in such a way that the origins in
                the path coordinate systems are aligned.
              </p>
              <p>
                To illustrate the difference between the origin and the vertex
                center, consider a tree drawing algorithm in which a node
                <span class="verb">root</span> has three children
                <span class="verb">a</span>, <span class="verb">b</span>, and
                <span class="verb">g</span>. Now, if we were to simply center
                these three letters vertically and arrange them in a line, the
                letters would appear to &ldquo;jump up and down&rdquo; since the
                height of the three letters are quite different. A solution is
                to shift the letters (and, thus, the paths of the vertices) in
                such a way that in all three letters the baseline of the letters
                is exactly at the origin. Now, when a graph drawing algorithm
                aligns these vertices along the origins, the letters will all
                have the same baseline.
              </p>
              <p>
                Apart from the origin, there may be other positions in the path
                coordinate system that are of interest &ndash; such as the
                center of the vertex. As mentioned above, this need not be the
                origin and although a graph drawing algorithm should align the
                origins, <em>edges</em> between vertices should head toward
                these vertex centers rather that toward the origins. Other
                points of interest might be the &ldquo;top&rdquo; of the node.
              </p>
              <p>
                All points of special interest are called &ldquo;anchors&rdquo;.
                The <span class="verb">anchor</span> method allows you to
                retrieve them. By default, you always have access to the
                <span class="verb">center</span> anchor, but other anchors may
                or may not be available also, see the
                <span class="verb">anchor</span> method for details.
              </p>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >pos</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    A coordinate object that stores the position where the
                    vertex should be placed on the canvas. The main objective of
                    graph drawing algorithms is to update this coordinate.
                  </p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >name</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    An optional string that is used as a textual representation
                    of the node.
                  </p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >path</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    The path of the vertex&rsquo;s shape. This is a path along
                    the outer line resulting from stroking the vertex&rsquo;s
                    original shape. For instance, if you have a quadratic shape
                    of size 1cm and you stroke the path with a pen of 2mm
                    thickness, this
                    <span class="verb">path</span> field would store a path of a
                    square of edge length 12mm.
                  </p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >anchors</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    A table of anchors (in the TikZ sense). The table is indexed
                    by the anchor names (strings) and the values are
                    <span class="verb">Coordinate</span>s. Currently, it is only
                    guaranteed that the <span class="verb">center</span> anchor
                    is present. Note that the
                    <span class="verb">center</span> anchor need not lie at the
                    origin: A graph drawing system should align nodes relative
                    to the origin of the path&rsquo;s coordinate system.
                    However, lines going to and from the node will head towards
                    the <span class="verb">center</span> anchor. See
                    Section&nbsp;<a href="gd-usage-tikz#section-gd-anchors"
                      >28.8</a
                    >
                    for details.
                  </p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >options</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>A table of options that contains user-defined options.</p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >animations</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    An array of attribute animations for the node. When an
                    algorithm adds entries to this array, the display layer
                    should try to render these. The syntax is as follows: Each
                    element in the array is a table with a field
                    <span class="verb">attribute</span>, which must be a string
                    like <span class="verb">"opacity"</span> or
                    <span class="verb">"translate"</span>, a field
                    <span class="verb">entries</span>, which must be an array to
                    be explained in a moment, and field
                    <span class="verb">options</span>, which must be a table of
                    the same syntax as the
                    <span class="verb">options</span> field. For the
                    <span class="verb">entries</span> array, each element must
                    be table with two field: <span class="verb">t</span> must be
                    set to a number, representing a time in seconds, and
                    <span class="verb">value</span>, which must be set to a
                    value that the <span class="verb">attribute</span> should
                    have at the given time. The entries and the options will
                    then be interpreted as described in
                    <span class="textsc">pgf</span>&rsquo;s basic layer
                    animation system, except that where a
                    <span class="verb">\pgfpoint</span> is expected you provide
                    a <span class="verb">Coordinate</span> and a where a path is
                    expected you provide a <span class="verb">Path</span>.
                  </p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >shape</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    A string describing the shape of the node (like
                    <span class="verb">rectangle</span> or
                    <span class="verb">circle</span>). Note, however, that this
                    is more &ldquo;informative&rdquo;; the actual information
                    that is used by the graph drawing system for determining the
                    extent of a node, its bounding box, convex hull, and line
                    intersections is the <span class="verb">path</span> field.
                  </p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >kind</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    A string describing the kind of the node. For instance, a
                    node of type <span class="verb">"dummy"</span> does not
                    correspond to any real node in the graph but is used by the
                    graph drawing algorithm.
                  </p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >event</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    The <span class="verb">Event</span> when this vertex was
                    created (may be <span class="verb">nil</span> if the vertex
                    is not part of the syntactic digraph).
                  </p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >incomings</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    A table indexed by
                    <span class="verb">Digraph</span> objects. For each digraph,
                    the table entry is an array of all vertices from which there
                    is an <span class="verb">Arc</span> to this vertex. This
                    field is internal and may not only be accessed by the
                    <span class="verb">Digraph</span> class.
                  </p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >outgoings</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    Like <span class="verb">incomings</span>, but for outgoing
                    arcs.
                  </p>
                  <p></p>
                </ul>
              </div>
              <p>
                <em>Alphabetical method summary:</em>
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Vertex.new"
                    >function Vertex.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >new</span
                    >
                    (values)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Vertex:anchor"
                    >function Vertex:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >anchor</span
                    >
                    (anchor)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Vertex:boundingBox"
                    >function Vertex:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >boundingBox</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Vertex.new"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Vertex.<span class="textcolor" style="color: #bf0000"
                          >new</span
                        ></kbd
                      ><kbd>(values)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Create a new vertex. The
                <span class="verb">initial</span> parameter allows you to setup
                some initial values.
              </p>
              <p>
                <em>Usage:</em>
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000">v</span>
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">Vertex</span
                    >.<span class="textcolor" style="color: #000000">new</span>
                    {<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-scopes#pgf.name">name</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">"hello"</span
                    >, <span class="textcolor" style="color: #000000"
                      ><a href="tikz-shapes#pgf.pos">pos</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >Coordinate</span
                    >.<span class="textcolor" style="color: #000000">new</span
                    ><span class="textcolor" style="color: #800080">(1,1)</span
                    ><span class="spaces"> </span>}<br />
                  </code>
                </div>
              </figure>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>initial</kbd> Values to
                override default node settings. The following are permissible:
              </p>
              <dl class="description">
                <p>
                  <span class="listmarker"
                    ><span style="width: 8pt; display: inline-block"
                      ><!----></span
                    ><span class="verb">pos</span></span
                  >
                  Initial position of the node.
                  <span class="listmarker"
                    ><span style="width: 8pt; display: inline-block"
                      ><!----></span
                    ><span class="verb">name</span></span
                  >
                  The name of the node. It is optional to define this.
                  <span class="listmarker"
                    ><span style="width: 8pt; display: inline-block"
                      ><!----></span
                    ><span class="verb">path</span></span
                  >
                  A <span class="verb">Path</span> object representing the
                  vertex&rsquo;s hull.
                  <span class="listmarker"
                    ><span style="width: 8pt; display: inline-block"
                      ><!----></span
                    ><span class="verb">anchors</span></span
                  >
                  A table of anchors.
                  <span class="listmarker"
                    ><span style="width: 8pt; display: inline-block"
                      ><!----></span
                    ><span class="verb">options</span></span
                  >
                  An options table for the vertex.
                  <span class="listmarker"
                    ><span style="width: 8pt; display: inline-block"
                      ><!----></span
                    ><span class="verb">animations</span></span
                  >
                  An array of generated animation attributes.
                  <span class="listmarker"
                    ><span style="width: 8pt; display: inline-block"
                      ><!----></span
                    ><span class="verb">shape</span></span
                  >
                  A string describing the shape. If not given,
                  <span class="verb">"none"</span> is used.
                  <span class="listmarker"
                    ><span style="width: 8pt; display: inline-block"
                      ><!----></span
                    ><span class="verb">kind</span></span
                  >
                  A kind like <span class="verb">"node"</span> or
                  <span class="verb">"dummy"</span>. If not given,
                  <span class="verb">"dummy"</span> is used.
                </p>
              </dl>
              <p><em>Returns:</em> <em>1.</em> A newly allocated node.</p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Vertex:boundingBox"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Vertex:<span class="textcolor" style="color: #bf0000"
                          >boundingBox</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Returns a bounding box of a vertex.</p>
              <p>
                <em>Returns:</em> <em>1.</em>
                <span class="verb">min_x</span> The minimum \(x\) value of the
                bounding box of the path
              </p>
              <p>
                <em>Returns:</em> <em>1.</em>
                <span class="verb">min_y</span> The minimum \(y\) value
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> <span class="verb">max_x</span>
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> <span class="verb">max_y</span>
              </p>
              <p>
                <em>Returns:</em> <em>1.</em>
                <span class="verb">center_x</span> The center of the bounding
                box
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> <span class="verb">center_y</span>
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Vertex:anchor"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Vertex:<span class="textcolor" style="color: #bf0000"
                          >anchor</span
                        ></kbd
                      ><kbd>(anchor)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Returns an anchor position in a vertex. First, we try to look
                the anchor up in the vertex&rsquo;s
                <span class="verb">anchors</span> table. If it is not found
                there, we test whether it is one of the direction strings
                <span class="verb">north</span>,
                <span class="verb">south east</span>, and so on. If so, we
                consider a line from the center of the node to the position on
                the bounding box that corresponds to the given direction (so
                <span class="verb">south east</span> would be the lower right
                corner). We intersect this line with the vertex&rsquo;s path and
                return the result. Finally, if the above fails, we try to
                consider the anchor as a number and return the intersection of a
                line starting at the vertex&rsquo;s center with the number as
                its angle and the path of the vertex.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>anchor</kbd> An anchor as
                detailed above
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> A coordinate in the vertex&rsquo;s
                local coordinate system (so add the
                <span class="verb">pos</span> field to arrive at the actual
                position). If the anchor was not found,
                <span class="verb">nil</span> is returned
              </p>
              <p></p>
            </ul>
          </div>
          <h6 id="autosec-4859">
            <a id="section-gd-arc-model"></a
            ><span
              ><span class="sectionnumber" id="sec-36.5.3">36.5.3</span>
              Arcs</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.5.3"
              data-pdf-destination="subsubsection.36.5.3"
              data-pdf-page="507"
              href="#sec-36.5.3"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4859"></a>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><b>Lua table</b>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >Arc</span
                        ></kbd
                      >
                      (declared in <kbd>pgf.gd.model.Arc</kbd>)</span
                    >
                  </p>
                </li>
              </div>
              <p>
                An arc is a light-weight object representing an arc from a
                vertex in a graph to another vertex. You may not create an
                <span class="verb">Arc</span> by yourself, which is why there is
                no <span class="verb">new</span> method, arc creation is done by
                the Digraph class.
              </p>
              <p>
                Every arc belongs to exactly one graph. If you want the same arc
                in another graph, you need to newly connect two vertices in the
                other graph.
              </p>
              <p>
                You may read the <span class="verb">head</span> and
                <span class="verb">tail</span> fields, but you may not write
                them. In order to store data for an arc, use
                <span class="verb">Storage</span> objects.
              </p>
              <p>
                Between any two vertices of a graph there can be only one arc,
                so all digraphs are always simple graphs. However, in the
                specification of a graph (the syntactic digraph), there might be
                multiple edges between two vertices. This means, in particular,
                that an arc has no <span class="verb">options</span> field.
                Rather, it has several
                <span class="verb">optionsXxxx</span> functions, that will
                search for options in all of the syntactic edges that
                &ldquo;belong&rdquo; to an edge.
              </p>
              <p>
                In order to <em>set</em> options of the edges, you can set the
                <span class="verb">generated_options</span> field of an arc
                (which is <span class="verb">nil</span> by default), see the
                <span class="verb">declare_parameter_sequence</span> function
                for the syntax. Similar to the
                <span class="verb">path</span> field below, the options set in
                this table are written back to the syntactic edges during a
                sync.
              </p>
              <p>
                Finally, there is also an
                <span class="verb">animations</span> field, which, similarly to
                the <span class="verb">generated_options</span>, gets written
                back during a sync when it is not <span class="verb">nil</span>.
              </p>
              <p>
                In detail, the following happens: Even though an arc has a
                <span class="verb">path</span>,
                <span class="verb">generated_options</span>, and
                <span class="verb">animations</span> fields, setting these
                fields does not immediately set the paths of the syntactic edges
                nor does it generate options. Indeed, you will normally want to
                setup and modify the <span class="verb">path</span> field of an
                arc during your algorithm and only at the very end, &ldquo;write
                it back&rdquo; to the multiple syntactic edges underlying the
                graph. For this purpose, the method
                <span class="verb">sync</span> is used, which is called
                automatically for the <span class="verb">ugraph</span> and
                <span class="verb">digraph</span> of a scope as well as for
                spanning trees.
              </p>
              <p>
                The bottom line concerning the
                <span class="verb">path</span> field is the following: If you
                just want a straight line along an arc, just leave the field as
                it is (namely, <span class="verb">nil</span>). If you want to
                have all edges along a path to follow a certain path, set the
                <span class="verb">path</span> field of the arc to the path you
                desire (typically, using the
                <span class="verb">setPolylinePath</span> or a similar method).
                This will cause all syntactic edges underlying the arc to be set
                to the specified path. In the event that you want to set
                different paths for the edges underlying a single arc
                differently, set the <span class="verb">path</span> fields of
                these edges and set the <span class="verb">path</span> field of
                the arc to <span class="verb">nil</span>. This will disable the
                syncing for the arc and will cause the edge
                <span class="verb">paths</span> to remain untouched.
              </p>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >tail</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>The tail vertex of the arc.</p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >head</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    The head vertex of the arc. May be the same as the tail in
                    case of a loop.
                  </p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >path</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    If non-nil, the path of the arc. See the description above.
                  </p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >generated_options</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    If non-nil, some options to be passed back to the original
                    syntactic edges, see the description above.
                  </p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >animations</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    If non-nil, some animations to be passed back to the
                    original syntactic edges. See the description of the
                    <span class="verb">animations</span> field for
                    <span class="verb">Vertex</span> for details on the syntax.
                  </p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >syntactic_edges</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    In case this arc is an arc in the syntactic digraph (and
                    only then), this field contains an array containing
                    syntactic edges (&ldquo;real&rdquo; edges in the syntactic
                    digraph) that underly this arc. Otherwise, the field will be
                    empty or <span class="verb">nil</span>.
                  </p>
                  <p></p>
                </ul>
              </div>
              <p>
                <em>Alphabetical method summary:</em>
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Arc:eventIndex"
                    >function Arc:<span class="textcolor" style="color: #bf0000"
                      >eventIndex</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Arc:headAnchorForArcPath"
                    >function Arc:<span class="textcolor" style="color: #bf0000"
                      >headAnchorForArcPath</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Arc:optionsAccumulated"
                    >function Arc:<span class="textcolor" style="color: #bf0000"
                      >optionsAccumulated</span
                    >
                    (option, accumulator, only_aligned)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Arc:optionsArray"
                    >function Arc:<span class="textcolor" style="color: #bf0000"
                      >optionsArray</span
                    >
                    (option)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Arc:options"
                    >function Arc:<span class="textcolor" style="color: #bf0000"
                      >options</span
                    >
                    (option, only_aligned)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Arc:pointCloud"
                    >function Arc:<span class="textcolor" style="color: #bf0000"
                      >pointCloud</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Arc:setPolylinePath"
                    >function Arc:<span class="textcolor" style="color: #bf0000"
                      >setPolylinePath</span
                    >
                    (coordinates)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Arc:spanPriority"
                    >function Arc:<span class="textcolor" style="color: #bf0000"
                      >spanPriority</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Arc:sync"
                    >function Arc:<span class="textcolor" style="color: #bf0000"
                      >sync</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Arc:syntacticTailAndHead"
                    >function Arc:<span class="textcolor" style="color: #bf0000"
                      >syntacticTailAndHead</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Arc:tailAnchorForArcPath"
                    >function Arc:<span class="textcolor" style="color: #bf0000"
                      >tailAnchorForArcPath</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Arc:optionsArray"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Arc:<span class="textcolor" style="color: #bf0000"
                          >optionsArray</span
                        ></kbd
                      ><kbd>(option)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Get an array of options of the syntactic edges corresponding to
                an arc.
              </p>
              <p>
                An arc in a digraph is typically (but not always) present
                because there are one or more edges in the syntactic digraph
                between the tail and the head of the arc or between the head and
                the tail.
              </p>
              <p>
                Since for every arc there can be several edges present in the
                syntactic digraph, an option like
                <span class="verb">length</span> may have been given multiple
                times for the edges corresponding to the arc.
              </p>
              <p>
                If your algorithm gets confused by multiple edges, try saying
                <span class="verb">a:options(your_option)</span>. This will
                always give the &ldquo;most sensible&rdquo; choice of the option
                if there are multiple edges corresponding to the same arc.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>option</kbd> A string
                option like <span class="verb">"length"</span>.
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> A table with the following
                contents:
              </p>
              <ul class="enumerate" style="list-style-type: none">
                <p>
                  <span class="listmarker">1.</span> It is an array of all
                  values the option has for edges corresponding to
                  <span class="verb">self</span> in the syntactic digraph.
                  Suppose, for instance, you write the following:
                </p>

                <figure class="example">
                  <div class="example-code">
                    <button class="clipboardButton" type="button">copy</button>
                    <code>
                      <br />
                      <span class="textcolor" style="color: #000000"
                        ><a href="tikz-graphs#pgf.graph">graph</a></span
                      >
                      {<br />
                      <span class="spaces">  </span><span
                        class="textcolor"
                        style="color: #000000"
                        >tail</span
                      >
                      <span class="textcolor" style="color: #000000"
                        ><a href="tikz-paths#pgf.--">--</a></span
                      >
                      [<span class="textcolor" style="color: #008000"
                        ><a href="tikz-arrows#pgf.length">length</a></span
                      >=<span class="textcolor" style="color: #008000">1</span
                      >] <span class="textcolor" style="color: #000000"
                        >head</span
                      >,<span class="spaces">  </span><span class="example-code-comment"
                        >% multi edge 1</span
                      ><br />
                      <span class="spaces">  </span><span
                        class="textcolor"
                        style="color: #000000"
                        >tail</span
                      >
                      <span class="textcolor" style="color: #000000"
                        ><a href="tikz-paths#pgf.--">--</a></span
                      >
                      [<span class="textcolor" style="color: #008000"
                        ><a href="tikz-arrows#pgf.length">length</a></span
                      >=<span class="textcolor" style="color: #008000">3</span
                      >] <span class="textcolor" style="color: #000000"
                        >head</span
                      >,<span class="spaces">  </span><span class="example-code-comment"
                        >% mulit edge 2</span
                      ><br />
                      <span class="spaces">  </span><span
                        class="textcolor"
                        style="color: #000000"
                        >head</span
                      >
                      <span class="textcolor" style="color: #000000"
                        ><a href="tikz-paths#pgf.--">--</a></span
                      >
                      [<span class="textcolor" style="color: #008000"
                        ><a href="tikz-arrows#pgf.length">length</a></span
                      >=<span class="textcolor" style="color: #008000">8</span
                      >] <span class="textcolor" style="color: #000000"
                        >tail</span
                      >,<span class="spaces">  </span><span class="example-code-comment"
                        >% multi edge 3</span
                      ><br />
                      <span class="spaces">  </span><span
                        class="textcolor"
                        style="color: #000000"
                        >tail</span
                      >
                      <span class="textcolor" style="color: #000000"
                        ><a href="tikz-paths#pgf.--">--</a></span
                      >
                      <span class="spaces">           </span><span
                        class="textcolor"
                        style="color: #000000"
                        >head</span
                      >,<span class="spaces">  </span><span class="example-code-comment"
                        >% multi edge 4</span
                      ><br />
                      <span class="spaces">  </span><span
                        class="textcolor"
                        style="color: #000000"
                        >head</span
                      >
                      <span class="textcolor" style="color: #000000"
                        ><a href="tikz-paths#pgf.--">--</a></span
                      >
                      [<span class="textcolor" style="color: #008000"
                        ><a href="tikz-arrows#pgf.length">length</a></span
                      >=<span class="textcolor" style="color: #008000">7</span
                      >] <span class="textcolor" style="color: #000000"
                        >tail</span
                      >,<span class="spaces">  </span><span class="example-code-comment"
                        >% multi edge 5</span
                      ><br />
                      <span class="spaces">  </span><span
                        class="textcolor"
                        style="color: #000000"
                        >tail</span
                      >
                      <span class="textcolor" style="color: #000000"
                        ><a href="tikz-paths#pgf.--">--</a></span
                      >
                      [<span class="textcolor" style="color: #008000"
                        ><a href="tikz-arrows#pgf.length">length</a></span
                      >=<span class="textcolor" style="color: #008000">2</span
                      >] <span class="textcolor" style="color: #000000"
                        >head</span
                      >,<span class="spaces">  </span><span class="example-code-comment"
                        >% multi edge 6</span
                      ><br />
                      }<br />
                    </code>
                  </div>
                </figure>
                <p>
                  Suppose, furthermore, that
                  <span class="verb">length</span> has been setup as an edge
                  option. Now suppose that <span class="verb">a</span> is the
                  arc from the vertex <span class="verb">tail</span> to the
                  vertex <span class="verb">head</span>. Calling
                  <span class="verb">a:optionsArray('length')</span> will yield
                  the array part <span class="verb">{1,3,2,8,7}</span>. The
                  reason for the ordering is as follows: First come all values
                  <span class="verb">length</span> had for syntactic edges going
                  from <span class="verb">self.tail</span> to
                  <span class="verb">self.head</span> in the order they appear
                  in the graph description. Then come all values the options has
                  for syntactic edges going from
                  <span class="verb">self.head</span> to
                  <span class="verb">self.tail</span>. The reason for this
                  slightly strange behavior is that many algorithms do not
                  really care whether someone writes
                  <span class="verb">a --[length=1] b</span> or
                  <span class="verb">b --[length=1] a</span>; in both cases they
                  would &ldquo;just&rdquo; like to know that the length
                  is&nbsp;<span class="verb">1</span>.
                </p>
                <p>
                  <span class="listmarker">2.</span> There is field called
                  <span class="verb">aligned</span>, which is an array storing
                  the actual syntactic edge objects whose values can be found in
                  the array part of the returned table. However,
                  <span class="verb">aligned</span> contains only the syntactic
                  edges pointing &ldquo;in the same direction&rdquo; as the arc,
                  that is, the tail and head of the syntactic edge are the same
                  as those of the arc. In the above example, this array would
                  contain the edges with the comment numbers
                  <span class="verb">1</span>, <span class="verb">2</span>, and
                  <span class="verb">6</span>.
                </p>
                <p>
                  Using the length of this array and the fact that the
                  &ldquo;aligned&rdquo; values come first in the table, you can
                  easily iterate over the
                  <span class="verb">option</span>&rsquo;s values of only those
                  edges that are aligned with the arc:
                </p>

                <figure class="example">
                  <div class="example-code">
                    <button class="clipboardButton" type="button">copy</button>
                    <code>
                      <br />
                      <span class="textcolor" style="color: #000000"
                        >local</span
                      >
                      <span class="textcolor" style="color: #000000">a</span>
                      <span class="textcolor" style="color: #000000">=</span>
                      <span class="textcolor" style="color: #000000">g:arc</span
                      ><span class="textcolor" style="color: #800080"
                        >(tail.head)</span
                      ><span class="spaces">   </span><span
                        class="textcolor"
                        style="color: #000000"
                        ><a href="tikz-paths#pgf.--">--</a></span
                      >
                      <span class="textcolor" style="color: #000000"
                        ><a href="dv-axes#pgf.some">some</a></span
                      >
                      <span class="textcolor" style="color: #000000"
                        ><a href="tikz-paths#pgf.arc">arc</a></span
                      ><br />
                      <span class="textcolor" style="color: #000000"
                        >local</span
                      >
                      <span class="textcolor" style="color: #000000">opt</span>
                      <span class="textcolor" style="color: #000000">=</span>
                      <span class="textcolor" style="color: #000000"
                        >a:optionsArray</span
                      ><span class="textcolor" style="color: #800080"
                        >('length')</span
                      ><br />
                      <span class="textcolor" style="color: #000000"
                        >local</span
                      >
                      <span class="textcolor" style="color: #000000">sum</span>
                      <span class="textcolor" style="color: #000000">=</span>
                      <span class="textcolor" style="color: #000000">0</span
                      ><br />
                      <span class="textcolor" style="color: #000000">for</span>
                      <span class="textcolor" style="color: #000000">i=1</span
                      >,<span class="textcolor" style="color: #000000"
                        >#opt</span
                      >.<span class="textcolor" style="color: #000000"
                        >aligned</span
                      >
                      <span class="textcolor" style="color: #000000">do</span
                      ><br />
                      <span class="spaces">  </span><span
                        class="textcolor"
                        style="color: #000000"
                        >sum</span
                      >
                      <span class="textcolor" style="color: #000000">=</span>
                      <span class="textcolor" style="color: #000000">sum</span>
                      <span class="textcolor" style="color: #000000">+</span>
                      <span class="textcolor" style="color: #000000">opt</span
                      >[<span class="textcolor" style="color: #008000">i</span
                      >]<br />
                      <span class="textcolor" style="color: #000000"
                        ><a href="base-animations#pgf.end">end</a></span
                      ><br />
                    </code>
                  </div>
                </figure>
                <p>
                  <span class="listmarker">3.</span> There is a field called
                  <span class="verb">anti_aligned</span>, which is an array
                  containing exactly the edges in the array part of the table
                  not aligned with the arc. The numbering start at
                  <span class="verb">1</span> as usual, so the \(i\)th entry of
                  this table corresponds to the entry at position \(i + \verb
                  !#opt.aligned!\) of the table.
                </p>
              </ul>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Arc:options"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Arc:<span class="textcolor" style="color: #bf0000"
                          >options</span
                        ></kbd
                      ><kbd>(option, only_aligned)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Returns the first option, that is, the first entry of
                <span class="verb">Arc:optionsArray(option)</span>. However, if
                the <span class="verb">only_aligned</span> parameter is set to
                true and there is no option with any aligned syntactic edge,
                <span class="verb">nil</span> is returned.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>option</kbd> An option
                <em>2.</em> <kbd>only_aligned</kbd> If true, only aligned
                syntactic edges will be considered.
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> The first entry of the
                <span class="verb">optionsArray</span>
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Arc:optionsAccumulated"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Arc:<span class="textcolor" style="color: #bf0000"
                          >optionsAccumulated</span
                        ></kbd
                      ><kbd>(option, accumulator, only_aligned)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Get an accumulated value of an option of the syntactic edges
                corresponding to an arc.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>option</kbd> The option of
                interest <em>2.</em> <kbd>accumulator</kbd> A function taking
                two values. When there are more than one syntactic edges
                corresponding to <span class="verb">self</span> for which the
                <span class="verb">option</span> is set, this function will be
                called repeatedly for the different values. The first time it
                will be called for the first two values. Next, it will be called
                for the result of this call and the third value, and so on.
                <em>3.</em> <kbd>only_aligned</kbd> A boolean. If true, only the
                aligned syntactic edges will be considered.
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> If the option is not set for any
                (aligned) syntactic edges corresponding to
                <span class="verb">self</span>, <span class="verb">nil</span> is
                returned. If there is exactly one edge, the value of this edge
                is returned. Otherwise, the result of repeatedly applying the
                <span class="verb">accumulator</span> function as described
                above.
              </p>
              <p>
                The result is cached, repeated calls will not invoke the
                <span class="verb">accumulator</span> function again.
              </p>
              <p><em>Usage:</em> Here is typical usage:</p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000"
                      >total_length</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >a:optionsAccumulated</span
                    ><span class="textcolor" style="color: #800080"
                      >('length', function (a,b)</span
                    > <span class="textcolor" style="color: #000000"
                      >return</span
                    >
                    <span class="textcolor" style="color: #000000">a+b</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    >)<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="pgfkeys#pgf.or">or</a></span
                    >
                    <span class="textcolor" style="color: #000000">0</span
                    ><br />
                  </code>
                </div>
              </figure>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Arc:syntacticTailAndHead"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Arc:<span class="textcolor" style="color: #bf0000"
                          >syntacticTailAndHead</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Compute the syntactic head and tail of an arc. For this, we have
                a look at the syntactic digraph underlying the arc. If there is
                at least once syntactic edge going from the arc&rsquo;s tail to
                the arc&rsquo;s head, the arc&rsquo;s tail and head are
                returned. Otherwise, we test whether there is a syntactic edge
                in the other direction and, if so, return head and tail in
                reverse order. Finally, if there is no syntactic edge at all
                corresponding to the arc in either direction,
                <span class="verb">nil</span> is returned.
              </p>
              <p><em>Returns:</em> <em>1.</em> The syntactic tail</p>
              <p><em>Returns:</em> <em>1.</em> The syntactic head</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Arc:pointCloud"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Arc:<span class="textcolor" style="color: #bf0000"
                          >pointCloud</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Compute the point cloud.</p>
              <p>
                <em>Returns:</em> <em>1.</em> This method will return the
                &ldquo;point cloud&rdquo; of an arc, which is an array of all
                points that must be rotated and shifted along with the endpoints
                of an edge.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Arc:eventIndex"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Arc:<span class="textcolor" style="color: #bf0000"
                          >eventIndex</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Compute an event index for the arc.</p>
              <p>
                <em>Returns:</em> <em>1.</em> The lowest event index of any edge
                involved in the arc (or nil, if there is no syntactic edge).
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Arc:spanPriority"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Arc:<span class="textcolor" style="color: #bf0000"
                          >spanPriority</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>The span collector</p>
              <p>
                This method returns the top (that is, smallest) priority of any
                edge involved in the arc.
              </p>
              <p>The priority of an edge is computed as follows:</p>
              <ul class="enumerate" style="list-style-type: none">
                <li>
                  <p>
                    <span class="listmarker">1.</span> If the option
                    <span class="verb">"span priority"</span> is set, this
                    number will be used.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">2.</span> If the edge has the same
                    head as the arc, we lookup the key<br />
                    <span class="verb">"span priority " .. edge.direction</span
                    >. If set, we use this value.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">3.</span> If the edge has a
                    different head from the arc (the arc is
                    &ldquo;reversed&rdquo; with respect to the syntactic edge),
                    we lookup the key
                    <span class="verb"
                      >"span priority reversed " .. edge.direction</span
                    >. If set, we use this value.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">4.</span> Otherwise, we use
                    priority 5.
                  </p>
                </li>
              </ul>
              <p>
                <em>Returns:</em> <em>1.</em> The priority of the arc, as
                described above.
              </p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Arc:sync"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Arc:<span class="textcolor" style="color: #bf0000"
                          >sync</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Sync an <span class="verb">Arc</span> with its syntactic edges
                with respect to the path and generated options. It causes the
                following to happen: If the <span class="verb">path</span> field
                of the arc is <span class="verb">nil</span>, nothing happens
                with respect to the path. Otherwise, a copy of the
                <span class="verb">path</span> is created. However, for every
                path element that is a function, this function is invoked with
                the syntactic edge as its parameter. The result of this call
                should now be a <span class="verb">Coordinate</span>, which will
                replace the function in the <span class="verb">Path</span>.
              </p>
              <p>You use this method like this:</p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    ...<br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.arc">arc</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >g:connect</span
                    ><span class="textcolor" style="color: #800080">(s,t)</span
                    ><br />
                    <span class="textcolor" style="color: #000000"
                      >arc:setPolylinePath</span
                    >
                    {<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >Coordinate</span
                    >.<span class="textcolor" style="color: #000000">new</span
                    ><span class="textcolor" style="color: #800080">(x,y)</span
                    >, <span class="textcolor" style="color: #000000"
                      >Coordinate</span
                    >.<span class="textcolor" style="color: #000000">new</span
                    ><span class="textcolor" style="color: #800080"
                      >(x1,y1)</span
                    ><span class="spaces"> </span>}<br />
                    ...<br />
                    <span class="textcolor" style="color: #000000"
                      >arc:sync</span
                    ><span class="textcolor" style="color: #800080">()</span
                    ><br />
                  </code>
                </div>
              </figure>
              <p>
                Next, similar to the path, the field
                <span class="verb">generated_options</span> is considered. If it
                is not <span class="verb">nil</span>, then all options listed in
                this field are appended to all syntactic edges underlying the
                arc.
              </p>
              <p>
                Note that this function will automatically be called for all
                arcs of the <span class="verb">ugraph</span>, the
                <span class="verb">digraph</span>, and the
                <span class="verb">spanning_tree</span> of an algorithm by the
                rendering pipeline.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Arc:tailAnchorForArcPath"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Arc:<span class="textcolor" style="color: #bf0000"
                          >tailAnchorForArcPath</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                This method returns a &ldquo;coordinate factory&rdquo; that can
                be used as the coordinate of a
                <span class="verb">moveto</span> at the beginning of a path
                starting at the <span class="verb">tail</span> of the arc.
                Suppose you want to create a path starting at the tail vertex,
                going to the coordinate \((10,10)\) and ending at the head
                vertex. The trouble is that when you create the path
                corresponding to this route, you typically do not know where the
                tail vertex is going to be. Even if that <em>has</em> already
                been settled, you will still have the problem that different
                edges underlying the arc may wish to start their paths at
                different anchors inside the tail vertex. In such cases, you use
                this method to get a function that will, later on, compute the
                correct position of the anchor as needed.
              </p>
              <p>
                Here is the code you would use to create the above-mentioned
                path:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000">a</span>
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >g:connect</span
                    ><span class="textcolor" style="color: #800080"
                      >(tail,head)</span
                    ><br />
                    ...<br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.arc">arc</a></span
                    >.<span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.path">path</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">Path</span
                    >.<span class="textcolor" style="color: #000000">new</span
                    ><span class="textcolor" style="color: #800080">()</span
                    ><br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.arc">arc</a></span
                    >.<span class="textcolor" style="color: #000000"
                      >path:appendMoveto</span
                    ><span class="textcolor" style="color: #800080"
                      >(<a href="tikz-paths#pgf.arc">arc</a
                      >:tailAnchorForArcPath()</span
                    >)<br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.arc">arc</a></span
                    >.<span class="textcolor" style="color: #000000"
                      >path:appendLineto</span
                    ><span class="textcolor" style="color: #800080"
                      >(10, 10)</span
                    ><br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.arc">arc</a></span
                    >.<span class="textcolor" style="color: #000000"
                      >path:appendLineto</span
                    ><span class="textcolor" style="color: #800080"
                      >(<a href="tikz-paths#pgf.arc">arc</a
                      >:headAnchorForArcPath()</span
                    >)<br />
                  </code>
                </div>
              </figure>
              <p>
                Normally, however, you will not write code as detailed as the
                above and you would just write instead of the last three lines:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000"
                      >arc:setPolylinePath</span
                    >
                    {<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >Coordinate</span
                    >.<span class="textcolor" style="color: #000000">new</span>
                    <span class="textcolor" style="color: #800080"
                      >(10, 10)</span
                    ><span class="spaces"> </span>}<br />
                  </code>
                </div>
              </figure>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Arc:headAnchorForArcPath"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Arc:<span class="textcolor" style="color: #bf0000"
                          >headAnchorForArcPath</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>See <span class="verb">Arc:tailAnchorForArcPath</span>.</p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Arc:setPolylinePath"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Arc:<span class="textcolor" style="color: #bf0000"
                          >setPolylinePath</span
                        ></kbd
                      ><kbd>(coordinates)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Setup the <span class="verb">path</span> field of an arc in such
                a way that it corresponds to a sequence of straight line
                segments starting at the tail&rsquo;s anchor and ending at the
                head&rsquo;s anchor.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>coordinates</kbd> An array
                of <span class="verb">Coordinates</span> through which the line
                will go through.
              </p>
              <p></p>
            </ul>
          </div>
          <h6 id="autosec-4861">
            <span
              ><span class="sectionnumber" id="sec-36.5.4">36.5.4</span>
              Edges</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.5.4"
              data-pdf-destination="subsubsection.36.5.4"
              data-pdf-page="511"
              href="#sec-36.5.4"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4861"></a>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><b>Lua table</b>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >Edge</span
                        ></kbd
                      >
                      (declared in <kbd>pgf.gd.model.Edge</kbd>)</span
                    >
                  </p>
                </li>
              </div>
              <p>
                An <span class="verb">Edge</span> is a &ldquo;syntactic&rdquo;
                connection between two vertices that represents a connection
                present in the syntactic digraph. Unlike an
                <span class="verb">Arc</span>,
                <span class="verb">Edge</span> objects are not controlled by the
                <span class="verb">Digraph</span> class. Also unlike
                <span class="verb">Arc</span> objects, there can be several
                edges between the same vertices, namely whenever several such
                edges are present in the syntactic digraph.
              </p>
              <p>
                In detail, the relationship between arcs and edges is as
                follows: If there is an <span class="verb">Edge</span> between
                two vertices \(u\) and \(v\) in the syntactic digraph, there
                will be an <span class="verb">Arc</span> from \(u\) to \(v\) and
                the array <span class="verb">syntactic_edges</span> of this
                <span class="verb">Arc</span> object will contain the
                <span class="verb">Edge</span> object. In particular, if there
                are several edges between the same vertices, all of these edges
                will be part of the array in a single
                <span class="verb">Arc</span> object.
              </p>
              <p>
                Edges, like arcs, are always directed from a
                <span class="verb">tail</span> vertex to a
                <span class="verb">head</span> vertex; this is true even for
                undirected vertices. The <span class="verb">tail</span> vertex
                will always be the vertex that came first in the syntactic
                specification of the edge, the
                <span class="verb">head</span> vertex is the second one. Whether
                an edge is directed or not depends on the
                <span class="verb">direction</span> of the edge, which may be
                one of the following:
              </p>
              <ul class="enumerate" style="list-style-type: none">
                <li>
                  <p>
                    <span class="listmarker">1.</span>
                    <span class="verb">"-&gt;"</span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">2.</span>
                    <span class="verb">"--"</span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">3.</span>
                    <span class="verb">"&lt;-"</span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">4.</span>
                    <span class="verb">"&lt;-&gt;"</span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">5.</span>
                    <span class="verb">"-!-"</span>
                  </p>
                </li>
              </ul>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >head</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>The head vertex of this edge.</p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >tail</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>The tail vertex of this edge.</p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >event</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    The creation <span class="verb">Event</span> of this edge.
                  </p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >options</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>A table of options that contains user-defined options.</p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >direction</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>One of the directions named above.</p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >path</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    A <span class="verb">Path</span> object that describes the
                    path of the edge. The path&rsquo;s coordinates are
                    interpreted <em>absolutely</em>.
                  </p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >generated_options</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    This is an options array that is generated by the algorithm.
                    When the edge is rendered later on, this array will be
                    passed back to the display layer. The syntax is the same as
                    for the
                    <span class="verb">declare_parameter_sequence</span>
                    function, see
                    <span class="verb">InterfaceToAlgorithms</span>.
                  </p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >animations</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    An array of animations, see the
                    <span class="verb">animations</span> field of the
                    <span class="verb">Vertex</span> class for the syntax.
                  </p>
                </ul>
              </div>
              <p>
                <em>Alphabetical method summary:</em>
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Edge.new"
                    >function Edge.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >new</span
                    >
                    (values)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a
                    href="gd-algorithm-layer#pgf/lua/Edge:headAnchorForEdgePath"
                    >function Edge:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >headAnchorForEdgePath</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Edge:setPolylinePath"
                    >function Edge:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >setPolylinePath</span
                    >
                    (coordinates)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a
                    href="gd-algorithm-layer#pgf/lua/Edge:tailAnchorForEdgePath"
                    >function Edge:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >tailAnchorForEdgePath</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Edge.new"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Edge.<span class="textcolor" style="color: #bf0000"
                          >new</span
                        ></kbd
                      ><kbd>(values)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Create a new edge. The
                <span class="verb">initial</span> parameter allows you to setup
                some initial values.
              </p>
              <p>
                <em>Usage:</em>
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000">v</span>
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">Edge</span
                    >.<span class="textcolor" style="color: #000000">new</span>
                    {<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >tail</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">v1</span
                    >, <span class="textcolor" style="color: #000000"
                      >head</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">v2</span>
                    }<br />
                  </code>
                </div>
              </figure>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>initial</kbd> Values to
                override defaults. &ndash;
              </p>
              <p><em>Returns:</em> <em>1.</em> A new edge object.</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Edge:tailAnchorForEdgePath"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Edge:<span class="textcolor" style="color: #bf0000"
                          >tailAnchorForEdgePath</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                This method returns a &ldquo;coordinate factory&rdquo; that can
                be used as the coordinate of a
                <span class="verb">moveto</span> at the beginning of a path
                starting at the <span class="verb">tail</span> of the arc.
                Suppose you want to create a path starting at the tail vertex,
                going to the coordinate \((10,10)\) and ending at the head
                vertex. The trouble is that when you create the path
                corresponding to this route, you typically do not know where the
                tail vertex is going to be. In this case, you use this method to
                get a function that will, later on, compute the correct position
                of the anchor as needed.
              </p>
              <p>
                Note that you typically do not use this function, but use the
                corresponding function of the
                <span class="verb">Arc</span> class. Use this function only if
                there are multiple edges between two vertices that need to be
                routed differently.
              </p>
              <p>
                Here is the code you would use to create the above-mentioned
                path:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000">a</span>
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >g:connect</span
                    ><span class="textcolor" style="color: #800080"
                      >(tail,head)</span
                    ><br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000">e</span>
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">a</span
                    >.<span class="textcolor" style="color: #000000"
                      >syntactic_edges</span
                    >[<span class="textcolor" style="color: #008000">1</span
                    >]<br />
                    ...<br />
                    <span class="textcolor" style="color: #000000">e</span
                    >.<span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.path">path</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">Path</span
                    >.<span class="textcolor" style="color: #000000">new</span
                    ><span class="textcolor" style="color: #800080">()</span
                    ><br />
                    <span class="textcolor" style="color: #000000">e</span
                    >.<span class="textcolor" style="color: #000000"
                      >path:appendMoveto</span
                    ><span class="textcolor" style="color: #800080"
                      >(e:tailAnchorForEdgePath()</span
                    >)<br />
                    <span class="textcolor" style="color: #000000">e</span
                    >.<span class="textcolor" style="color: #000000"
                      >path:appendLineto</span
                    ><span class="textcolor" style="color: #800080"
                      >(10, 10)</span
                    ><br />
                    <span class="textcolor" style="color: #000000">e</span
                    >.<span class="textcolor" style="color: #000000"
                      >path:appendLineto</span
                    ><span class="textcolor" style="color: #800080"
                      >(e:headAnchorForEdgePath()</span
                    >)<br />
                  </code>
                </div>
              </figure>
              <p>
                As for the <span class="verb">Arc</span> class, you can also
                setup a polyline more easily:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000"
                      >e:setPolylinePath</span
                    >
                    {<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >Coordinate</span
                    >.<span class="textcolor" style="color: #000000">new</span>
                    <span class="textcolor" style="color: #800080"
                      >(10, 10)</span
                    ><span class="spaces"> </span>}<br />
                  </code>
                </div>
              </figure>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Edge:headAnchorForEdgePath"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Edge:<span class="textcolor" style="color: #bf0000"
                          >headAnchorForEdgePath</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>See <span class="verb">Arc:tailAnchorForArcPath</span>.</p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Edge:setPolylinePath"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Edge:<span class="textcolor" style="color: #bf0000"
                          >setPolylinePath</span
                        ></kbd
                      ><kbd>(coordinates)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Setup the <span class="verb">path</span> field of an edge in
                such a way that it corresponds to a sequence of straight line
                segments starting at the tail&rsquo;s anchor and ending at the
                head&rsquo;s anchor.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>coordinates</kbd> An array
                of <span class="verb">Coordinates</span> through which the line
                will go through.
              </p>
              <p></p>
            </ul>
          </div>
          <h6 id="autosec-4862">
            <span
              ><span class="sectionnumber" id="sec-36.5.5">36.5.5</span>
              Collections</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.5.5"
              data-pdf-destination="subsubsection.36.5.5"
              data-pdf-page="512"
              href="#sec-36.5.5"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4862"></a>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><b>Lua table</b>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >Collection</span
                        ></kbd
                      >
                      (declared in <kbd>pgf.gd.model.Collection</kbd>)</span
                    >
                  </p>
                </li>
              </div>
              <p>
                A collection is essentially a subgraph of a graph, that is, a
                &ldquo;collection&rdquo; of some nodes and some edges of the
                graph. The name &ldquo;collection&rdquo; was chosen over
                &ldquo;subgraph&rdquo; since the latter are often thought of as
                parts of a graph that are rendered in a special way (such as
                being surrounded by a rectangle), while collections are used to
                model such diverse things as hyperedges, sets of vertices that
                should be on the same level in a layered algorithm, or, indeed,
                subgraphs that are rendered in a special way.
              </p>
              <p>
                Collections are grouped into &ldquo;kinds&rdquo;. All
                collections of a given kind can be accessed by algorithms
                through an array whose elements are the collections. On the
                display layer, for each kind a separate key is available to
                indicate that a node or an edge belongs to a collection.
              </p>
              <p>
                Collections serve two purposes: First, they can be seen as
                &ldquo;hints&rdquo; to graph drawing algorithms that certain
                nodes and/or edges &ldquo;belong together&rdquo;. For instance,
                collections of kind <span class="verb">same layer</span> are
                used by the Sugiyama algorithm to group together nodes that
                should appear at the same height of the output. Second, since
                collections are also passed back to the display layer in a
                postprocessing step, they can be used to render complicated
                concepts such as hyperedges (which are just collections of
                nodes, after all) or subgraphs.
              </p>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >kind</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>The &ldquo;kind&rdquo; of the collection.</p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >vertices</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    A lookup table of vertices (that is, both an array with the
                    vertices in the order in which they appear as well as a
                    table such that
                    <span class="verb">vertices[vertex] == true</span> whenever
                    <span class="verb">vertex</span> is present in the table.
                  </p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >edges</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>A lookup table of edges (not arcs!).</p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >options</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    An options table. This is the table of options that was in
                    force when the collection was created.
                  </p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >child_collections</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    An array of all collections that are direct children of this
                    collection (that is, they were defined while the current
                    collection was the most recently defined collection on the
                    options stack). However, you should use the methods
                    <span class="verb">children</span>,
                    <span class="verb">descendants</span>, and so to access this
                    field.
                  </p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >parent_collection</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    The parent collection of the current collection. This field
                    may be <span class="verb">nil</span> in case a collection
                    has no parent.
                  </p>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >event</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    An <span class="verb">Event</span> object that was create
                    for this collection. Its <span class="verb">kind</span> will
                    be <span class="verb">"collection"</span> while its
                    <span class="verb">parameter</span> will be the collection
                    kind.
                  </p>
                </ul>
              </div>
              <p>
                <em>Alphabetical method summary:</em>
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Collection.new"
                    >function Collection.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >new</span
                    >
                    (t)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a
                    href="gd-algorithm-layer#pgf/lua/Collection:childrenOfKind"
                    >function Collection:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >childrenOfKind</span
                    >
                    (kind)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Collection:children"
                    >function Collection:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >children</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a
                    href="gd-algorithm-layer#pgf/lua/Collection:descendantsOfKind"
                    >function Collection:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >descendantsOfKind</span
                    >
                    (kind)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Collection:descendants"
                    >function Collection:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >descendants</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Collection.new"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Collection.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >new</span
                        ></kbd
                      ><kbd>(t)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Creates a new collection. You should not call this function
                directly, it is called by the interface classes.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>t</kbd> A table of initial
                values. The field <span class="verb">t.kind</span> must be a
                nonempty string.
              </p>
              <p><em>Returns:</em> <em>1.</em> The new collection</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Collection:children"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Collection:<span
                          class="textcolor"
                          style="color: #bf0000"
                          >children</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                A collection can have any number of <em>child collections</em>,
                which are collections nested inside the collection. You can
                access the array of these children through this method. You may
                not modify the array returned by this function.
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> The array of children of
                <span class="verb">self</span>.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Collection:childrenOfKind"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Collection:<span
                          class="textcolor"
                          style="color: #bf0000"
                          >childrenOfKind</span
                        ></kbd
                      ><kbd>(kind)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                This method works like the
                <span class="verb">children</span> method. However, the tree of
                collections is, conceptually, contracted by considering only
                these collections that have the
                <span class="verb">kind</span> given as parameter. For instance,
                if <span class="verb">self</span> has a child collection of a
                kind different from <span class="verb">kind</span>, but this
                child collection has, in turn, a child collection of kind
                <span class="verb">kind</span>, this latter child collection
                will be included in the array &ndash; but not any of its child
                collections.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>kind</kbd> The collection
                kind to which the tree of collections should be restricted.
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> The array of children of
                <span class="verb">self</span> in this contracted tree.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Collection:descendants"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Collection:<span
                          class="textcolor"
                          style="color: #bf0000"
                          >descendants</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                The descendants of a collection are its children, plus their
                children, plus their children, and so on.
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> An array of all descendants of
                <span class="verb">self</span>. It will be in preorder.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Collection:descendantsOfKind"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Collection:<span
                          class="textcolor"
                          style="color: #bf0000"
                          >descendantsOfKind</span
                        ></kbd
                      ><kbd>(kind)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                The descendants of a collection of the given
                <span class="verb">kind</span>.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>kind</kbd> A collection
                kind.
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> An array of all descendants of
                <span class="verb">self</span> of the given
                <span class="verb">kind</span>.
              </p>
              <p></p>
            </ul>
          </div>
          <h6 id="autosec-4863">
            <span
              ><span class="sectionnumber" id="sec-36.5.6">36.5.6</span>
              Coordinates, Paths, and Transformations</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.5.6"
              data-pdf-destination="subsubsection.36.5.6"
              data-pdf-page="514"
              href="#sec-36.5.6"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4863"></a>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><b>Lua table</b>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >Coordinate</span
                        ></kbd
                      >
                      (declared in <kbd>pgf.gd.model.Coordinate</kbd>)</span
                    >
                  </p>
                </li>
              </div>
              <p>A Coordinate models a position on the drawing canvas.</p>
              <p>
                It has an <span class="verb">x</span> field and a
                <span class="verb">y</span> field, which are numbers that will
                be interpreted as
                <span class="latexlogofont"
                  ><span class="latexlogo"
                    >T<span class="latexlogosub">e</span>X</span
                  ></span
                >
                points (1/72.27th of an inch). The \(x\)-axis goes right and the
                \(y\)-axis goes up.
              </p>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >x</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p></p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >y</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    There is also a static field called
                    <span class="verb">origin</span> that is always equal to the
                    origin.
                  </p>
                </ul>
              </div>
              <p>
                <em>Alphabetical method summary:</em>
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Coordinate.__add"
                    >function Coordinate.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >__add</span
                    >
                    (a,b)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Coordinate.__div"
                    >function Coordinate.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >__div</span
                    >
                    (a,b)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Coordinate.__mul"
                    >function Coordinate.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >__mul</span
                    >
                    (a,b)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Coordinate.__sub"
                    >function Coordinate.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >__sub</span
                    >
                    (a,b)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Coordinate.__unm"
                    >function Coordinate.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >__unm</span
                    >
                    (a)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Coordinate.boundingBox"
                    >function Coordinate.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >boundingBox</span
                    >
                    (array)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Coordinate.new"
                    >function Coordinate.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >new</span
                    >
                    (x,y)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Coordinate:apply"
                    >function Coordinate:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >apply</span
                    >
                    (t)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Coordinate:clone"
                    >function Coordinate:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >clone</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Coordinate:moveTowards"
                    >function Coordinate:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >moveTowards</span
                    >
                    (c,f)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Coordinate:normalized"
                    >function Coordinate:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >normalized</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Coordinate:normalize"
                    >function Coordinate:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >normalize</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Coordinate:norm"
                    >function Coordinate:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >norm</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Coordinate:scale"
                    >function Coordinate:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >scale</span
                    >
                    (s)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a
                    href="gd-algorithm-layer#pgf/lua/Coordinate:shiftByCoordinate"
                    >function Coordinate:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >shiftByCoordinate</span
                    >
                    (c)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Coordinate:shift"
                    >function Coordinate:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >shift</span
                    >
                    (a,b)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a
                    href="gd-algorithm-layer#pgf/lua/Coordinate:unshiftByCoordinate"
                    >function Coordinate:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >unshiftByCoordinate</span
                    >
                    (c)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Coordinate:unshift"
                    >function Coordinate:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >unshift</span
                    >
                    (a,b)</a
                  ></kbd
                >
              </p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Coordinate.new"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Coordinate.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >new</span
                        ></kbd
                      ><kbd>(x,y)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Creates a new coordinate.</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>x</kbd> The \(x\) value
                <em>2.</em> <kbd>y</kbd> The \(y\) value
              </p>
              <p><em>Returns:</em> <em>1.</em> A coordinate</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Coordinate:clone"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Coordinate:<span
                          class="textcolor"
                          style="color: #bf0000"
                          >clone</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Creates a new coordinate that is a copy of an existing one.</p>
              <p>
                <em>Returns:</em> <em>1.</em> A new coordinate at the same
                location as <span class="verb">self</span>
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Coordinate:apply"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Coordinate:<span
                          class="textcolor"
                          style="color: #bf0000"
                          >apply</span
                        ></kbd
                      ><kbd>(t)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Apply a transformation matrix to a coordinate, see
                <span class="verb">pgf.gd.lib.Transform</span> for details.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>t</kbd> A transformation.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Coordinate:shift"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Coordinate:<span
                          class="textcolor"
                          style="color: #bf0000"
                          >shift</span
                        ></kbd
                      ><kbd>(a,b)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Shift a coordinate</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>a</kbd> An \(x\) offset
                <em>2.</em> <kbd>b</kbd> A \(y\) offset
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Coordinate:unshift"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Coordinate:<span
                          class="textcolor"
                          style="color: #bf0000"
                          >unshift</span
                        ></kbd
                      ><kbd>(a,b)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                &ldquo;Unshift&rdquo; a coordinate (which is the same as
                shifting by the inversed coordinate; only faster).
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>a</kbd> An \(x\) offset
                <em>2.</em> <kbd>b</kbd> A \(y\) offset
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Coordinate:shiftByCoordinate"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Coordinate:<span
                          class="textcolor"
                          style="color: #bf0000"
                          >shiftByCoordinate</span
                        ></kbd
                      ><kbd>(c)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Like <span class="verb">shift</span>, only for coordinate
                parameters.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>c</kbd> Another
                coordinate. The \(x\)- and \(y\)-values of
                <span class="verb">self</span> are increased by the \(x\)- and
                \(y\)-values of this coordinate.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Coordinate:unshiftByCoordinate"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Coordinate:<span
                          class="textcolor"
                          style="color: #bf0000"
                          >unshiftByCoordinate</span
                        ></kbd
                      ><kbd>(c)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Like <span class="verb">unshift</span>, only for coordinate
                parameters.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>c</kbd> Another
                coordinate.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Coordinate:moveTowards"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Coordinate:<span
                          class="textcolor"
                          style="color: #bf0000"
                          >moveTowards</span
                        ></kbd
                      ><kbd>(c,f)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Moves the coordinate a fraction of
                <span class="verb">f</span> along a straight line to
                <span class="verb">c</span>.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>c</kbd> Another coordinate
                <em>2.</em> <kbd>f</kbd> A fraction
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Coordinate:scale"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Coordinate:<span
                          class="textcolor"
                          style="color: #bf0000"
                          >scale</span
                        ></kbd
                      ><kbd>(s)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Scale a coordinate by a factor</p>
              <p><em>Parameters:</em> <em>1.</em> <kbd>s</kbd> A factor.</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Coordinate.__add"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Coordinate.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >__add</span
                        ></kbd
                      ><kbd>(a,b)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Add two coordinates, yielding a new coordinate. Note that it
                will be a lot faster to call shift, whenever this is possible.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>a</kbd> A coordinate
                <em>2.</em> <kbd>b</kbd> A coordinate
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Coordinate.__sub"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Coordinate.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >__sub</span
                        ></kbd
                      ><kbd>(a,b)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Subtract two coordinates, yielding a new coordinate. Note that
                it will be a lot faster to call unshift, whenever this is
                possible.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>a</kbd> A coordinate
                <em>2.</em> <kbd>b</kbd> A coordinate
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Coordinate.__unm"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Coordinate.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >__unm</span
                        ></kbd
                      ><kbd>(a)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>The unary minus (mirror the coordinate against the origin).</p>
              <p><em>Parameters:</em> <em>1.</em> <kbd>a</kbd> A coordinate</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Coordinate.__mul"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Coordinate.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >__mul</span
                        ></kbd
                      ><kbd>(a,b)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                The multiplication operator. Its effect depends on the
                parameters: If both are coordinates, their dot-product is
                returned. If exactly one of them is a coordinate and the other
                is a number, the scalar multiple of this coordinate is returned.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>a</kbd> A coordinate or a
                scalar <em>2.</em> <kbd>b</kbd> A coordinate or a scalar
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> The dot product or scalar product.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Coordinate.__div"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Coordinate.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >__div</span
                        ></kbd
                      ><kbd>(a,b)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                The division operator. Returns the scalar division of a
                coordinate by a scalar.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>a</kbd> A coordinate
                <em>2.</em> <kbd>b</kbd> A scalar (not equal to zero).
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> The scalar product or a * (1/b).
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Coordinate:norm"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Coordinate:<span
                          class="textcolor"
                          style="color: #bf0000"
                          >norm</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>The norm function. Returns the norm of a coordinate.</p>
              <p><em>Parameters:</em> <em>1.</em> <kbd>a</kbd> A coordinate</p>
              <p><em>Returns:</em> <em>1.</em> The norm of the coordinate</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Coordinate:normalize"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Coordinate:<span
                          class="textcolor"
                          style="color: #bf0000"
                          >normalize</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Normalize a vector: Ensure that it has length 1. If the vector
                used to be the 0-vector, it gets replaced by (1,0).
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Coordinate:normalized"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Coordinate:<span
                          class="textcolor"
                          style="color: #bf0000"
                          >normalized</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Normalized version of a vector: Like
                <span class="verb">normalize</span>, only the result is returned
                in a new vector.
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> Normalized version of
                <span class="verb">self</span>
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Coordinate.boundingBox"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Coordinate.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >boundingBox</span
                        ></kbd
                      ><kbd>(array)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Compute a bounding box around an array of coordinates</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>array</kbd> An array of
                coordinates
              </p>
              <p>
                <em>Returns:</em> <em>1.</em>
                <span class="verb">min_x</span> The minimum \(x\) value of the
                bounding box of the array
              </p>
              <p>
                <em>Returns:</em> <em>1.</em>
                <span class="verb">min_y</span> The minimum \(y\) value
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> <span class="verb">max_x</span>
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> <span class="verb">max_y</span>
              </p>
              <p>
                <em>Returns:</em> <em>1.</em>
                <span class="verb">center_x</span> The center of the bounding
                box
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> <span class="verb">center_y</span>
              </p>
              <p></p>
            </ul>
          </div>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><b>Lua table</b>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >Path</span
                        ></kbd
                      >
                      (declared in <kbd>pgf.gd.model.Path</kbd>)</span
                    >
                  </p>
                </li>
              </div>
              <p>A Path models a path in the plane.</p>
              <p>
                Following the PostScript/<span class="textsc">pdf</span>/<span
                  class="textsc"
                  >svg</span
                >
                convention, a path consists of a series of path segments, each
                of which can be closed or not. Each path segment, in turn,
                consists of a series of B&eacute;zier curves and straight line
                segments; see Section&nbsp;<a href="tikz-paths#section-paths"
                  >14</a
                >
                for an introduction to paths in general.
              </p>
              <p>
                A <span class="verb">Path</span> object is a table whose array
                part stores <span class="verb">Coordinate</span> objects,
                <span class="verb">strings</span>, and
                <span class="verb">function</span>s that describe the path of
                the edge. The following strings are allowed in this array:
              </p>
              <ul class="itemize" style="list-style-type: none">
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">"moveto"</span> The line&rsquo;s path
                    should stop at the current position and then start anew at
                    the next coordinate in the array.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">"lineto"</span> The line should continue
                    from the current position to the next coordinate in the
                    array.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">"curveto"</span> The line should continue
                    form the current position with a B&eacute;zier curve that is
                    specified by the next three
                    <span class="verb">Coordinate</span> objects (in the usual
                    manner).
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">"closepath"</span> The line&rsquo;s path
                    should be &ldquo;closed&rdquo; in the sense that the current
                    subpath that was started with the most recent moveto
                    operation should now form a closed curve.
                  </p>
                </li>
              </ul>
              <p>
                Instead of a <span class="verb">Coordinate</span>, a
                <span class="verb">Path</span> may also contain a function. In
                this case, the function, when called, must return the
                <span class="verb">Coordinate</span> that is &ldquo;meant&rdquo;
                by the position. This allows algorithms to add coordinates to a
                path that are still not fixed at the moment they are added to
                the path.
              </p>
              <p>
                <em>Alphabetical method summary:</em>
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Path.new"
                    >function Path.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >new</span
                    >
                    (initial)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Path:appendArcTo"
                    >function Path:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >appendArcTo</span
                    >
                    (target,radius_or_center,clockwise,trans)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Path:appendArc"
                    >function Path:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >appendArc</span
                    >
                    (start_angle,end_angle,radius,trans)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Path:appendClosepath"
                    >function Path:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >appendClosepath</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Path:appendCurveto"
                    >function Path:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >appendCurveto</span
                    >
                    (a,b,c,d,e,f)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Path:appendLineto"
                    >function Path:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >appendLineto</span
                    >
                    (x,y)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Path:appendMoveto"
                    >function Path:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >appendMoveto</span
                    >
                    (x,y)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Path:boundingBox"
                    >function Path:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >boundingBox</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Path:clear"
                    >function Path:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >clear</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Path:clone"
                    >function Path:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >clone</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Path:coordinates"
                    >function Path:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >coordinates</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Path:cutAtBeginning"
                    >function Path:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >cutAtBeginning</span
                    >
                    (index, time)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Path:cutAtEnd"
                    >function Path:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >cutAtEnd</span
                    >
                    (index, time)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Path:intersectionsWith"
                    >function Path:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >intersectionsWith</span
                    >
                    (path)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Path:makeRigid"
                    >function Path:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >makeRigid</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Path:pad"
                    >function Path:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >pad</span
                    >
                    (padding)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Path:reversed"
                    >function Path:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >reversed</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Path:shiftByCoordinate"
                    >function Path:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >shiftByCoordinate</span
                    >
                    (x)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Path:shift"
                    >function Path:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >shift</span
                    >
                    (x,y)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Path:transform"
                    >function Path:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >transform</span
                    >
                    (t)</a
                  ></kbd
                >
              </p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Path.new"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Path.<span class="textcolor" style="color: #bf0000"
                          >new</span
                        ></kbd
                      ><kbd>(initial)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Creates an empty path.</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>initial</kbd> A table
                containing an array of strings and coordinates that constitute
                the path. Coordinates may be given as tables or as a pair of
                numbers. In this case, each pair of numbers is converted into
                one coordinate. If omitted, a new empty path is created.
              </p>
              <p><em>Returns:</em> <em>1.</em> A empty Path</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Path:clone"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Path:<span class="textcolor" style="color: #bf0000"
                          >clone</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Creates a copy of a path.</p>
              <p><em>Returns:</em> <em>1.</em> A copy of the path</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Path:reversed"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Path:<span class="textcolor" style="color: #bf0000"
                          >reversed</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Returns the path in reverse order.</p>
              <p><em>Returns:</em> <em>1.</em> A copy of the reversed path</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Path:transform"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Path:<span class="textcolor" style="color: #bf0000"
                          >transform</span
                        ></kbd
                      ><kbd>(t)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Transform all points on a path.</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>t</kbd> A transformation,
                see <span class="verb">pgf.gd.lib.Transform</span>. It is
                applied to all <span class="verb">Coordinate</span> objects on
                the path.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Path:shift"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Path:<span class="textcolor" style="color: #bf0000"
                          >shift</span
                        ></kbd
                      ><kbd>(x,y)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Shift all points on a path.</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>x</kbd> An \(x\)-shift
                <em>2.</em> <kbd>y</kbd> A \(y\)-shift
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Path:shiftByCoordinate"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Path:<span class="textcolor" style="color: #bf0000"
                          >shiftByCoordinate</span
                        ></kbd
                      ><kbd>(x)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Shift by all points on a path.</p>
              <p><em>Parameters:</em> <em>1.</em> <kbd>x</kbd> A coordinate</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Path:clear"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Path:<span class="textcolor" style="color: #bf0000"
                          >clear</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Makes the path empty.</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Path:appendMoveto"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Path:<span class="textcolor" style="color: #bf0000"
                          >appendMoveto</span
                        ></kbd
                      ><kbd>(x,y)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Appends a <span class="verb">moveto</span> to the path.</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>x</kbd> A
                <span class="verb">Coordinate</span> or
                <span class="verb">function</span> or, if the
                <span class="verb">y</span> parameter is not
                <span class="verb">nil</span>, a number that is the \(x\)-part
                of a coordinate. <em>2.</em> <kbd>y</kbd> The \(y\)-part of the
                coordinate.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Path:appendLineto"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Path:<span class="textcolor" style="color: #bf0000"
                          >appendLineto</span
                        ></kbd
                      ><kbd>(x,y)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Appends a <span class="verb">lineto</span> to the path.</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>x</kbd> A
                <span class="verb">Coordinate</span> or
                <span class="verb">function</span>, if the
                <span class="verb">y</span> parameter is not
                <span class="verb">nil</span>, a number that is the \(x\)-part
                of a coordinate. <em>2.</em> <kbd>y</kbd> The \(y\)-part of the
                coordinate.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Path:appendClosepath"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Path:<span class="textcolor" style="color: #bf0000"
                          >appendClosepath</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Appends a <span class="verb">closepath</span> to the path.</p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Path:appendCurveto"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Path:<span class="textcolor" style="color: #bf0000"
                          >appendCurveto</span
                        ></kbd
                      ><kbd>(a,b,c,d,e,f)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Appends a <span class="verb">curveto</span> to the path. There
                can be either three coordinates (or functions) as parameters
                (the two support points and the target) or six numbers, where
                two consecutive numbers form a
                <span class="verb">Coordinate</span>. Which case is meant is
                detected by the presence of a sixth non-nil parameter.
              </p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Path:makeRigid"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Path:<span class="textcolor" style="color: #bf0000"
                          >makeRigid</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Makes a path &ldquo;rigid&rdquo;, meaning that all coordinates
                that are only given as functions are replaced by the values
                these functions yield.
              </p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Path:coordinates"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Path:<span class="textcolor" style="color: #bf0000"
                          >coordinates</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Returns an array of all coordinates that are present in a path.
                This means, essentially, that all strings are filtered out.
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> An array of all coordinate objects
                on the path.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Path:boundingBox"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Path:<span class="textcolor" style="color: #bf0000"
                          >boundingBox</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Returns a bounding box of the path. This will not necessarily be
                the minimal bounding box in case the path contains curves
                because, then, the support points of the curve are used for the
                computation rather than the actual bounding box of the path.
              </p>
              <p>
                If the path contains no coordinates, all return values are 0.
              </p>
              <p>
                <em>Returns:</em> <em>1.</em>
                <span class="verb">min_x</span> The minimum \(x\) value of the
                bounding box of the path
              </p>
              <p>
                <em>Returns:</em> <em>1.</em>
                <span class="verb">min_y</span> The minimum \(y\) value
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> <span class="verb">max_x</span>
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> <span class="verb">max_y</span>
              </p>
              <p>
                <em>Returns:</em> <em>1.</em>
                <span class="verb">center_x</span> The center of the bounding
                box
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> <span class="verb">center_y</span>
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Path:intersectionsWith"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Path:<span class="textcolor" style="color: #bf0000"
                          >intersectionsWith</span
                        ></kbd
                      ><kbd>(path)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Computes all intersections of a path with another path and
                returns them as an array of coordinates. The intersections will
                be sorted &ldquo;along the path
                <span class="verb">self</span>&rdquo;. The implementation uses a
                divide-and-conquer approach that should be reasonably fast in
                practice.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>path</kbd> Another path
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> Array of all intersections of
                <span class="verb">path</span> with
                <span class="verb">self</span> in the order they appear on
                <span class="verb">self</span>. Each entry of this array is a
                table with the following fields:
              </p>
              <ul class="itemize" style="list-style-type: none">
                <p>
                  <span class="listmarker">&bull;</span>
                  <span class="verb">index</span> The index of the segment in
                  <span class="verb">self</span> where the intersection occurs.
                  <span class="listmarker">&bull;</span>
                  <span class="verb">time</span> The &ldquo;time&rdquo; at which
                  a point traveling along the segment from its start point to
                  its end point. <span class="listmarker">&bull;</span>
                  <span class="verb">point</span> The point itself.
                </p>
              </ul>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Path:cutAtBeginning"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Path:<span class="textcolor" style="color: #bf0000"
                          >cutAtBeginning</span
                        ></kbd
                      ><kbd>(index, time)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Shorten a path at the beginning. We are given the index of a
                segment inside the path as well as a point in time along this
                segment. The path is now shortened so that everything before
                this segment and everything in the segment before the given time
                is removed from the path.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>index</kbd> The index of a
                path segment. <em>2.</em> <kbd>time</kbd> A time along the
                specified path segment.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Path:cutAtEnd"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Path:<span class="textcolor" style="color: #bf0000"
                          >cutAtEnd</span
                        ></kbd
                      ><kbd>(index, time)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Shorten a path at the end. This method works like
                <span class="verb">cutAtBeginning</span>, only the path is cut
                at the end.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>index</kbd> The index of a
                path segment. <em>2.</em> <kbd>time</kbd> A time along the
                specified path segment.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Path:pad"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Path:<span class="textcolor" style="color: #bf0000"
                          >pad</span
                        ></kbd
                      ><kbd>(padding)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                &ldquo;Pads&rdquo; the path. The idea is the following: Suppose
                we stroke the path with a pen whose width is twice the value
                <span class="verb">padding</span>. The outer edge of this
                stroked drawing is now a path by itself. The path will be a bit
                longer and &ldquo;larger&rdquo;. The present function tries to
                compute an approximation to this resulting path.
              </p>
              <p>
                The algorithm used to compute the enlarged part does not
                necessarily compute the precise new path. It should work
                correctly for polyline paths, but not for curved paths.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>padding</kbd> A padding
                distance.
              </p>
              <p><em>Returns:</em> <em>1.</em> The padded path.</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Path:appendArc"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Path:<span class="textcolor" style="color: #bf0000"
                          >appendArc</span
                        ></kbd
                      ><kbd>(start_angle,end_angle,radius,trans)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Appends an arc (as in the sense of &ldquo;a part of the
                circumference of a circle&rdquo;) to the path. You may
                optionally provide a transformation matrix, which will be
                applied to the arc. In detail, the following happens: We first
                invert the transformation and apply it to the start point. Then
                we compute the arc &ldquo;normally&rdquo;, as if no
                transformation matrix were present. Then we apply the
                transformation matrix to all computed points.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>start_angle</kbd> The
                start angle of the arc. Must be specified in degrees.
                <em>2.</em> <kbd>end_angle</kbd> the end angle of the arc.
                <em>3.</em> <kbd>radius</kbd> The radius of the circle on which
                this arc lies. <em>4.</em> <kbd>trans</kbd> A transformation
                matrix. If <span class="verb">nil</span>, the identity matrix
                will be assumed.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Path:appendArcTo"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Path:<span class="textcolor" style="color: #bf0000"
                          >appendArcTo</span
                        ></kbd
                      ><kbd
                        >(target,radius_or_center,clockwise,trans)</kbd
                      ></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Appends a clockwise arc (as in the sense of &ldquo;a part of the
                circumference of a circle&rdquo;) to the path such that it ends
                at a given point. If a transformation matrix is given, both
                start and end point are first transformed according to the
                inverted transformation, then the arc is computed and then
                transformed back.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>target</kbd> The point
                where the arc should end. <em>2.</em>
                <kbd>radius_or_center</kbd> If a number, it is the radius of the
                circle on which this arc lies. If it is a
                <span class="verb">Coordinate</span>, this is the center of the
                circle. <em>3.</em> <kbd>clockwise</kbd> If true, the arc will
                be clockwise. Otherwise (the default, if nothing or
                <span class="verb">nil</span> is given), the arc will be counter
                clockwise. <em>4.</em> <kbd>trans</kbd> A transformation matrix.
                If missing, the identity matrix is assumed.
              </p>
              <p></p>
            </ul>
          </div>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><b>Lua table</b>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >Transform</span
                        ></kbd
                      >
                      (declared in <kbd>pgf.gd.lib.Transform</kbd>)</span
                    >
                  </p>
                </li>
              </div>
              <p>
                The <span class="verb">Transform</span> table provides a set of
                static methods for creating and handling canvas transformation
                matrices. Such a matrix is actually just an array of six
                numbers. The idea is that &ldquo;applying&rdquo; an array a, b,
                c, d, e, f a vector \((x,y)\) will yield the new vector
                \((ax+by+e,cx+dy+f)\). For details on how such matrices work,
                see Section&nbsp;<a
                  href="base-transformations#section-transform-cm"
                  >108.2.1</a
                >
              </p>
              <p>
                <em>Alphabetical method summary:</em>
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Transform.concat"
                    >function Transform.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >concat</span
                    >
                    (a,b)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Transform.invert"
                    >function Transform.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >invert</span
                    >
                    (t)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Transform.new_rotation"
                    >function Transform.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >new_rotation</span
                    >
                    (angle)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Transform.new_scaling"
                    >function Transform.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >new_scaling</span
                    >
                    (x_scale, y_scale)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Transform.new_shift"
                    >function Transform.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >new_shift</span
                    >
                    (x,y)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Transform.new"
                    >function Transform.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >new</span
                    >
                    (a,b,c,d,x,y)</a
                  ></kbd
                >
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Transform.new"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Transform.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >new</span
                        ></kbd
                      ><kbd>(a,b,c,d,x,y)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Creates a new transformation array.</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>a</kbd> First component
                <em>2.</em> <kbd>b</kbd> Second component <em>3.</em>
                <kbd>c</kbd> Third component <em>4.</em> <kbd>d</kbd> Fourth
                component <em>5.</em> <kbd>x</kbd> The x shift <em>6.</em>
                <kbd>y</kbd> The y shift
              </p>
              <p><em>Returns:</em> <em>1.</em> A transformation object.</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Transform.new_shift"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Transform.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >new_shift</span
                        ></kbd
                      ><kbd>(x,y)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Creates a new transformation object that represents a shift.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>x</kbd> An x-shift
                <em>2.</em> <kbd>y</kbd> A y-shift
              </p>
              <p><em>Returns:</em> <em>1.</em> A transformation object</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Transform.new_rotation"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Transform.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >new_rotation</span
                        ></kbd
                      ><kbd>(angle)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Creates a new transformation object that represents a rotation.
              </p>
              <p><em>Parameters:</em> <em>1.</em> <kbd>angle</kbd> An angle</p>
              <p><em>Returns:</em> <em>1.</em> A transformation object</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Transform.new_scaling"></a>
          </p>
          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Transform.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >new_scaling</span
                        ></kbd
                      ><kbd>(x_scale, y_scale)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Creates a new transformation object that represents a scaling.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>x</kbd> The horizontal
                scaling <em>2.</em> <kbd>y</kbd> The vertical scaling (if
                missing, the horizontal scaling is used)
              </p>
              <p><em>Returns:</em> <em>1.</em> A transformation object</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Transform.concat"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Transform.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >concat</span
                        ></kbd
                      ><kbd>(a,b)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Concatenate two transformation matrices, returning the new one.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>a</kbd> The first
                transformation <em>2.</em> <kbd>b</kbd> The second
                transformation
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> The transformation representing
                first applying <span class="verb">b</span> and then applying
                <span class="verb">a</span>.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Transform.invert"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Transform.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >invert</span
                        ></kbd
                      ><kbd>(t)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Inverts a transformation matrix.</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>t</kbd> The
                transformation.
              </p>
              <p><em>Returns:</em> <em>1.</em> The inverted transformation</p>
              <p></p>
            </ul>
          </div>
          <h6 id="autosec-4866">
            <span
              ><span class="sectionnumber" id="sec-36.5.7">36.5.7</span> Options
              and Data Storages for Vertices, Arcs, and Digraphs</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.5.7"
              data-pdf-destination="subsubsection.36.5.7"
              data-pdf-page="520"
              href="#sec-36.5.7"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4866"></a>

          <p>
            Many objects in the graph drawing system have an
            <span class="verb">options</span> table attached to them. These
            tables will contain the different kinds options specified by the
            user for the object. For efficiency reasons, many objects may share
            the same options table (since, more often than not, almost all
            objects have exactly the same
            <span class="verb">options</span> table). For this reason, you
            cannot store anything in an options table, indeed, you should never
            attempt to write anything into an options table. Instead, you should
            use a <span class="verb">Storage</span>.
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><b>Lua table</b>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >Storage</span
                        ></kbd
                      >
                      (declared in <kbd>pgf.gd.lib.Storage</kbd>)</span
                    >
                  </p>
                </li>
              </div>
              <p>
                A storage is an object that, as the name suggests, allows you to
                &ldquo;store stuff concerning objects.&rdquo; Basically, it
                behaves like table having weak keys, which means that once the
                objects for which you &ldquo;store stuff&rdquo; go out of scope,
                they are also removed from the storage. Also, you can specify
                that for each object of the storage you store a table. In this
                case, there is no need to initialize this table for each object;
                rather, when you write into such a table and it does not yet
                exist, it is created &ldquo;on the fly&rdquo;.
              </p>
              <p>
                The typical way you use storages is best explained with the
                following example: Suppose you want to write a depth-first
                search algorithm for a graph. This algorithm might wish to mark
                all nodes it has visited. It could just say
                <span class="verb">v.marked = true</span>, but this might clash
                with someone else also using the
                <span class="verb">marked</span> key. The solution is to create
                a <span class="verb">marked</span> storage. The algorithm can
                first say
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000">marked</span>
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">Storage</span
                    >.<span class="textcolor" style="color: #000000">new</span
                    ><span class="textcolor" style="color: #800080">()</span
                    ><br />
                  </code>
                </div>
              </figure>
              <p>and then say</p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000">marked</span
                    >[<span class="textcolor" style="color: #008000">v</span
                    >] <span class="textcolor" style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="pgfkeys#pgf.true">true</a></span
                    ><br />
                  </code>
                </div>
              </figure>
              <p>
                to mark its objects. The
                <span class="verb">marked</span> storage object does not need to
                be created locally inside a function, you can declare it as a
                local variable of the whole file; nevertheless, the entries for
                vertices no longer in use get removed automatically. You can
                also make it a member variable of the algorithm class, which
                allows you make the information about which objects are marked
                globally accessible.
              </p>
              <p>
                Now suppose the algorithm would like to store even more stuff in
                the storage. For this, we might use a table and can use the fact
                that a storage will automatically create a table when necessary:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="library-circuits#pgf.info">info</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">Storage</span
                    >.<span class="textcolor" style="color: #000000"
                      >newTableStorage</span
                    ><span class="textcolor" style="color: #800080">()</span
                    ><br />
                    <br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="library-circuits#pgf.info">info</a></span
                    >[<span class="textcolor" style="color: #008000">v</span
                    >].<span class="textcolor" style="color: #000000"
                      >marked</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="pgfkeys#pgf.true">true</a></span
                    >
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.--">--</a></span
                    >
                    <span class="textcolor" style="color: #000000">the</span>
                    <span class="textcolor" style="color: #000000">"info</span
                    >[<span class="textcolor" style="color: #008000">v</span
                    >]<span class="textcolor" style="color: #000000">"</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="dv-formats#pgf.table">table</a></span
                    >
                    <span class="textcolor" style="color: #000000">is</span
                    ><br />
                    <span class="spaces">                       </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="tikz-paths#pgf.--">--</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      >created</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >automatically</span
                    >
                    <span class="textcolor" style="color: #000000">here</span
                    ><br />
                    <br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="library-circuits#pgf.info">info</a></span
                    >[<span class="textcolor" style="color: #008000">v</span
                    >].<span class="textcolor" style="color: #000000">foo</span>
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000">"bar"</span
                    ><br />
                  </code>
                </div>
              </figure>
              <p>
                Again, once <span class="verb">v</span> goes out of scope, both
                it and the info table will removed.
              </p>
              <p>
                <em>Alphabetical method summary:</em>
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Storage.newTableStorage"
                    >function Storage.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >newTableStorage</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Storage.new"
                    >function Storage.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >new</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Storage.new"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Storage.<span class="textcolor" style="color: #bf0000"
                          >new</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Create a new storage object.</p>
              <p>
                <em>Returns:</em> <em>1.</em> A new
                <span class="verb">Storage</span> instance.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Storage.newTableStorage"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Storage.<span class="textcolor" style="color: #bf0000"
                          >newTableStorage</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Create a new storage object which will install a table for every
                entry automatically.
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> A new
                <span class="verb">Storage</span> instance.
              </p>
              <p></p>
            </ul>
          </div>
          <h6 id="autosec-4867">
            <span
              ><span class="sectionnumber" id="sec-36.5.8">36.5.8</span>
              Events</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.5.8"
              data-pdf-destination="subsubsection.36.5.8"
              data-pdf-page="521"
              href="#sec-36.5.8"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4867"></a>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><b>Lua table</b>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >Event</span
                        ></kbd
                      >
                      (declared in <kbd>pgf.gd.lib.Event</kbd>)</span
                    >
                  </p>
                </li>
              </div>
              <p>
                Events are used to communicate &ldquo;interesting&rdquo; events
                from the parser to the graph drawing algorithms.
              </p>
              <p>
                As a syntactic description of some graph is being parsed,
                vertices, arcs, and a digraph object representing this graph get
                constructed. However, even though syntactic annotations such as
                options for the vertices and arcs are attached to them and can
                be accessed through the graph objects, some syntactic
                information is neither represented in the digraph object nor in
                the vertices and the arcs. A typical example is a
                &ldquo;missing&rdquo; node in a tree: Since it is missing, there
                is neither a vertex object nor arc objects representing it. It
                is also not a global option of the graph.
              </p>
              <p>
                For these reasons, in addition to the digraph object itself,
                additional information can be passed by a parser to graph
                drawing algorithms through the means of events. Each
                <span class="verb">Event</span> consists of a
                <span class="verb">kind</span> field, which is just some string,
                and a <span class="verb">parameters</span> field, which stores
                additional, kind-specific information. As a graph is being
                parsed, a string of events is accumulated and is later on
                available through the <span class="verb">events</span> field of
                the graph drawing scope.
              </p>
              <p>
                The following events are created during the parsing process by
                the standard parsers of <span class="tikzname">TikZ</span>:
              </p>
              <ul class="itemize" style="list-style-type: none">
                <li>
                  <p>
                    <span class="listmarker"
                      ><span class="verb">node</span></span
                    >
                    When a node of the input graph has been parsed and a
                    <span class="verb">Vertex</span> object has been created for
                    it, an event with kind <span class="verb">node</span> is
                    created. The <span class="verb">parameter</span> of this
                    event is the just-created vertex.
                  </p>
                  <p>
                    The same kind of event is used to indicate
                    &ldquo;missing&rdquo; nodes. In this case, the
                    <span class="verb">parameters</span> field is
                    <span class="verb">nil</span>.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker"
                      ><span class="verb">edge</span></span
                    >
                    When an edge of the input graph has been parsed, an event is
                    created of kind <span class="verb">edge</span>. The
                    <span class="verb">parameters</span> field will store an
                    array with two entries: The first is the
                    <span class="verb">Arc</span> object whose
                    <span class="verb">syntactic_edges</span> field stores the
                    <span class="verb">edge</span>. The second is the index of
                    the edge inside the
                    <span class="verb">syntactic_edges</span> field.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker"
                      ><span class="verb">begin</span></span
                    >
                    Signals the beginning of a group, which will be ended with a
                    corresponding <span class="verb">end</span> event later on.
                    The <span class="verb">parameters</span> field will indicate
                    the kind of group. Currently, only the string
                    <span class="verb">"descendants"</span> is used as
                    <span class="verb">parameters</span>, indicating the start
                    of several nodes that are descendants of a given node. This
                    information can be used by algorithms for reconstructing the
                    input structure of trees.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker"
                      ><span class="verb">end</span></span
                    >
                    Signals the end of a group begun by a
                    <span class="verb">begin</span> event earlier on.
                  </p>
                </li>
              </ul>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >kind</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>A string representing the kind of the events.</p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >parameters</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>Kind-specific parameters.</p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          >Field
                          <kbd
                            ><span class="textcolor" style="color: #bf0000"
                              >index</span
                            ></kbd
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    A number that stores the events logical position in the
                    sequence of events. The number need not be an integer array
                    index.
                  </p>
                  <p></p>
                </ul>
              </div>
              <p>
                <em>Alphabetical method summary:</em>
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Event.new"
                    >function Event.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >new</span
                    >
                    (values)</a
                  ></kbd
                >
              </p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Event.new"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Event.<span class="textcolor" style="color: #bf0000"
                          >new</span
                        ></kbd
                      ><kbd>(values)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Create a new event object</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>initial</kbd> Initial
                fields of the new event.
              </p>
              <p><em>Returns:</em> <em>1.</em> The new object</p>
              <p></p>
            </ul>
          </div>
          <h5 id="autosec-4868">
            <a id="section-gd-transformations"></a
            ><span
              ><span class="sectionnumber" id="sec-36.6">36.6</span> Graph
              Transformations</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.6"
              data-pdf-destination="subsection.36.6"
              data-pdf-page="521"
              href="#sec-36.6"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-4868"></a>

          <h6 id="autosec-4869">
            <span
              ><span class="sectionnumber" id="sec-36.6.1">36.6.1</span> The
              Layout Pipeline</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.6.1"
              data-pdf-destination="subsubsection.36.6.1"
              data-pdf-page="521"
              href="#sec-36.6.1"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4869"></a>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><b>Lua table</b>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >LayoutPipeline</span
                        ></kbd
                      >
                      (declared in
                      <kbd>pgf.gd.control.LayoutPipeline</kbd>)</span
                    >
                  </p>
                </li>
              </div>
              <p>
                This class controls the running of graph drawing algorithms on
                graphs. In particular, it performs pre- and posttransformations
                and also invokes the collapsing of sublayouts.
              </p>
              <p>
                You do not call any of the methods of this class directly, the
                whole class is included only for documentation purposes.
              </p>
              <p>
                Before an algorithm is applied, a number of transformations will
                have been applied, depending on the algorithm&rsquo;s
                <span class="verb">preconditions</span> field:
              </p>
              <ul class="itemize" style="list-style-type: none">
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">connected</span>
                  </p>
                  <p>
                    If this property is set for an algorithm (that is, in the
                    <span class="verb">declare</span> statement for the
                    algorithm the <span class="verb">predconditions</span> field
                    has the entry <span class="verb">connected=true</span> set),
                    then the graph will be decomposed into connected components.
                    The algorithm is run on each component individually.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">tree</span>
                  </p>
                  <p>
                    When set, the field
                    <span class="verb">spanning_tree</span> of the algorithm
                    will be set to a spanning tree of the graph. This option
                    implies <span class="verb">connected</span>.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">loop_free</span>
                  </p>
                  <p>
                    When set, all loops (arcs from a vertex to itself) will have
                    been removed when the algorithm runs.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">at_least_two_nodes</span>
                  </p>
                  <p>
                    When explicitly set to <span class="verb">false</span> (this
                    precondition is <span class="verb">true</span> by default),
                    the algorithm will even be run if there is only a single
                    vertex in the graph.
                  </p>
                </li>
              </ul>
              <p>
                Once the algorithm has run, the algorithm&rsquo;s
                <span class="verb">postconditions</span> will be processed:
              </p>
              <ul class="itemize" style="list-style-type: none">
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">upward_oriented</span>
                  </p>
                  <p>
                    When set, the algorithm tells the layout pipeline that the
                    graph has been laid out in a layered manner with each layer
                    going from left to right and layers at a whole going upwards
                    (positive \(y\)-coordinates). The graph will then be rotated
                    and possibly swapped in accordance with the
                    <span class="verb">grow</span> key set by the user.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">fixed</span>
                  </p>
                  <p>
                    When set, no rotational postprocessing will be done after
                    the algorithm has run. Usually, a graph is rotated to meet a
                    user&rsquo;s <span class="verb">orient</span> settings.
                    However, when the algorithm has already
                    &ldquo;ideally&rdquo; rotated the graph, set this
                    postcondition.
                  </p>
                </li>
              </ul>
              <p>
                In addition to the above-described always-present and automatic
                transformations, users may also specify additional pre- and
                posttransformations. This happens when users install additional
                algorithms in appropriate phases. In detail, the following
                happens in order:
              </p>
              <ul class="enumerate" style="list-style-type: none">
                <li>
                  <p>
                    <span class="listmarker">1.</span> If specified, the graph
                    is decomposed into connected components and the following
                    steps are applied to each component individually.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">2.</span> All algorithms in the
                    phase stack for the phase
                    <span class="verb">preprocessing</span> are applied to the
                    component. These algorithms are run one after the other in
                    the order they appear in the phase stack.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">3.</span> If necessary, the
                    spanning tree is now computed and rotational information is
                    gathered.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">4.</span> The single algorithm in
                    phase <span class="verb">main</span> is called.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">5.</span> All algorithms in the
                    phase stack for the phase
                    <span class="verb">edge routing</span> are run.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">6.</span> All algorithms in the
                    phase stack for phase
                    <span class="verb">postprocessing</span> are run.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">7.</span> Edge syncing,
                    orientation, and anchoring are applied.
                  </p>
                </li>
              </ul>
              <p>
                If sublayouts are used, all of the above (except for anchoring)
                happens for each sublayout.
              </p>
              <p>
                <em>Alphabetical method summary:</em>
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/LayoutPipeline.anchor"
                    >function LayoutPipeline.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >anchor</span
                    >
                    (graph, scope)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/LayoutPipeline.cutEdges"
                    >function LayoutPipeline.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >cutEdges</span
                    >
                    (graph)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/LayoutPipeline.decompose"
                    >function LayoutPipeline.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >decompose</span
                    >
                    (digraph)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/LayoutPipeline.orient"
                    >function LayoutPipeline.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >orient</span
                    >
                    (rotation_info, postconditions, graph, scope)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a
                    href="gd-algorithm-layer#pgf/lua/LayoutPipeline.packComponents"
                    >function LayoutPipeline.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >packComponents</span
                    >
                    (syntactic_digraph, components)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a
                    href="gd-algorithm-layer#pgf/lua/LayoutPipeline.prepareBoundingBoxes"
                    >function LayoutPipeline.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >prepareBoundingBoxes</span
                    >
                    (rotation_info, adjusted_bb, graph, vertices)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a
                    href="gd-algorithm-layer#pgf/lua/LayoutPipeline.prepareRotateAround"
                    >function LayoutPipeline.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >prepareRotateAround</span
                    >
                    (postconditions, graph)</a
                  ></kbd
                >
              </p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/LayoutPipeline.anchor"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >LayoutPipeline.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >anchor</span
                        ></kbd
                      ><kbd>(graph, scope)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                This function is called internally to perform the graph
                anchoring procedure described in Section&nbsp;<a
                  href="gd-usage-tikz#subsection-library-graphdrawing-anchoring"
                  >28.4</a
                >. These transformations are always performed.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>graph</kbd> A graph
                <em>2.</em> <kbd>scope</kbd> The scope
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/LayoutPipeline.prepareRotateAround"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >LayoutPipeline.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >prepareRotateAround</span
                        ></kbd
                      ><kbd>(postconditions, graph)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                This method tries to determine in which direction the graph is
                supposed to grow and in which direction the algorithm will grow
                the graph. These two pieces of information together produce a
                necessary rotation around some node. This rotation is returned
                in a table.
              </p>
              <p>
                Note that this method does not actually cause a rotation to
                happen; this is left to other method.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>postconditions</kbd> The
                algorithm&rsquo;s postconditions. <em>2.</em>
                <kbd>graph</kbd> An undirected graph
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> A table containing the computed
                information.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/LayoutPipeline.prepareBoundingBoxes"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >LayoutPipeline.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >prepareBoundingBoxes</span
                        ></kbd
                      ><kbd
                        >(rotation_info, adjusted_bb, graph, vertices)</kbd
                      ></span
                    >
                  </p>
                </li>
              </div>
              <p>Compute growth-adjusted node sizes.</p>
              <p>
                For each node of the graph, compute bounding box of the node
                that results when the node is rotated so that it is in the
                correct orientation for what the algorithm assumes.
              </p>
              <p>
                The &ldquo;bounding box&rdquo; actually consists of the fields
              </p>
              <ul class="itemize" style="list-style-type: none">
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">sibling_pre</span>,
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">sibling_post</span>,
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">layer_pre</span>, and
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">layer_post</span>,
                  </p>
                </li>
              </ul>
              <p>
                which correspond to &ldquo;min x&rdquo;, &ldquo;min y&rdquo;,
                &ldquo;min y&rdquo;, and &ldquo;max y&rdquo; for a tree growing
                up.
              </p>
              <p>
                The computation of the &ldquo;bounding box&rdquo; treats a
                centered circle in a special way, all other shapes are currently
                treated like a rectangle.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>rotation_info</kbd> The
                table computed by the function prepareRotateAround <em>2.</em>
                <kbd>packing_storage</kbd> A storage in which the computed
                distances are stored. <em>3.</em> <kbd>graph</kbd> An graph
                <em>4.</em> <kbd>vertices</kbd> An array of to-be-prepared
                vertices inside graph
              </p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/LayoutPipeline.orient"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >LayoutPipeline.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >orient</span
                        ></kbd
                      ><kbd
                        >(rotation_info, postconditions, graph, scope)</kbd
                      ></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Performs a post-layout orientation of the graph by performing
                the steps documented in Section&nbsp;<a
                  href="gd-usage-tikz#subsection-library-graphdrawing-standard-orientation"
                  >28.5</a
                >.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>rotation_info</kbd> The
                info record computed by the function
                <span class="verb">prepareRotateAround</span>. <em>2.</em>
                <kbd>postconditions</kbd> The algorithm&rsquo;s postconditions.
                <em>3.</em> <kbd>graph</kbd> A to-be-oriented graph.
                <em>4.</em> <kbd>scope</kbd> The graph drawing scope.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/LayoutPipeline.decompose"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >LayoutPipeline.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >decompose</span
                        ></kbd
                      ><kbd>(digraph)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                This internal function is called to decompose a graph into its
                components. Whether or not this function is called depends on
                whether the precondition <span class="verb">connected</span> is
                set for the algorithm class and whether the
                <span class="verb">componentwise</span> key is used.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>graph</kbd> A
                to-be-decomposed graph
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> An array of graph objects that
                represent the connected components of the graph.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/LayoutPipeline.packComponents"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >LayoutPipeline.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >packComponents</span
                        ></kbd
                      ><kbd>(syntactic_digraph, components)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                This internal function packs the components of a graph. See
                Section&nbsp;<a
                  href="gd-usage-tikz#subsection-gd-component-packing"
                  >28.7</a
                >
                for details.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>graph</kbd> The graph
                <em>2.</em> <kbd>components</kbd> A list of components
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/LayoutPipeline.cutEdges"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >LayoutPipeline.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >cutEdges</span
                        ></kbd
                      ><kbd>(graph)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Cut the edges. This function handles the &ldquo;cutting&rdquo;
                of edges. The idea is that every edge is a path going from the
                center of the from node to the center of the target node. Now,
                we intersect this path with the path of the start node and cut
                away everything before this intersection. Likewise, we intersect
                the path with the head node and, again, cut away everything
                following the intersection.
              </p>
              <p>These cuttings are not done if appropriate options are set.</p>
            </ul>
          </div>
          <h6 id="autosec-4870">
            <span
              ><span class="sectionnumber" id="sec-36.6.2">36.6.2</span> Hints
              For Edge Routing</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.6.2"
              data-pdf-destination="subsubsection.36.6.2"
              data-pdf-page="524"
              href="#sec-36.6.2"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4870"></a>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><b>Lua table</b>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >Hints</span
                        ></kbd
                      >
                      (declared in <kbd>pgf.gd.routing.Hints</kbd>)</span
                    >
                  </p>
                </li>
              </div>
              <p>
                The <span class="verb">Hints</span> class provides a way for
                graph drawing algorithms to communicate certain possibilities
                concerning the routing of edges to edge routing algorithms. This
                partly decouples the choice of the vertex positioning algorithms
                from the choice of edge routing algorithm. For instance, for a
                simple necklace routing, it is unclear whether the edges on the
                necklace should be routing &ldquo;along the necklace&rdquo; or
                not. Thus, necklace routing algorithms will &ldquo;hint&rdquo;
                that a necklace is present and only when the
                <span class="verb">necklace routing</span> algorithm is selected
                will these hints lead to actual bending of edges.
              </p>
              <p>
                For each kind of hint, there are methods in this class for
                creating the hints and other methods for reading them. Hints are
                always local to the ugraph.
              </p>
              <p>
                <em>Alphabetical method summary:</em>
              </p>
              <p>
                <kbd
                  ><a
                    href="gd-algorithm-layer#pgf/lua/Hints.addNecklaceCircleHint"
                    >function Hints.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >addNecklaceCircleHint</span
                    >
                    (ugraph, necklace, center, clockwise)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/Hints.getNecklaceHints"
                    >function Hints.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >getNecklaceHints</span
                    >
                    (ugraph)</a
                  ></kbd
                >
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Hints.addNecklaceCircleHint"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Hints.<span class="textcolor" style="color: #bf0000"
                          >addNecklaceCircleHint</span
                        ></kbd
                      ><kbd>(ugraph, necklace, center, clockwise)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Adds a necklace hint. In this case, the hint indicates that the
                given sequence of vertices lie on a circle.
              </p>
              <p>
                The idea is that an algorithm may specify that in a given graph
                certain sequences of nodes form a &ldquo;necklace&rdquo;, which
                is typically a circle. There may be more than one necklace
                inside a given graph. For each necklace, whenever an arc
                connects subsequent nodes on the necklace, they get bend in such
                a way that they lie follow the path of the necklace. If an arc
                lies on more than one necklace, the &ldquo;last one wins&rdquo;.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>ugraph</kbd> The ugraph to
                which this hint is added <em>2.</em> <kbd>necklace</kbd> The
                sequence of vertices that form the necklace. If the necklace is
                closed, the last vertex must equal the first one. <em>3.</em>
                <kbd>center</kbd> If provided, must be
                <span class="verb">Coordinate</span> that specifies the center
                of the circle on which the vertices lie. If not provided, the
                origin is assumed. <em>4.</em> <kbd>clockwise</kbd> If
                <span class="verb">true</span>, the vertices are in clockwise
                order, otherwise in counter-clockwise order.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/Hints.getNecklaceHints"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >Hints.<span class="textcolor" style="color: #bf0000"
                          >getNecklaceHints</span
                        ></kbd
                      ><kbd>(ugraph)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Gets the necklace hints.</p>
              <p>
                This function will return an array whose entries are necklace
                hints. Each entry in the array has a
                <span class="verb">necklace</span> field, which is the field
                passed to the <span class="verb">addNecklaceXxxx</span> methods.
                For a circle necklace, the <span class="verb">center</span> and
                <span class="verb">clockwise</span> fields will be set. (Other
                necklaces are not yet implemented.)
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>ugraph</kbd> The ugraph
                for which the necklace hints are requested.
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> The array of necklaces as
                described above.
              </p>
              <p></p>
            </ul>
          </div>
          <h5 id="autosec-4871">
            <a id="section-gd-interface-to-algorithms"></a
            ><span
              ><span class="sectionnumber" id="sec-36.7">36.7</span> The
              Interface To Algorithms</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.7"
              data-pdf-destination="subsection.36.7"
              data-pdf-page="524"
              href="#sec-36.7"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-4871"></a>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><b>Lua table</b>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >InterfaceToAlgorithms</span
                        ></kbd
                      >
                      (declared in
                      <kbd>pgf.gd.interface.InterfaceToAlgorithms</kbd>)</span
                    >
                  </p>
                </li>
              </div>
              <p>
                This class provides the interface between the graph drawing
                system and algorithms. Another class,
                <span class="verb">InterfaceToDisplay</span>, binds the display
                layers (like <span class="tikzname">TikZ</span> or a graph
                drawing editor) to the graph drawing system &ldquo;from the
                other side&rdquo;.
              </p>
              <p>
                The functions declared here can be used by algorithms to
                communicate with the graph drawing system, which will usually
                forward the &ldquo;requests&rdquo; of the algorithms to the
                display layers in some way. For instance, when you declare a new
                parameter, this parameter will become available on the display
                layer.
              </p>
              <p>
                <em>Alphabetical method summary:</em>
              </p>
              <p>
                <kbd
                  ><a
                    href="gd-algorithm-layer#pgf/lua/InterfaceToAlgorithms.addHandler"
                    >function InterfaceToAlgorithms.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >addHandler</span
                    >
                    (test, handler)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a
                    href="gd-algorithm-layer#pgf/lua/InterfaceToAlgorithms.createEdge"
                    >function InterfaceToAlgorithms.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >createEdge</span
                    >
                    (algorithm, tail, head, init)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a
                    href="gd-algorithm-layer#pgf/lua/InterfaceToAlgorithms.createVertex"
                    >function InterfaceToAlgorithms.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >createVertex</span
                    >
                    (algorithm, init)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a
                    href="gd-algorithm-layer#pgf/lua/InterfaceToAlgorithms.declare"
                    >function InterfaceToAlgorithms.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >declare</span
                    >
                    (t)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a
                    href="gd-algorithm-layer#pgf/lua/InterfaceToAlgorithms.findVertexByName"
                    >function InterfaceToAlgorithms.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >findVertexByName</span
                    >
                    (name)</a
                  ></kbd
                >
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/InterfaceToAlgorithms.addHandler"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >InterfaceToAlgorithms.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >addHandler</span
                        ></kbd
                      ><kbd>(test, handler)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Adds a handler for the
                <span class="verb">declare</span> function. The
                <span class="verb">declare</span> command is just a
                &ldquo;dispatcher&rdquo; to one of many possible declaration
                functions. Which function is used, depends on which fields are
                present in the table passed to
                <span class="verb">declare</span>. For each registered handler,
                we call the <span class="verb">test</span> function. If it
                returns neither <span class="verb">nil</span> nor
                <span class="verb">false</span>, the
                <span class="verb">handler</span> field of this handler is
                called. If it returns <span class="verb">true</span>, the
                handler immediately finishes. Otherwise, the next handler is
                tried.
              </p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/InterfaceToAlgorithms.declare"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >InterfaceToAlgorithms.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >declare</span
                        ></kbd
                      ><kbd>(t)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                This function is the &ldquo;work-horse&rdquo; for declaring
                things. It allows you to specify on the algorithmic layer that a
                key &ldquo;is available&rdquo; for use on the display layer.
                There is just one function for handling all declarations in
                order to make the declarations easy-to-use since you just need
                to import a single function:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >require</span
                    >
                    <span class="textcolor" style="color: #000000">"pgf</span
                    >.<span class="textcolor" style="color: #000000">gd</span
                    >.<span class="textcolor" style="color: #000000"
                      >interface</span
                    >.<span class="textcolor" style="color: #000000"
                      >InterfaceToAlgorithms"</span
                    >.<span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    ><br />
                  </code>
                </div>
              </figure>
              <p>
                You can now use <span class="verb">declare</span> it as follows:
                You pass it a table containing information about the
                to-be-declared key. The table <em>must</em> have a field
                <span class="verb">key</span> whose value is unique and must be
                a string. If the value of <span class="verb">key</span> is, say,
                <span class="verb">"foo"</span>, the parameter can be set on the
                display layer such as, say, the
                <span class="tikzname">TikZ</span> layer, using
                <span class="verb">/graph drawing/foo</span>. Here is a typical
                example of how a declaration is done:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >---</span
                    ><br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    >
                    {<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >key</span
                    >
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >"electrical</span
                    >
                    <span class="textcolor" style="color: #000000">charge"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="library-patterns#pgf.type">type</a></span
                    >
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >"number"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="library-automata#pgf.initial">initial</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">"1</span
                    >.<span class="textcolor" style="color: #000000">0"</span
                    >,<br />
                    <br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >summary</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">"The</span>
                    <span class="textcolor" style="color: #000000"
                      >``electrical</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >charge''</span
                    >
                    <span class="textcolor" style="color: #000000">is</span>
                    <span class="textcolor" style="color: #000000">a</span>
                    <span class="textcolor" style="color: #000000"
                      >property</span
                    >...<span class="textcolor" style="color: #000000">"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >documentation</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    [<span class="textcolor" style="color: #008000">[...</span
                    >]<span class="textcolor" style="color: #000000">]</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="gd-algorithm-layer#pgf.examples"
                        >examples</a
                      ></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    [<span class="textcolor" style="color: #008000">[...</span
                    >]<span class="textcolor" style="color: #000000">]</span
                    ><br />
                    <span class="spaces"> </span>}<br />
                  </code>
                </div>
              </figure>
              <p>
                <b>Inlining Documentation.</b> The three keys
                <span class="verb">summary</span>,
                <span class="verb">documentation</span> and
                <span class="verb">examples</span> are intended for the display
                layer to give the users information about what the key does. The
                <span class="verb">summary</span> should be a string that
                succinctly describes the option. This text will typically be
                displayed for instance as a &ldquo;tool tip&rdquo; or in an
                option overview. The
                <span class="verb">documentation</span> optionally provides more
                information and should be typeset using
                <span class="latexlogofont"
                  ><span class="latexlogo"
                    >T<span class="latexlogosub">e</span>X</span
                  ></span
                >. The <span class="verb">examples</span> can either be a single
                string or an array of strings. Each should be a
                <span class="tikzname">TikZ</span> example demonstrating how the
                key is used.
              </p>
              <p>
                Note that you can take advantage of the Lua syntax of enclosing
                very long multi-line strings in <span class="verb">[[</span> and
                <span class="verb">]]</span>. As a bonus, if the summary,
                documentation, or an example starts and ends with a quote, these
                two quotes will be stripped. This allows you to enclose the
                whole multi-line string (additionally) in quotes, leading to
                better syntax highlighting in editors.
              </p>
              <p>
                <b>External Documentation.</b> It is sometimes more desirable to
                put the documentation of a key into an external file. First,
                this makes the code leaner and, thus, faster to read (both for
                humans and for computers). Second, for C code, it is quite
                inconvenient to have long strings inside a C file. In such
                cases, you can use the
                <span class="verb">documentation_in</span> field:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >---</span
                    ><br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    >
                    {<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >key</span
                    >
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >"electrical</span
                    >
                    <span class="textcolor" style="color: #000000">charge"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="library-patterns#pgf.type">type</a></span
                    >
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >"number"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="library-automata#pgf.initial">initial</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">"1</span
                    >.<span class="textcolor" style="color: #000000">0"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >documentation_in</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >"some_filename"</span
                    ><br />
                    <span class="spaces"> </span>}<br />
                  </code>
                </div>
              </figure>
              <p>
                The <span class="verb">some_filename</span> must be the name of
                a Lua file that will be read &ldquo;on demand&rdquo;, that is,
                whenever someone tries to access the documentation, summary, or
                examples field of the key, this file will be loaded using
                <span class="verb">require</span>. The file should then use
                <span class="verb">pgf.gd.doc</span> to install the missing
                information in the keys.
              </p>
              <p>
                <b>The Use Field.</b> When you declare a key, you can provide a
                <span class="verb">use</span> field. If present, you must set it
                to an array of small tables which have two fields:
              </p>
              <ul class="itemize" style="list-style-type: none">
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">key</span> This is the name of another
                    key or a function.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">value</span> This is either a value (like
                    a string or a number) or a function or
                    <span class="verb">nil</span>.
                  </p>
                </li>
              </ul>
              <p>Here is an example:</p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >---</span
                    ><br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    >
                    {<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >key</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >"binary</span
                    >
                    <span class="textcolor" style="color: #000000">tree</span>
                    <span class="textcolor" style="color: #000000">layout"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >use</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    {<br />
                    <span class="spaces">     </span>{<span class="spaces"> </span><span
                      class="textcolor"
                      style="color: #000000"
                      >key</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >"minimum</span
                    >
                    <span class="textcolor" style="color: #000000">number</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.of">of</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      >children"</span
                    >, <span class="textcolor" style="color: #000000"
                      ><a href="tikz-animations#pgf.value">value</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">2</span>
                    },<br />
                    <span class="spaces">     </span>{<span class="spaces"> </span><span
                      class="textcolor"
                      style="color: #000000"
                      >key</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >"significant</span
                    >
                    <span class="textcolor" style="color: #000000">sep"</span
                    >,<span class="spaces">            </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="tikz-animations#pgf.value">value</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">12</span>
                    },<br />
                    <span class="spaces">     </span>{<span class="spaces"> </span><span
                      class="textcolor"
                      style="color: #000000"
                      >key</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">"tree</span>
                    <span class="textcolor" style="color: #000000"
                      >layout"</span
                    >
                    }<br />
                    <span class="spaces">   </span>},<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >summary</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">"The</span>
                    <span class="textcolor" style="color: #000000"
                      >|binary</span
                    >
                    <span class="textcolor" style="color: #000000">tree</span>
                    <span class="textcolor" style="color: #000000"
                      >layout|</span
                    >
                    <span class="textcolor" style="color: #000000">places</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.node">node</a></span
                    >...<span class="textcolor" style="color: #000000">"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >documentation</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    ...,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="gd-algorithm-layer#pgf.examples"
                        >examples</a
                      ></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    ...,<br />
                    <span class="spaces"> </span>}<br />
                  </code>
                </div>
              </figure>
              <p>
                The effect of a <span class="verb">use</span> field is the
                following: Whenever the key is encountered on the option stack,
                the key is first handled normally. Then, we iterate over all
                elements of the <span class="verb">use</span> array. For each
                element, we perform the action as if the
                <span class="verb">key</span> of the array had been set
                explicitly to the value given by the
                <span class="verb">value</span> field. If the
                <span class="verb">value</span> is a function, we pass a
                different value to the key, namely the result of applying the
                function to the value originally passed to the original key.
                Here is a typical example:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >---</span
                    ><br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    >
                    {<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >key</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">"level</span>
                    <span class="textcolor" style="color: #000000">sep"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="library-patterns#pgf.type">type</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >"length"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >use</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    {<br />
                    <span class="spaces">     </span>{<span class="spaces"> </span><span
                      class="textcolor"
                      style="color: #000000"
                      >key</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">"level</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-decorations#pgf.pre">pre</a></span
                    >
                    <span class="textcolor" style="color: #000000">sep"</span
                    >,<span class="spaces">  </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="tikz-animations#pgf.value">value</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="dv-formats#pgf.function">function</a></span
                    >
                    <span class="textcolor" style="color: #800080">(v)</span
                    > <span class="textcolor" style="color: #000000"
                      >return</span
                    >
                    <span class="textcolor" style="color: #000000">v/2</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    >
                    },<br />
                    <span class="spaces">     </span>{<span class="spaces"> </span><span
                      class="textcolor"
                      style="color: #000000"
                      >key</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">"level</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-decorations#pgf.post">post</a></span
                    >
                    <span class="textcolor" style="color: #000000">sep"</span
                    >, <span class="textcolor" style="color: #000000"
                      ><a href="tikz-animations#pgf.value">value</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="dv-formats#pgf.function">function</a></span
                    >
                    <span class="textcolor" style="color: #800080">(v)</span
                    > <span class="textcolor" style="color: #000000"
                      >return</span
                    >
                    <span class="textcolor" style="color: #000000">v/2</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    >
                    }<br />
                    <span class="spaces">   </span>},<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >summary</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">"</span
                    >...<span class="textcolor" style="color: #000000">"</span
                    ><br />
                    <span class="spaces"> </span>}<br />
                  </code>
                </div>
              </figure>
              <p>
                Just like the value, the key itself can also be a function. In
                this case, the to-be-used key is also computed by applying the
                function to the value passed to the original key.
              </p>
              <p>
                As mentioned at the beginning,
                <span class="verb">declare</span> is a work-horse that will call
                different internal functions depending on whether you declare a
                parameter key or a new algorithm or a collection kind. Which
                kind of declaration is being done is detected by the presence of
                certain fields in the table passed to
                <span class="verb">t</span>. The different kind of possible
                declarations are documented in the
                <span class="verb">declare_...</span> functions. Note that these
                functions are internal and cannot be called from outside; you
                must use the <span class="verb">declare</span> function.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>t</kbd> A table contain
                the field <span class="verb">key</span> and other fields as
                described.
              </p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/declare_parameter"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >declare_parameter</span
                        ></kbd
                      ><kbd>(t)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                This function is called by <span class="verb">declare</span> for
                &ldquo;normal parameter keys&rdquo;, which are all keys for
                which no special field like
                <span class="verb">algorithm</span> or
                <span class="verb">layer</span> is declared. You write
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >---</span
                    ><br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    >
                    {<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >key</span
                    >
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >"electrical</span
                    >
                    <span class="textcolor" style="color: #000000">charge"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="library-patterns#pgf.type">type</a></span
                    >
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >"number"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="library-automata#pgf.initial">initial</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">"1</span
                    >.<span class="textcolor" style="color: #000000">0"</span
                    >,<br />
                    <br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >summary</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">"The</span>
                    <span class="textcolor" style="color: #000000"
                      >``electrical</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >charge''</span
                    >
                    <span class="textcolor" style="color: #000000">is</span>
                    <span class="textcolor" style="color: #000000">a</span>
                    <span class="textcolor" style="color: #000000"
                      >property</span
                    >...<span class="textcolor" style="color: #000000">"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >documentation</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    [<span class="textcolor" style="color: #008000">[...</span
                    >]<span class="textcolor" style="color: #000000">]</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="gd-algorithm-layer#pgf.examples"
                        >examples</a
                      ></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    [<span class="textcolor" style="color: #008000">[...</span
                    >]<span class="textcolor" style="color: #000000">]</span
                    ><br />
                    <span class="spaces"> </span>}<br />
                  </code>
                </div>
              </figure>
              <p>
                When an author writes
                <span class="verb">my node[electrical charge=5-3]</span> in the
                description of her graph, the object
                <span class="verb">vertex</span> corresponding to the node
                <span class="verb">my node</span> will have a field
                <span class="verb">options</span> attached to it with
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000">vertex</span
                    >.<span class="textcolor" style="color: #000000"
                      >options</span
                    >[<span class="textcolor" style="color: #008000"
                      >"electrical charge"</span
                    >] <span class="textcolor" style="color: #000000"
                      >==</span
                    >
                    <span class="textcolor" style="color: #000000">2</span
                    ><br />
                  </code>
                </div>
              </figure>
              <p>
                The <span class="verb">type</span> field does not refer to Lua
                types. Rather, these types are sensible types for graph drawing
                and they are mapped by the higher layers to Lua types. In
                detail, the following types are available:
              </p>
              <ul class="itemize" style="list-style-type: none">
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">number</span> A dimensionless number.
                    Will be mapped to a normal Lua
                    <span class="verb">number</span>. So, when the author writes
                    <span class="verb">foo=5*2</span>, the
                    <span class="verb">foo</span> key of the
                    <span class="verb">options</span> field of the corresponding
                    object will be set to <span class="verb">10.0</span>.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">length</span> A &ldquo;dimension&rdquo;
                    in the sense of
                    <span class="latexlogofont"
                      ><span class="latexlogo"
                        >T<span class="latexlogosub">e</span>X</span
                      ></span
                    >
                    (a number with a dimension like
                    <span class="verb">cm</span> attached to it). It is the job
                    of the display layer to map this to a number in &ldquo;<span
                      class="latexlogofont"
                      ><span class="latexlogo"
                        >T<span class="latexlogosub">e</span>X</span
                      ></span
                    >
                    points&rdquo;, that is, to a multiple of \(1/72.27\)th of an
                    inch.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">time</span> A &ldquo;time&rdquo; in the
                    sense of <span class="verb">\pgfparsetime</span>. Examples
                    are <span class="verb">6s</span> or
                    <span class="verb">0.1min</span> or
                    <span class="verb">6000ms</span>, all of which will map to
                    <span class="verb">6</span>.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">string</span> Some text. Will be mapped
                    to a Lua <span class="verb">string</span>.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">canvas coordinate</span> A position on
                    the canvas. Will be mapped to a
                    <span class="verb">model.Coordinate</span>.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">boolean</span> A Boolean value.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">raw</span> Some to-be-executed Lua text.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">direction</span> Normally, an angle;
                    however, the special values of
                    <span class="verb">down</span>,
                    <span class="verb">up</span>,
                    <span class="verb">left</span>,
                    <span class="verb">right</span> as well as the directions
                    <span class="verb">north</span>,
                    <span class="verb">north west</span>, and so on are also
                    legal on the display layer. All of them will be mapped to a
                    number. Furthermore, a vertical bar (<span class="verb"
                      >|</span
                    >) will be mapped to <span class="verb">-90</span> and a
                    minus sign (<span class="verb">-</span>) will be mapped to
                    <span class="verb">0</span>.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">hidden</span> A key of this type
                    &ldquo;cannot be set&rdquo;, that is, users cannot set this
                    key at all. However algorithms can still read this key and,
                    through the use of <span class="verb">alias</span>, can use
                    the key as a handle to another key.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span>
                    <span class="verb">user value</span> The key stores a Lua
                    user value (userdata). Such keys can only be set from C
                    since user values cannot be created in Lua (let alone in
                    <span class="tikzname">TikZ</span>).
                  </p>
                </li>
              </ul>
              <p>
                If the <span class="verb">type</span> field is missing, it is
                automatically set to <span class="verb">"string"</span>.
              </p>
              <p>
                A parameter can have an <span class="verb">initial</span> value.
                This value will be used whenever the parameter has not been set
                explicitly for an object.
              </p>
              <p>
                A parameter can have a <span class="verb">default</span> value.
                This value will be used as the parameter value whenever the
                parameter is explicitly set, but no value is provided. For a key
                of type <span class="verb">"boolean"</span>, if no
                <span class="verb">default</span> is provided,
                <span class="verb">"true"</span> will be used automatically.
              </p>
              <p>
                A parameter can have an <span class="verb">alias</span> field.
                This field must be set to the name of another key or to a
                function. Whenever you access the current key and this key is
                not set, the <span class="verb">alias</span> key is tried
                instead. If it is set, its value will be returned (if the
                <span class="verb">alias</span> key has itself an alias set,
                this is tried recursively). If the alias is not set either and
                neither does it have an initial value, the
                <span class="verb">initial</span> value is used. Note that in
                case the alias has its <span class="verb">initial</span> field
                set, the <span class="verb">initial</span> value of the current
                key will never be used.
              </p>
              <p>
                The main purpose of the current key is to allow algorithms to
                introduce their own terminology for keys while still having
                access to the standard keys. For instance, the
                <span class="verb">OptimalHierarchyLayout</span> class uses the
                name <span class="verb">layerDistance</span> for what would be
                called <span class="verb">level distance</span> in the rest of
                the graph drawing system. In this case, we can declare the
                <span class="verb">layerDistance</span> key as follows:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    >
                    {<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >key</span
                    >
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >"layerDistance"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="library-patterns#pgf.type">type</a></span
                    >
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >"length"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="tikz-shapes#pgf.alias">alias</a></span
                    >
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000">"level</span>
                    <span class="textcolor" style="color: #000000"
                      >distance"</span
                    ><br />
                    <span class="spaces"> </span>}<br />
                  </code>
                </div>
              </figure>
              <p>
                Inside the algorithm, we can write
                <span class="verb">...options.layerDistance</span> and will get
                the current value of the
                <span class="verb">level distance</span> unless the
                <span class="verb">layerDistance</span> has been set explicitly.
                Indeed, we might set the <span class="verb">type</span> to
                <span class="verb">hidden</span> to ensure that
                <em>only</em> the <span class="verb">level distance</span> can
                and must set to set the layerDistance.
              </p>
              <p>
                Note that there is a difference between
                <span class="verb">alias</span> and the
                <span class="verb">use</span> field: Suppose we write
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    >
                    {<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >key</span
                    >
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >"layerDistance"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="library-patterns#pgf.type">type</a></span
                    >
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >"length"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >use</span
                    >
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >=</span
                    >
                    {<br />
                    <span class="spaces">     </span>{<span class="spaces"> </span><span
                      class="textcolor"
                      style="color: #000000"
                      >key</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">"level</span>
                    <span class="textcolor" style="color: #000000"
                      >distance"</span
                    >, <span class="textcolor" style="color: #000000"
                      ><a href="tikz-animations#pgf.value">value</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">lib</span
                    >.<span class="textcolor" style="color: #000000"
                      ><a href="drivers#pgf.id">id</a></span
                    >
                    }<br />
                    <span class="spaces">   </span>}<br />
                    <span class="spaces"> </span>}<br />
                  </code>
                </div>
              </figure>
              <p>
                Here, when you say <span class="verb">layerDistance=1cm</span>,
                the <span class="verb">level distance</span> itself will be
                modified. When the <span class="verb">level distance</span> is
                set, however, the <span class="verb">layerDistance</span> will
                not be modified.
              </p>
              <p>
                If the alias is a function, it will be called with the option
                table as its parameter. You can thus say things like
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    >
                    {<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >key</span
                    >
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >"layerDistance"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="library-patterns#pgf.type">type</a></span
                    >
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >"length"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="tikz-shapes#pgf.alias">alias</a></span
                    >
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="dv-formats#pgf.function">function</a></span
                    >
                    <span class="textcolor" style="color: #800080"
                      >(option)</span
                    ><br />
                    <span class="spaces">               </span><span
                      class="textcolor"
                      style="color: #000000"
                      >return</span
                    >
                    <span class="textcolor" style="color: #000000">option</span
                    >[<span class="textcolor" style="color: #008000"
                      >"layer pre dist"</span
                    >] <span class="textcolor" style="color: #000000"
                      >+</span
                    >
                    <span class="textcolor" style="color: #000000">option</span
                    >[<span class="textcolor" style="color: #008000"
                      >"layer post dist"</span
                    >]<br />
                    <span class="spaces">             </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                    <span class="spaces"> </span>}<br />
                  </code>
                </div>
              </figure>
              <p>
                As a special courtesy to C code, you can also set the key
                <span class="verb">alias_function_string</span>, which allows
                you to put the function into a string that is read using
                <span class="verb">loadstring</span>.
              </p>
              <p>
                (You cannot call this function directly, it is included for
                documentation purposes only.)
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>t</kbd> The table
                originally passed to <span class="verb">declare</span>.
              </p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/declare_algorithm"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >declare_algorithm</span
                        ></kbd
                      ><kbd>(t)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                This function is called by <span class="verb">declare</span> for
                &ldquo;algorithm keys&rdquo;. These keys are normally used
                without a value as in just
                <span class="verb">\graph[tree layout]</span>, but you can
                optionally pass a value to them. In this case, this value must
                be the name of a <em>phase</em> and the algorithm of this phase
                will be set (and not the default phase of the key), see the
                description of phases below for details.
              </p>
              <p>
                Algorithm keys are detected by the presence of the field
                <span class="verb">algorithm</span> in the table
                <span class="verb">t</span> passed to
                <span class="verb">declare</span>. Here is an example of how it
                is used:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >ReingoldTilford1981</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    {}<br />
                    <br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >---</span
                    ><br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    >
                    {<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >key</span
                    >
                    <span class="spaces">      </span><span
                      class="textcolor"
                      style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000">"tree</span>
                    <span class="textcolor" style="color: #000000">layout"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >algorithm</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >ReingoldTilford1981</span
                    >,<br />
                    <br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >preconditions</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    {<br />
                    <span class="spaces">     </span><span
                      class="textcolor"
                      style="color: #000000"
                      >connected</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="pgfkeys#pgf.true">true</a></span
                    >,<br />
                    <span class="spaces">     </span><span
                      class="textcolor"
                      style="color: #000000"
                      >tree</span
                    >
                    <span class="spaces">     </span><span
                      class="textcolor"
                      style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="pgfkeys#pgf.true">true</a></span
                    ><br />
                    <span class="spaces">   </span>},<br />
                    <br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >postconditions</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    {<br />
                    <span class="spaces">     </span><span
                      class="textcolor"
                      style="color: #000000"
                      >upward_oriented</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="pgfkeys#pgf.true">true</a></span
                    ><br />
                    <span class="spaces">   </span>},<br />
                    <br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >summary</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">"The</span>
                    <span class="textcolor" style="color: #000000"
                      >Reingold--Tilford</span
                    >
                    <span class="textcolor" style="color: #000000">method</span>
                    <span class="textcolor" style="color: #000000">is</span
                    >...<span class="textcolor" style="color: #000000">"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >documentation</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    ...,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="gd-algorithm-layer#pgf.examples"
                        >examples</a
                      ></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    ...,<br />
                    <span class="spaces"> </span>}<br />
                    <br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="dv-formats#pgf.function">function</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      >ReingoldTilford1981:run</span
                    ><span class="textcolor" style="color: #800080">()</span
                    ><br />
                    <span class="spaces">   </span>...<br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                  </code>
                </div>
              </figure>
              <p>
                The <span class="verb">algorithm</span> field expects either a
                table or a string as value. If you provide a string, then
                <span class="verb">require</span> will be applied to this string
                to obtain the table; however, this will happen only when the key
                is actually used for the first time. This means that you can
                declare (numerous) algorithms in a library without these
                algorithms actually being loaded until they are needed.
              </p>
              <p>
                Independently of how the table is obtained, it will be
                &ldquo;upgraded&rdquo; to a class by setting its
                <span class="verb">__index</span> field and installing a static
                <span class="verb">new</span> function (which takes a table of
                initial values as argument). Both these settings will only be
                done if they have not yet been performed.
              </p>
              <p>
                Next, you can specify the fields
                <span class="verb">preconditions</span> and
                <span class="verb">postconditions</span>. The preconditions are
                a table that tell the graph drawing engine what kind of graphs
                your algorithm expects. If the input graph is not of this kind,
                it will be automatically transformed to meet this condition.
                Similarly, the postconditions tell the engine about properties
                of your graph after the algorithm has run. Again, additional
                transformations may be performed.
              </p>
              <p>
                You can also specify the field <span class="verb">phase</span>.
                This tells the graph drawing engine which &ldquo;phase&rdquo; of
                the graph drawing process your option applies to. Each time you
                select an algorithm later on through use of the
                algorithm&rsquo;s key, the algorithm for this phase will be set;
                algorithms of other phases will not be changed. For instance,
                when an algorithm is part of the spanning tree computation, its
                phase will be
                <span class="verb">"spanning tree computation"</span> and using
                its key does not change the main algorithm, but only the
                algorithm used during the computation of a spanning tree for the
                current graph (in case this is needed by the main algorithm). In
                case the <span class="verb">phase</span> field is missing, the
                phase <span class="verb">main</span> is used. Thus, when no
                phase field is given, the key will change the main algorithm
                used to draw the graph.
              </p>
              <p>
                Later on, the algorithm set for the current phase can be
                accessed through the special
                <span class="verb">algorithm_phases</span> field of
                <span class="verb">options</span> tables. The
                <span class="verb">algorithm_phases</span> table will contain
                two fields for each phase for which some algorithm has been set:
                One field is the name of the phase and its value will be the
                most recently set algorithm (class) set for this phase. The
                other field is the name of the phase followed by
                <span class="verb">" stack"</span>. It will contain an array of
                all algorithm classes that have been set for this key with the
                most recently at the end.
              </p>
              <p>
                The following example shows the declaration of an algorithm that
                is the default for the phase
                <span class="verb">"spanning tree computation"</span>:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >---</span
                    ><br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    >
                    {<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >key</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >"breadth</span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="gd-trees#pgf.first">first</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      >spanning</span
                    >
                    <span class="textcolor" style="color: #000000">tree"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >algorithm</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    {<br />
                    <span class="spaces">     </span><span
                      class="textcolor"
                      style="color: #000000"
                      >run</span
                    >
                    <span class="textcolor" style="color: #000000">=</span
                    ><br />
                    <span class="spaces">       </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="dv-formats#pgf.function">function</a></span
                    >
                    <span class="textcolor" style="color: #800080">(self)</span
                    ><br />
                    <span class="spaces">         </span><span
                      class="textcolor"
                      style="color: #000000"
                      >return</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >SpanningTreeComputation</span
                    >.<span class="textcolor" style="color: #000000"
                      >computeSpanningTree</span
                    ><span class="textcolor" style="color: #800080"
                      >(self.ugraph, false, self.events)</span
                    ><br />
                    <span class="spaces">       </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                    <span class="spaces">   </span>},<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="tikz-graphs#pgf.phase">phase</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >"spanning</span
                    >
                    <span class="textcolor" style="color: #000000">tree</span>
                    <span class="textcolor" style="color: #000000"
                      >computation"</span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >phase_default</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="pgfkeys#pgf.true">true</a></span
                    >,<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >summary</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    ...<br />
                    <span class="spaces"> </span>}<br />
                  </code>
                </div>
              </figure>
              <p>
                The algorithm is called as follows during a run of the main
                algorithms:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.graph">graph</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    ...<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.--">--</a></span
                    >
                    <span class="textcolor" style="color: #000000">the</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.graph">graph</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-animations#pgf.object">object</a></span
                    ><br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >spanning_algorithm_class</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.graph">graph</a></span
                    >.<span class="textcolor" style="color: #000000"
                      >options</span
                    >.<span class="textcolor" style="color: #000000"
                      >algorithm_phases</span
                    >[<span class="textcolor" style="color: #008000"
                      >"spanning tree computation"</span
                    >]<br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >spanning_algorithm</span
                    >
                    <span class="textcolor" style="color: #000000">=</span
                    ><br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >spanning_algorithm_class</span
                    >.<span class="textcolor" style="color: #000000">new</span
                    >{<br />
                    <span class="spaces">     </span><span
                      class="textcolor"
                      style="color: #000000"
                      >ugraph</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">ugraph</span
                    >,<br />
                    <span class="spaces">     </span><span
                      class="textcolor"
                      style="color: #000000"
                      >events</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-scopes#pgf.scope">scope</a></span
                    >.<span class="textcolor" style="color: #000000"
                      >events</span
                    ><br />
                    <span class="spaces">   </span>}<br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >spanning_tree</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >spanning_algorithm:run</span
                    ><span class="textcolor" style="color: #800080">()</span
                    ><br />
                  </code>
                </div>
              </figure>
              <p>
                If you set the <span class="verb">phase_default</span> field of
                <span class="verb">t</span> to <span class="verb">true</span>,
                the algorithm will be installed as the default algorithm for the
                phase. This can be done only once per phase. Furthermore, for
                such a default algorithm the
                <span class="verb">algorithm</span> key must be table, it may
                not be a string (in other words, all default algorithms are
                loaded immediately). Accessing the
                <span class="verb">algorithm_phases</span> table for a phase for
                which no algorithm has been set will result in the default
                algorithm and the phase stack will also contain this algorithm;
                otherwise the phase stack will be empty.
              </p>
              <p>
                (You cannot call this function directly, it is included for
                documentation purposes only.)
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>t</kbd> The table
                originally passed to <span class="verb">declare</span>.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/declare_collection_kind"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >declare_collection_kind</span
                        ></kbd
                      ><kbd>(t)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                This function is called by <span class="verb">declare</span> for
                &ldquo;collection kinds&rdquo;. They are detected by the
                presence of the field <span class="verb">layer</span> in the
                table <span class="verb">t</span> passed to
                <span class="verb">declare</span>. See the class
                <span class="verb">Collection</span> for details on what a
                collection and a collection kind is.
              </p>
              <p>
                The <span class="verb">key</span> field of the table
                <span class="verb">t</span> passed to this function is both the
                name of the to-be-declared collection kind as well as the key
                that is used on the display layer to indicate that a node or
                edge belongs to a collection.
              </p>
              <p>
                <b>The Display Layer.</b> Let us first have a look at what
                happens on the display layer: A key
                <span class="verb">t.key</span> is setup on the display layer
                that, when used inside a graph drawing scope, starts a new
                collection of the specified kind. &ldquo;Starts&rdquo; means
                that all nodes and edges mentioned in the rest of the current
                option scope will belong to a new collection of kind
                <span class="verb">t.key</span>.
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    >
                    {<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >key</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">"hyper"</span
                    >, <span class="textcolor" style="color: #000000"
                      >layer</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">1</span>
                    }<br />
                  </code>
                </div>
              </figure>
              <p>you can say on the <span class="tikzname">TikZ</span> layer</p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-graphs#pgf.back/graph">\graph</a></span
                    > {<br />
                    <span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      >a</span
                    >, <span class="textcolor" style="color: #000000"
                      >b</span
                    >, <span class="textcolor" style="color: #000000"
                      >c</span
                    >, <span class="textcolor" style="color: #000000"
                      >d</span
                    >;<br />
                    <span class="spaces">   </span>{<span class="spaces"> </span>[<span
                      class="textcolor"
                      style="color: #008000"
                      ><a href="gd-usage-tikz#pgf.hyper">hyper</a></span
                    >] <span class="textcolor" style="color: #000000"
                      >a</span
                    >, <span class="textcolor" style="color: #000000"
                      >b</span
                    >, <span class="textcolor" style="color: #000000"
                      >c</span
                    >
                    }<br />
                    <span class="spaces">   </span>{<span class="spaces"> </span>[<span
                      class="textcolor"
                      style="color: #008000"
                      ><a href="gd-usage-tikz#pgf.hyper">hyper</a></span
                    >] <span class="textcolor" style="color: #000000"
                      >b</span
                    >, <span class="textcolor" style="color: #000000"
                      >c</span
                    >, <span class="textcolor" style="color: #000000"
                      >d</span
                    >
                    }<br />
                    <span class="spaces"> </span>};<br />
                  </code>
                </div>
              </figure>
              <p>
                In this case, the nodes <span class="verb">a</span>,
                <span class="verb">b</span>, <span class="verb">c</span> will
                belong to a collection of kind <span class="verb">hyper</span>.
                The nodes <span class="verb">b</span>,
                <span class="verb">c</span>, and
                <span class="verb">d</span> will (also) belong to another
                collection of the same kind <span class="verb">hyper</span>. You
                can nest collections; in this case, nodes will belong to several
                collections.
              </p>
              <p>
                The effect of declaring a collection kind on the algorithm layer
                it, first of all, that
                <span class="verb">scope.collections</span> will have a field
                named by the collection kind. This field will store an array
                that contains all collections that were declared as part of the
                graph. For instance,
                <span class="verb">collections.hyper</span> will contain all
                hyperedges, each of which is a table with the following fields:
                The <span class="verb">vertices</span> and
                <span class="verb">edges</span> fields each contain arrays of
                all objects being part of the collection. The
                <span class="verb">sub</span> field is an array of
                &ldquo;subcollections&rdquo;, that is, all collections that were
                started inside another collection. (For the collection kinds
                <span class="verb">hyper</span> and
                <span class="verb">same layer</span> this makes no sense, but
                subgraphs could, for instance, be nested.)
              </p>
              <p>
                <b>Rendering of Collections.</b> For some kinds of collections,
                it makes sense to <em>render</em> them, but only after the graph
                drawing algorithm has run. For this purpose, the binding layer
                will use a callback for each collection kind and each
                collection, see the <span class="verb">Binding</span> class for
                details. Suppose, for instance, you would like hyperedges to be
                rendered. In this case, a graph drawing algorithm should iterate
                over all collections of type <span class="verb">hyper</span> and
                compute some hints on how to render the hyperedge and store this
                information in the
                <span class="verb">generated_options</span> table of the
                hyperedge. Then, the binding layer will ask the display layer to
                run some some code that is able to read key&ndash;value pairs
                passed to it (which are the key&ndash;value pairs of the
                <span class="verb">generated_options</span> table) and use this
                information to nicely draw the hyperedge.
              </p>
              <p>
                The number <span class="verb">t.layer</span> determines in which
                order the different collection kinds are rendered.
              </p>
              <p>
                The last parameter, the layer number, is used to specify the
                order in which the different collection kinds are rendered. The
                higher the number, the later the collection will be rendered.
                Thus, if there is a collection kind with layer number 10 and
                another with layer number 20, all collections of the first kind
                will be rendered first, followed by all collections of the
                second kind.
              </p>
              <p>
                Collections whose layer kinds are non-negative get rendered
                <em>after</em> the nodes and edges have already been rendered.
                In contrast, collections with a negative layer number get shown
                &ldquo;below&rdquo; the nodes and edges.
              </p>
              <p>
                (You cannot call this function directly, it is included for
                documentation purposes only.)
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>t</kbd> The table
                originally passed to <span class="verb">declare</span>.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/InterfaceToAlgorithms.findVertexByName"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >InterfaceToAlgorithms.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >findVertexByName</span
                        ></kbd
                      ><kbd>(name)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Finds a node by its name. This method should be used by
                algorithms for which a node name is specified in some option
                and, thus, needs to be converted to a vertex object during a run
                of the algorithm.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>name</kbd> A node name
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> The vertex of the given name in
                the syntactic digraph or <span class="verb">nil</span>.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/InterfaceToAlgorithms.createVertex"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >InterfaceToAlgorithms.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >createVertex</span
                        ></kbd
                      ><kbd>(algorithm, init)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Generate a new vertex in the syntactic digraph. Calling this
                method allows algorithms to create vertices that are not present
                in the original input graph. Using the graph drawing coroutine,
                this function will pass back control to the display layer in
                order to render the vertex and, thereby, create precise size
                information about it.
              </p>
              <p>
                Note that creating new vertices in the syntactic digraph while
                the algorithm is already running is a bit at odds with the
                notion of treating graph drawing as a series of graph
                transformations: For instance, when a new vertex is created, the
                graph will (at least temporarily) no longer be connected; even
                though an algorithm may have requested that it should only be
                fed connected graphs. Likewise, more complicated requirements
                like insisting on the graph being a tree also cannot be met.
              </p>
              <p>
                For these reasons, the following happens, when a new vertex is
                created using the function:
              </p>
              <ul class="enumerate" style="list-style-type: none">
                <li>
                  <p>
                    <span class="listmarker">1.</span> The vertex is added to
                    the syntactic digraph.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">2.</span> It is added to all
                    layouts on the current layout stack. When a graph drawing
                    algorithm is run, it is not necessarily run on the original
                    syntactic digraph. Rather, a sequence / stack of nested
                    layouts may currently be processed and the vertex is added
                    to all of them.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">3.</span> The vertex is added to
                    both the <span class="verb">digraph</span> and the
                    <span class="verb">ugraph</span> of the current algorithm.
                  </p>
                </li>
              </ul>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>algorithm</kbd> An
                algorithm for whose syntactic digraph the node should be added
                <em>2.</em> <kbd>init</kbd> A table of initial values for the
                node that is passed to
                <span class="verb">Binding:createVertex</span>, see that
                function for details.
              </p>
              <p><em>Returns:</em> <em>1.</em> The newly created node</p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/InterfaceToAlgorithms.createEdge"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >InterfaceToAlgorithms.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >createEdge</span
                        ></kbd
                      ><kbd>(algorithm, tail, head, init)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Generate a new edge in the syntactic digraph. This method is
                quite similar to <span class="verb">createVertex</span> and has
                the same effects with respect to the edge: The edge is added to
                the syntactic digraph and also to all layouts on the layout
                stack. Furthermore, appropriate edges are added to the
                <span class="verb">digraph</span> and the
                <span class="verb">ugraph</span> of the algorithm currently
                running.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>algorithm</kbd> An
                algorithm for whose syntactic digraph the node should be added
                <em>2.</em> <kbd>tail</kbd> A syntactic tail vertex <em>3.</em>
                <kbd>head</kbd> A syntactic head vertex <em>4.</em>
                <kbd>init</kbd> A table of initial values for the edge.
              </p>
              <p>
                The following fields are useful for
                <span class="verb">init</span>:
              </p>
              <ul class="itemize" style="list-style-type: none">
                <p>
                  <span class="listmarker">&bull;</span>
                  <span class="verb">init.direction</span> If present, a
                  direction for the edge. Defaults to &rdquo;&ndash;&rdquo;.
                  <span class="listmarker">&bull;</span>
                  <span class="verb">init.options</span> If present, some
                  options for the edge. <span class="listmarker">&bull;</span>
                  <span class="verb">init.generated_options</span> A table that
                  is passed back to the display layer as a list of key-value
                  pairs in the syntax of
                  <span class="verb">declare_parameter</span>.
                </p>
              </ul>
            </ul>
          </div>
          <h5 id="autosec-4874">
            <a id="section-gd-examples"></a
            ><span
              ><span class="sectionnumber" id="sec-36.8">36.8</span> Examples of
              Implementations of Graph Drawing Algorithms</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.8"
              data-pdf-destination="subsection.36.8"
              data-pdf-page="531"
              href="#sec-36.8"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-4874"></a>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <a id="pgf.examples"></a>
                    <span class="hl-def"
                      ><b>Graph Drawing Library</b>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >examples</span
                        ></kbd
                      ></span
                    >
                    <a
                      class="anchor-link"
                      data-html-link="pgf.examples"
                      href="#pgf.examples"
                      id="pgf.examples"
                      >&para;</a
                    >
                  </p>
                </li>
              </div>
              <p>
                <kbd
                  >\usegdlibrary{<span class="textcolor" style="color: #bf0000"
                    >examples</span
                  >} %
                  <span class="latexlogofont"
                    ><span class="latexlogo"
                      >L<span class="latexlogosup">a</span>T<span
                        class="latexlogosub"
                        >e</span
                      >X</span
                    ></span
                  >
                  and plain
                  <span class="latexlogofont"
                    ><span class="latexlogo"
                      >T<span class="latexlogosub">e</span>X</span
                    ></span
                  ></kbd
                ><br />
                <kbd
                  >\usegdlibrary[<span class="textcolor" style="color: #bf0000"
                    >examples</span
                  >] % Con<span class="latexlogofont"
                    ><span class="latexlogo"
                      >T<span class="latexlogosub">e</span>X</span
                    ></span
                  >t</kbd
                >
              </p>
              <p>
                This package presents some examples of how different aspects of
                the graph drawing engine can be used. In particular, the
                algorithms of this package are not really meant to be used to
                layout graphs (although they can be used, in principle); rather
                you are invited to have a look at their implementation and to
                adapt them to your needs.
              </p>
              <p></p>
            </ul>
          </div>
          <h6 id="autosec-4875">
            <span
              ><span class="sectionnumber" id="sec-36.8.1">36.8.1</span> The
              &ldquo;Hello World&rdquo; of Graph Drawing</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.8.1"
              data-pdf-destination="subsubsection.36.8.1"
              data-pdf-page="531"
              href="#sec-36.8.1"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4875"></a>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <a id="pgf.simple:demo:layout"></a>
                    <span class="hl-def"
                      ><kbd
                        >/graph drawing/<span
                          class="textcolor"
                          style="color: #bf0000"
                          >simple demo layout</span
                        ><span class="textcolor" style="color: #008000"
                          >=</span
                        ></kbd
                      ><span class="textcolor" style="color: #008000"
                        ><span class="angle">&langle;</span><i>string</i
                        ><span class="angle">&rangle;</span></span
                      ></span
                    >
                    <a
                      class="anchor-link"
                      data-html-link="pgf.simple:demo:layout"
                      href="#pgf.simple:demo:layout"
                      id="pgf.simple:demo:layout"
                      >&para;</a
                    >
                  </p>
                </li>
              </div>
              <p>
                This algorithm is the &ldquo;Hello World&rdquo; of graph
                drawing. The algorithm arranges nodes in a circle (without
                paying heed to the sizes of the nodes or to the edges). In order
                to &ldquo;really&rdquo; layout nodes in a circle, use
                <span class="verb">simple necklace layout</span>; the present
                layout is only intended to demonstrate how much (or little) is
                needed to implement a graph drawing algorithm.
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.--">--</a></span
                    >
                    <span class="textcolor" style="color: #000000">File</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="base-scopes#pgf.pgf">pgf</a></span
                    >.<span class="textcolor" style="color: #000000">gd</span
                    >.<span class="textcolor" style="color: #000000"
                      ><a href="gd-algorithm-layer#pgf.examples"
                        >examples</a
                      ></span
                    >.<span class="textcolor" style="color: #000000"
                      >SimpleDemo</span
                    ><br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >require</span
                    >
                    <span class="textcolor" style="color: #000000">"pgf</span
                    >.<span class="textcolor" style="color: #000000">gd</span
                    >.<span class="textcolor" style="color: #000000"
                      >interface</span
                    >.<span class="textcolor" style="color: #000000"
                      >InterfaceToAlgorithms"</span
                    >.<span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    ><br />
                    <br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    >
                    {<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >key</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >"simple</span
                    >
                    <span class="textcolor" style="color: #000000">demo</span>
                    <span class="textcolor" style="color: #000000">layout"</span
                    >,<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >algorithm</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    {<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >run</span
                    >
                    <span class="textcolor" style="color: #000000">=</span
                    ><br />
                    <span class="spaces">      </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="dv-formats#pgf.function">function</a></span
                    >
                    <span class="textcolor" style="color: #800080">(self)</span
                    ><br />
                    <span class="spaces">        </span><span
                      class="textcolor"
                      style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000">g</span>
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">self</span
                    >.<span class="textcolor" style="color: #000000"
                      >digraph</span
                    ><br />
                    <span class="spaces">        </span><span
                      class="textcolor"
                      style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000">alpha</span>
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #800080"
                      >(2 * math.pi)</span
                    > <span class="textcolor" style="color: #000000"
                      >/</span
                    >
                    <span class="textcolor" style="color: #000000">#g</span
                    >.<span class="textcolor" style="color: #000000"
                      >vertices</span
                    ><br />
                    <br />
                    <span class="spaces">        </span><span
                      class="textcolor"
                      style="color: #000000"
                      >for</span
                    >
                    <span class="textcolor" style="color: #000000">i</span
                    >,<span class="textcolor" style="color: #000000"
                      >vertex</span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="library-edges#pgf.in">in</a></span
                    >
                    <span class="textcolor" style="color: #000000">ipairs</span
                    ><span class="textcolor" style="color: #800080"
                      >(g.vertices)</span
                    > <span class="textcolor" style="color: #000000"
                      >do</span
                    ><br />
                    <span class="spaces">          </span><span
                      class="textcolor"
                      style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.radius">radius</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">vertex</span
                    >.<span class="textcolor" style="color: #000000"
                      >options</span
                    >[<span class="textcolor" style="color: #008000"
                      >'radius'</span
                    >] <span class="textcolor" style="color: #000000"
                      ><a href="pgfkeys#pgf.or">or</a></span
                    >
                    <span class="textcolor" style="color: #000000">g</span
                    >.<span class="textcolor" style="color: #000000"
                      >options</span
                    >[<span class="textcolor" style="color: #008000"
                      >'radius'</span
                    >]<br />
                    <span class="spaces">          </span><span
                      class="textcolor"
                      style="color: #000000"
                      >vertex</span
                    >.<span class="textcolor" style="color: #000000"
                      ><a href="tikz-shapes#pgf.pos">pos</a></span
                    >.<span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.x">x</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.radius">radius</a></span
                    >
                    <span class="textcolor" style="color: #000000">*</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="library-math#pgf.math">math</a></span
                    >.<span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.cos">cos</a></span
                    ><span class="textcolor" style="color: #800080"
                      >(i * alpha)</span
                    ><br />
                    <span class="spaces">          </span><span
                      class="textcolor"
                      style="color: #000000"
                      >vertex</span
                    >.<span class="textcolor" style="color: #000000"
                      ><a href="tikz-shapes#pgf.pos">pos</a></span
                    >.<span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.y">y</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.radius">radius</a></span
                    >
                    <span class="textcolor" style="color: #000000">*</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="library-math#pgf.math">math</a></span
                    >.<span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.sin">sin</a></span
                    ><span class="textcolor" style="color: #800080"
                      >(i * alpha)</span
                    ><br />
                    <span class="spaces">        </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                    <span class="spaces">      </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                    <span class="spaces">  </span>},<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >summary</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">"This</span>
                    <span class="textcolor" style="color: #000000"
                      >algorithm</span
                    >
                    <span class="textcolor" style="color: #000000">is</span>
                    <span class="textcolor" style="color: #000000">the</span>
                    <span class="textcolor" style="color: #000000">'Hello</span>
                    <span class="textcolor" style="color: #000000">World'</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.of">of</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.graph">graph</a></span
                    >
                    <span class="textcolor" style="color: #000000">drawing</span
                    >.<span class="textcolor" style="color: #000000">"</span
                    >,<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >documentation</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    [<span class="textcolor" style="color: #008000">["</span
                    ><br />
                    <br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #008000"
                      >This algorithm arranges nodes in a circle ...</span
                    ><br />
                    <br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #008000"
                      >"</span
                    >]<span class="textcolor" style="color: #000000">]</span
                    ><br />
                    }<br />
                  </code>
                </div>
              </figure>
              <p>
                On the display layer (<span class="tikzname">TikZ</span>, that
                is) the algorithm can now immediately be employed; you just need
                to say
                <span class="verb">\usegdlibrary{examples.SimpleDemo}</span> at
                the beginning somewhere.
              </p>
            </ul>
          </div>
          <h6 id="autosec-4876">
            <span
              ><span class="sectionnumber" id="sec-36.8.2">36.8.2</span> How To
              Generate Edges Inside an Algorithm</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.8.2"
              data-pdf-destination="subsubsection.36.8.2"
              data-pdf-page="532"
              href="#sec-36.8.2"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4876"></a>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <a id="pgf.simple:edge:demo:layout"></a>
                    <span class="hl-def"
                      ><kbd
                        >/graph drawing/<span
                          class="textcolor"
                          style="color: #bf0000"
                          >simple edge demo layout</span
                        ><span class="textcolor" style="color: #008000"
                          >=</span
                        ></kbd
                      ><span class="textcolor" style="color: #008000"
                        ><span class="angle">&langle;</span><i>string</i
                        ><span class="angle">&rangle;</span></span
                      ></span
                    >
                    <a
                      class="anchor-link"
                      data-html-link="pgf.simple:edge:demo:layout"
                      href="#pgf.simple:edge:demo:layout"
                      id="pgf.simple:edge:demo:layout"
                      >&para;</a
                    >
                  </p>
                </li>
              </div>
              <p>
                This algorithm shows how edges can be created by an algorithm.
                For its job, the algorithm uses the function
                <span class="verb">createEdge</span>, which can be called during
                the run of the algorithm to create edges in the syntactic graph.
                The algorithm first does exactly the same as the simple demo
                layout, then it creates an edge for every node where the
                <span class="verb">new edge to</span> option is set. You will
                see in the code how this option is declared and how we use it to
                look up a vertex in the graph by its name.
              </p>

              <figure class="example">
                <div class="example-image">
                  <p>
                    <span
                      class="lateximagesource"
                      id="lateximage-pgfmanual-2046"
                      ><!--
    f

e a




d b

    c
--><img
                        alt="(-tikz-&nbsp;diagram)"
                        class="lateximage"
                        height="161.546"
                        loading="lazy"
                        src="pgfmanual-images/image-2046.png"
                        style
                        width="141.050"
                    /></span>
                  </p>
                </div>

                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <span class="codepreamble"
                      >\usetikzlibrary {graphs,graphdrawing} \usegdlibrary
                      {examples} </span
                    ><br />
                    <span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-scopes#pgf.back/tikz">\tikz</a></span
                    > [<span class="textcolor" style="color: #008000"
                      ><a href="gd-algorithm-layer#pgf.simple:edge:demo:layout"
                        >simple edge demo layout</a
                      ></span
                    >]<br />
                    <span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-graphs#pgf.back/graph">\graph</a></span
                    > [<span class="textcolor" style="color: #008000"
                      ><a href="tikz-coordinates#pgf.radius">radius</a></span
                    >=<span class="textcolor" style="color: #008000">2cm</span
                    >] {<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >a</span
                    >, <span class="textcolor" style="color: #000000"
                      >b</span
                    >, <span class="textcolor" style="color: #000000"
                      >c</span
                    >, <span class="textcolor" style="color: #000000"
                      >d</span
                    >, <span class="textcolor" style="color: #000000"
                      >e</span
                    >, <span class="textcolor" style="color: #000000"
                      >f</span
                    >;<br />
                    <br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >e</span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.-&gt;">-&gt;</a></span
                    >
                    [<span class="textcolor" style="color: #008000">red</span
                    >] <span class="textcolor" style="color: #000000"
                      >f</span
                    >;<span class="spaces"> </span><span class="example-code-comment"
                      >% normal edge</span
                    ><br />
                    <br />
                    <span class="spaces">  </span><span class="example-code-comment"
                      >% Edges generated by the algorithm:</span
                    ><br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >a</span
                    >[<span class="textcolor" style="color: #008000"
                      ><a href="gd-algorithm-layer#pgf.new:edge:to"
                        >new edge to</a
                      ></span
                    >=<span class="textcolor" style="color: #008000">b</span
                    >];<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >b</span
                    >[<span class="textcolor" style="color: #008000"
                      ><a href="gd-algorithm-layer#pgf.new:edge:to"
                        >new edge to</a
                      ></span
                    >=<span class="textcolor" style="color: #008000">d</span
                    >];<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >c</span
                    >[<span class="textcolor" style="color: #008000"
                      ><a href="gd-algorithm-layer#pgf.new:edge:to"
                        >new edge to</a
                      ></span
                    >=<span class="textcolor" style="color: #008000">f</span
                    >];<br />
                    };<br />
                  </code>
                </div>
              </figure>
              <p>And the algorithm:</p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.--">--</a></span
                    >
                    <span class="textcolor" style="color: #000000">File</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="base-scopes#pgf.pgf">pgf</a></span
                    >.<span class="textcolor" style="color: #000000">gd</span
                    >.<span class="textcolor" style="color: #000000"
                      ><a href="gd-algorithm-layer#pgf.examples"
                        >examples</a
                      ></span
                    >.<span class="textcolor" style="color: #000000"
                      >SimpleEdgeDemo</span
                    ><br />
                    <br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.--">--</a></span
                    >
                    <span class="textcolor" style="color: #000000">Imports</span
                    ><br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >InterfaceToAlgorithms</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >require</span
                    >
                    <span class="textcolor" style="color: #000000">"pgf</span
                    >.<span class="textcolor" style="color: #000000">gd</span
                    >.<span class="textcolor" style="color: #000000"
                      >interface</span
                    >.<span class="textcolor" style="color: #000000"
                      >InterfaceToAlgorithms"</span
                    ><br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    >
                    <span class="spaces">              </span><span
                      class="textcolor"
                      style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >InterfaceToAlgorithms</span
                    >.<span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    ><br />
                    <br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.--">--</a></span
                    >
                    <span class="textcolor" style="color: #000000">The</span>
                    <span class="textcolor" style="color: #000000"
                      >class</span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-animations#pgf.object">object</a></span
                    ><br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >SimpleEdgeDemo</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    {}<br />
                    <br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    >
                    {<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >key</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >"simple</span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-shapes#pgf.edge">edge</a></span
                    >
                    <span class="textcolor" style="color: #000000">demo</span>
                    <span class="textcolor" style="color: #000000">layout"</span
                    >,<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >algorithm</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >SimpleEdgeDemo</span
                    >,<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >summary</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">"This</span>
                    <span class="textcolor" style="color: #000000"
                      >algorithm</span
                    >
                    <span class="textcolor" style="color: #000000">shows</span
                    >...<span class="textcolor" style="color: #000000">"</span
                    >,<br />
                    }<br />
                  </code>
                </div>
              </figure>
              <p>
                Next comes the declaration of the new option
                <span class="verb">new edge to</span>:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    >
                    {<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >key</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">"new</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-shapes#pgf.edge">edge</a></span
                    >
                    <span class="textcolor" style="color: #000000">to"</span
                    >,<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      ><a href="library-patterns#pgf.type">type</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >"string"</span
                    >,<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >summary</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">"This</span>
                    <span class="textcolor" style="color: #000000">option</span>
                    <span class="textcolor" style="color: #000000">takes</span>
                    <span class="textcolor" style="color: #000000">the</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-scopes#pgf.name">name</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.of">of</a></span
                    >
                    <span class="textcolor" style="color: #000000">a</span>
                    <span class="textcolor" style="color: #000000">vertex</span
                    >...<span class="textcolor" style="color: #000000">"</span
                    ><br />
                    }<br />
                  </code>
                </div>
              </figure>
              <p>Finally, the algorithm&rsquo;s code:</p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="dv-formats#pgf.function">function</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      >SimpleEdgeDemo:run</span
                    ><span class="textcolor" style="color: #800080">()</span
                    ><br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.--">--</a></span
                    >
                    <span class="textcolor" style="color: #000000">As</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="library-edges#pgf.in">in</a></span
                    >
                    <span class="textcolor" style="color: #000000">a</span>
                    <span class="textcolor" style="color: #000000"
                      >SimpleDemo:</span
                    ><br />
                    <span class="spaces">  </span>...<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.--">--</a></span
                    >
                    <span class="textcolor" style="color: #000000">Now</span>
                    <span class="textcolor" style="color: #000000">add</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="dv-axes#pgf.some">some</a></span
                    >
                    <span class="textcolor" style="color: #000000">edges:</span
                    ><br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >for</span
                    >
                    <span class="textcolor" style="color: #000000">_</span
                    >,<span class="textcolor" style="color: #000000">tail</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="library-edges#pgf.in">in</a></span
                    >
                    <span class="textcolor" style="color: #000000">ipairs</span
                    ><span class="textcolor" style="color: #800080"
                      >(g.vertices)</span
                    > <span class="textcolor" style="color: #000000"
                      >do</span
                    ><br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-scopes#pgf.name">name</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">tail</span
                    >.<span class="textcolor" style="color: #000000"
                      >options</span
                    >[<span class="textcolor" style="color: #008000"
                      >'new edge to'</span
                    >]<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="library-calender#pgf.if">if</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-scopes#pgf.name">name</a></span
                    >
                    <span class="textcolor" style="color: #000000">then</span
                    ><br />
                    <span class="spaces">      </span><span
                      class="textcolor"
                      style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.node">node</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >InterfaceToAlgorithms</span
                    >.<span class="textcolor" style="color: #000000"
                      >findVertexByName</span
                    ><span class="textcolor" style="color: #800080">(name)</span
                    ><br />
                    <span class="spaces">      </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="library-calender#pgf.if">if</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.node">node</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="pgfkeys#pgf.and">and</a></span
                    >
                    <span class="textcolor" style="color: #000000">self</span
                    >.<span class="textcolor" style="color: #000000"
                      >digraph:contains</span
                    ><span class="textcolor" style="color: #800080">(node)</span
                    > <span class="textcolor" style="color: #000000"
                      >then</span
                    ><br />
                    <span class="spaces">        </span><span
                      class="textcolor"
                      style="color: #000000"
                      >InterfaceToAlgorithms</span
                    >.<span class="textcolor" style="color: #000000"
                      >createEdge</span
                    >
                    <span class="textcolor" style="color: #800080"
                      >(self, tail, node)</span
                    ><br />
                    <span class="spaces">      </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                  </code>
                </div>
              </figure>
            </ul>
          </div>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <a id="pgf.new:edge:to"></a>
                    <span class="hl-def"
                      ><kbd
                        >/graph drawing/<span
                          class="textcolor"
                          style="color: #bf0000"
                          >new edge to</span
                        ><span class="textcolor" style="color: #008000"
                          >=</span
                        ></kbd
                      ><span class="textcolor" style="color: #008000"
                        ><span class="angle">&langle;</span><i>string</i
                        ><span class="angle">&rangle;</span></span
                      ></span
                    >
                    <a
                      class="anchor-link"
                      data-html-link="pgf.new:edge:to"
                      href="#pgf.new:edge:to"
                      id="pgf.new:edge:to"
                      >&para;</a
                    >
                  </p>
                </li>
              </div>
              <p>
                This option takes the name of a vertex. An edge leading to this
                vertex is added to the syntactic digraph.
              </p>
            </ul>
          </div>
          <h6 id="autosec-4879">
            <span
              ><span class="sectionnumber" id="sec-36.8.3">36.8.3</span> How To
              Generate Nodes Inside an Algorithm</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.8.3"
              data-pdf-destination="subsubsection.36.8.3"
              data-pdf-page="533"
              href="#sec-36.8.3"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4879"></a>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <a id="pgf.simple:Huffman:layout"></a>
                    <span class="hl-def"
                      ><kbd
                        >/graph drawing/<span
                          class="textcolor"
                          style="color: #bf0000"
                          >simple Huffman layout</span
                        ><span class="textcolor" style="color: #008000"
                          >=</span
                        ></kbd
                      ><span class="textcolor" style="color: #008000"
                        ><span class="angle">&langle;</span><i>string</i
                        ><span class="angle">&rangle;</span></span
                      ></span
                    >
                    <a
                      class="anchor-link"
                      data-html-link="pgf.simple:Huffman:layout"
                      href="#pgf.simple:Huffman:layout"
                      id="pgf.simple:Huffman:layout"
                      >&para;</a
                    >
                  </p>
                </li>
              </div>
              <p>
                This algorithm demonstrates how an algorithm can generate new
                nodes. The input graph should just consist of some nodes
                (without edges) and each node should have a
                <span class="verb">probability</span> key set. The nodes will
                then be arranged in a line (as siblings) and a Huffman tree will
                be constructed &ldquo;above&rdquo; these nodes. For the
                construction of the Huffman tree, new nodes are created and
                connected.
              </p>

              <figure class="example">
                <div class="example-image">
                  <p>
                    <span
                      class="lateximagesource"
                      id="lateximage-pgfmanual-2047"
                      ><!--
0.5 0.12 0.2 0.1 0.11
 a b c d e
                     0 1
       0 1

   0 0
             1

         1
--><img
                        alt="(-tikz-&nbsp;diagram)"
                        class="lateximage"
                        height="133.658"
                        loading="lazy"
                        src="pgfmanual-images/image-2047.png"
                        style
                        width="145.250"
                    /></span>
                  </p>
                </div>

                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <span class="codepreamble"
                      >\usetikzlibrary {graphs,graphdrawing,quotes}
                      \usegdlibrary {examples} </span
                    ><br />
                    <span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-scopes#pgf.back/tikz">\tikz</a></span
                    > <span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-graphs#pgf.back/graph">\graph</a></span
                    > [<span class="textcolor" style="color: #008000"
                      ><a href="gd-algorithm-layer#pgf.simple:Huffman:layout"
                        >simple Huffman layout</a
                      ></span
                    >,<br />
                    <span class="spaces">              </span><span
                      class="textcolor"
                      style="color: #008000"
                      ><a href="tikz-trees#pgf.level:distance"
                        >level distance</a
                      ></span
                    >=<span class="textcolor" style="color: #008000">7mm</span
                    >, <span class="textcolor" style="color: #008000"
                      ><a href="tikz-trees#pgf.sibling:distance"
                        >sibling distance</a
                      ></span
                    >=<span class="textcolor" style="color: #008000">8mm</span
                    >, <span class="textcolor" style="color: #008000"
                      ><a href="tikz-trees#pgf.grow'">grow'</a></span
                    >=<span class="textcolor" style="color: #008000">up</span
                    >]<br />
                    {<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >a</span
                    >
                    [<span class="textcolor" style="color: #008000">"0.5"</span
                    >,<span class="spaces">  </span><span
                      class="textcolor"
                      style="color: #008000"
                      ><a href="gd-algorithm-layer#pgf.probability"
                        >probability</a
                      ></span
                    >=<span class="textcolor" style="color: #008000">0.5</span
                    >],<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >b</span
                    >
                    [<span class="textcolor" style="color: #008000">"0.12"</span
                    >, <span class="textcolor" style="color: #008000"
                      ><a href="gd-algorithm-layer#pgf.probability"
                        >probability</a
                      ></span
                    >=<span class="textcolor" style="color: #008000">0.12</span
                    >],<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >c</span
                    >
                    [<span class="textcolor" style="color: #008000">"0.2"</span
                    >,<span class="spaces">  </span><span
                      class="textcolor"
                      style="color: #008000"
                      ><a href="gd-algorithm-layer#pgf.probability"
                        >probability</a
                      ></span
                    >=<span class="textcolor" style="color: #008000">0.2</span
                    >],<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >d</span
                    >
                    [<span class="textcolor" style="color: #008000">"0.1"</span
                    >,<span class="spaces">  </span><span
                      class="textcolor"
                      style="color: #008000"
                      ><a href="gd-algorithm-layer#pgf.probability"
                        >probability</a
                      ></span
                    >=<span class="textcolor" style="color: #008000">0.1</span
                    >],<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >e</span
                    >
                    [<span class="textcolor" style="color: #008000">"0.11"</span
                    >, <span class="textcolor" style="color: #008000"
                      ><a href="gd-algorithm-layer#pgf.probability"
                        >probability</a
                      ></span
                    >=<span class="textcolor" style="color: #008000">0.11</span
                    >]<br />
                    };<br />
                  </code>
                </div>
              </figure>
              <p>The file starts with some setups and declarations:</p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.--">--</a></span
                    >
                    <span class="textcolor" style="color: #000000">File</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="base-scopes#pgf.pgf">pgf</a></span
                    >.<span class="textcolor" style="color: #000000">gd</span
                    >.<span class="textcolor" style="color: #000000"
                      ><a href="gd-algorithm-layer#pgf.examples"
                        >examples</a
                      ></span
                    >.<span class="textcolor" style="color: #000000"
                      >SimpleHuffman</span
                    ><br />
                    <br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >require</span
                    >
                    <span class="textcolor" style="color: #000000">"pgf</span
                    >.<span class="textcolor" style="color: #000000">gd</span
                    >.<span class="textcolor" style="color: #000000"
                      >interface</span
                    >.<span class="textcolor" style="color: #000000"
                      >InterfaceToAlgorithms"</span
                    >.<span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    ><br />
                    <br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.--">--</a></span
                    >
                    <span class="textcolor" style="color: #000000">The</span>
                    <span class="textcolor" style="color: #000000"
                      >class</span
                    ><br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000"
                      >SimpleHuffman</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    {}<br />
                    <br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    >
                    {<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >key</span
                    >
                    <span class="spaces">           </span><span
                      class="textcolor"
                      style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >"simple</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >Huffman</span
                    >
                    <span class="textcolor" style="color: #000000">layout"</span
                    >,<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >algorithm</span
                    >
                    <span class="spaces">     </span><span
                      class="textcolor"
                      style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >SimpleHuffman</span
                    >,<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >postconditions</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    {<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >upward_oriented</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="pgfkeys#pgf.true">true</a></span
                    >
                    <span class="spaces"> </span>}<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >summary</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">"</span
                    >...<span class="textcolor" style="color: #000000">"</span
                    ><br />
                    }<br />
                    <br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.declare">declare</a></span
                    >
                    {<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >key</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >"probability"</span
                    >,<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      ><a href="library-patterns#pgf.type">type</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >"number"</span
                    >,<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      ><a href="library-automata#pgf.initial">initial</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">"1"</span
                    >,<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >summary</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">"</span
                    >...<span class="textcolor" style="color: #000000">"</span
                    ><br />
                    }<br />
                    <br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.--">--</a></span
                    >
                    <span class="textcolor" style="color: #000000">Import</span
                    ><br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="gd-layered#pgf.layered">layered</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >require</span
                    >
                    <span class="textcolor" style="color: #000000">"pgf</span
                    >.<span class="textcolor" style="color: #000000">gd</span
                    >.<span class="textcolor" style="color: #000000"
                      >layered"</span
                    ><br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000"
                      >InterfaceToAlgorithms</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >require</span
                    >
                    <span class="textcolor" style="color: #000000">"pgf</span
                    >.<span class="textcolor" style="color: #000000">gd</span
                    >.<span class="textcolor" style="color: #000000"
                      >interface</span
                    >.<span class="textcolor" style="color: #000000"
                      >InterfaceToAlgorithms"</span
                    ><br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000"
                      >Storage</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >require</span
                    >
                    <span class="textcolor" style="color: #000000">"pgf</span
                    >.<span class="textcolor" style="color: #000000">gd</span
                    >.<span class="textcolor" style="color: #000000">lib</span
                    >.<span class="textcolor" style="color: #000000"
                      >Storage"</span
                    ><br />
                    <br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="gd-algorithm-layer#pgf.probability"
                        >probability</a
                      ></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">Storage</span
                    >.<span class="textcolor" style="color: #000000">new</span
                    ><span class="textcolor" style="color: #800080">()</span
                    ><br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000">layer</span>
                    <span class="spaces">      </span><span
                      class="textcolor"
                      style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000">Storage</span
                    >.<span class="textcolor" style="color: #000000">new</span
                    ><span class="textcolor" style="color: #800080">()</span
                    ><br />
                    <br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="dv-formats#pgf.function">function</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      >SimpleHuffman:run</span
                    ><span class="textcolor" style="color: #800080">()</span
                    ><br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.--">--</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      >Construct</span
                    >
                    <span class="textcolor" style="color: #000000">a</span>
                    <span class="textcolor" style="color: #000000"
                      >Huffman</span
                    >
                    <span class="textcolor" style="color: #000000">tree</span>
                    <span class="textcolor" style="color: #000000">on</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="base-scopes#pgf.top">top</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.of">of</a></span
                    >
                    <span class="textcolor" style="color: #000000">the</span>
                    <span class="textcolor" style="color: #000000"
                      >vertices</span
                    >...<br />
                  </code>
                </div>
              </figure>
              <p>
                Next comes a setup, where we create the working list of vertices
                that changes as the Huffman coding method proceeds:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.--">--</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      >Shorthand</span
                    ><br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="dv-formats#pgf.function">function</a></span
                    >
                    <span class="textcolor" style="color: #000000">prop</span>
                    <span class="textcolor" style="color: #800080">(v)</span
                    ><br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >return</span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="gd-algorithm-layer#pgf.probability"
                        >probability</a
                      ></span
                    >[<span class="textcolor" style="color: #008000">v</span
                    >] <span class="textcolor" style="color: #000000"
                      ><a href="pgfkeys#pgf.or">or</a></span
                    >
                    <span class="textcolor" style="color: #000000">v</span
                    >.<span class="textcolor" style="color: #000000"
                      >options</span
                    >[<span class="textcolor" style="color: #008000"
                      >'probability'</span
                    >]<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                    <br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.--">--</a></span
                    >
                    <span class="textcolor" style="color: #000000">Copy</span>
                    <span class="textcolor" style="color: #000000">the</span>
                    <span class="textcolor" style="color: #000000">vertex</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="dv-formats#pgf.table">table</a></span
                    >, <span class="textcolor" style="color: #000000"
                      >since</span
                    >
                    <span class="textcolor" style="color: #000000">we</span>
                    <span class="textcolor" style="color: #000000">are</span>
                    <span class="textcolor" style="color: #000000">going</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.to">to</a></span
                    >
                    <span class="textcolor" style="color: #000000">modify</span>
                    <span class="textcolor" style="color: #000000">it:</span
                    ><br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >vertices</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    {}<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >for</span
                    >
                    <span class="textcolor" style="color: #000000">i</span
                    >,<span class="textcolor" style="color: #000000">v</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="library-edges#pgf.in">in</a></span
                    >
                    <span class="textcolor" style="color: #000000">ipairs</span
                    ><span class="textcolor" style="color: #800080"
                      >(self.ugraph.vertices)</span
                    > <span class="textcolor" style="color: #000000"
                      >do</span
                    ><br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >vertices</span
                    >[<span class="textcolor" style="color: #008000">i</span
                    >] <span class="textcolor" style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000">v</span
                    ><br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                  </code>
                </div>
              </figure>
              <p>
                The initial vertices are arranged in a line on the last layer.
                The function
                <span class="verb">ideal_sibling_distance</span> takes care of
                the rather complicated handling of the (possibly rotated)
                bounding boxes and separations. The
                <span class="verb">props</span> and
                <span class="verb">layer</span> are tables used by algorithms to
                &ldquo;store stuff&rdquo; at a vertex or at an arc. The table
                will be accessed by
                <span class="verb">arrange_layers_by_baselines</span> to
                determine the ideal vertical placements.
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.--">--</a></span
                    >
                    <span class="textcolor" style="color: #000000">Now</span
                    >, <span class="textcolor" style="color: #000000"
                      >arrange</span
                    >
                    <span class="textcolor" style="color: #000000">the</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.nodes">nodes</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="library-edges#pgf.in">in</a></span
                    >
                    <span class="textcolor" style="color: #000000">a</span>
                    <span class="textcolor" style="color: #000000">line:</span
                    ><br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >vertices</span
                    >
                    [<span class="textcolor" style="color: #008000">1</span
                    >].<span class="textcolor" style="color: #000000"
                      ><a href="tikz-shapes#pgf.pos">pos</a></span
                    >.<span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.x">x</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">0</span
                    ><br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >layer</span
                    >[<span class="spaces"> </span><span class="textcolor" style="color: #008000"
                      >vertices [1</span
                    >] <span class="textcolor" style="color: #000000"
                      >]</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >#vertices</span
                    ><br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >for</span
                    >
                    <span class="textcolor" style="color: #000000">i=2</span
                    >,<span class="textcolor" style="color: #000000"
                      >#vertices</span
                    >
                    <span class="textcolor" style="color: #000000">do</span
                    ><br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000">d</span>
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="gd-layered#pgf.layered">layered</a></span
                    >.<span class="textcolor" style="color: #000000"
                      >ideal_sibling_distance</span
                    ><span class="textcolor" style="color: #800080"
                      >(self.adjusted_bb, self.ugraph, vertices[i-1],
                      vertices[i])</span
                    ><br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >vertices</span
                    >
                    [<span class="textcolor" style="color: #008000">i</span
                    >].<span class="textcolor" style="color: #000000"
                      ><a href="tikz-shapes#pgf.pos">pos</a></span
                    >.<span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.x">x</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >vertices</span
                    >[<span class="textcolor" style="color: #008000">i-1</span
                    >].<span class="textcolor" style="color: #000000"
                      ><a href="tikz-shapes#pgf.pos">pos</a></span
                    >.<span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.x">x</a></span
                    >
                    <span class="textcolor" style="color: #000000">+</span>
                    <span class="textcolor" style="color: #000000">d</span
                    ><br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >layer</span
                    >[<span class="spaces"> </span><span class="textcolor" style="color: #008000"
                      >vertices [i</span
                    >] <span class="textcolor" style="color: #000000"
                      >]</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >#vertices</span
                    ><br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                  </code>
                </div>
              </figure>
              <p>
                Now comes the actual Huffman algorithm: Always find the vertices
                with a minimal probability&hellip;
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.--">--</a></span
                    >
                    <span class="textcolor" style="color: #000000">Now</span
                    >, <span class="textcolor" style="color: #000000"
                      >do</span
                    >
                    <span class="textcolor" style="color: #000000">the</span>
                    <span class="textcolor" style="color: #000000"
                      >Huffman</span
                    >
                    <span class="textcolor" style="color: #000000">thing</span
                    >...<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >while</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >#vertices</span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-arrows#pgf.&gt;">&gt;</a></span
                    >
                    <span class="textcolor" style="color: #000000">1</span>
                    <span class="textcolor" style="color: #000000">do</span
                    ><br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="tikz-paths#pgf.--">--</a></span
                    >
                    <span class="textcolor" style="color: #000000">Find</span>
                    <span class="textcolor" style="color: #000000">two</span>
                    <span class="textcolor" style="color: #000000"
                      >minimum</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >probabilities</span
                    ><br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000">min1</span
                    >, <span class="textcolor" style="color: #000000"
                      >min2</span
                    ><br />
                    <br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >for</span
                    >
                    <span class="textcolor" style="color: #000000">i=1</span
                    >,<span class="textcolor" style="color: #000000"
                      >#vertices</span
                    >
                    <span class="textcolor" style="color: #000000">do</span
                    ><br />
                    <span class="spaces">      </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="library-calender#pgf.if">if</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="pgfkeys#pgf.not">not</a></span
                    >
                    <span class="textcolor" style="color: #000000">min1</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="pgfkeys#pgf.or">or</a></span
                    >
                    <span class="textcolor" style="color: #000000">prop</span
                    ><span class="textcolor" style="color: #800080"
                      >(vertices[i])</span
                    > <span class="textcolor" style="color: #000000"
                      >&lt;</span
                    >
                    <span class="textcolor" style="color: #000000">prop</span
                    ><span class="textcolor" style="color: #800080"
                      >(vertices[min1])</span
                    > <span class="textcolor" style="color: #000000"
                      >then</span
                    ><br />
                    <span class="spaces">        </span><span
                      class="textcolor"
                      style="color: #000000"
                      >min2</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">min1</span
                    ><br />
                    <span class="spaces">        </span><span
                      class="textcolor"
                      style="color: #000000"
                      >min1</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">i</span
                    ><br />
                    <span class="spaces">      </span><span
                      class="textcolor"
                      style="color: #000000"
                      >elseif</span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="pgfkeys#pgf.not">not</a></span
                    >
                    <span class="textcolor" style="color: #000000">min2</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="pgfkeys#pgf.or">or</a></span
                    >
                    <span class="textcolor" style="color: #000000">prop</span
                    ><span class="textcolor" style="color: #800080"
                      >(vertices[i])</span
                    > <span class="textcolor" style="color: #000000"
                      >&lt;</span
                    >
                    <span class="textcolor" style="color: #000000">prop</span
                    ><span class="textcolor" style="color: #800080"
                      >(vertices[min2])</span
                    > <span class="textcolor" style="color: #000000"
                      >then</span
                    ><br />
                    <span class="spaces">        </span><span
                      class="textcolor"
                      style="color: #000000"
                      >min2</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">i</span
                    ><br />
                    <span class="spaces">      </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                  </code>
                </div>
              </figure>
              <p>
                &hellip;and connect them with a new node. This new node gets the
                option <span class="verb">HuffmanNode</span>. It is now the job
                of the higher layers to map this option to something
                &ldquo;nice&rdquo;.
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="tikz-paths#pgf.--">--</a></span
                    >
                    <span class="textcolor" style="color: #000000">Create</span>
                    <span class="textcolor" style="color: #000000">new</span>
                    <span class="textcolor" style="color: #000000">node:</span
                    ><br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="library-perspective#pgf.p">p</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">prop</span
                    ><span class="textcolor" style="color: #800080"
                      >(vertices[min1])</span
                    > <span class="textcolor" style="color: #000000"
                      >+</span
                    >
                    <span class="textcolor" style="color: #000000">prop</span
                    ><span class="textcolor" style="color: #800080"
                      >(vertices[min2])</span
                    ><br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000">v</span>
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >InterfaceToAlgorithms</span
                    >.<span class="textcolor" style="color: #000000"
                      >createVertex</span
                    ><span class="textcolor" style="color: #800080"
                      >(self, { generated_options =
                      {{key="HuffmanNode"}}})</span
                    ><br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="gd-algorithm-layer#pgf.probability"
                        >probability</a
                      ></span
                    >[<span class="textcolor" style="color: #008000">v</span
                    >] <span class="textcolor" style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="library-perspective#pgf.p">p</a></span
                    ><br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >layer</span
                    >[<span class="textcolor" style="color: #008000">v</span
                    >] <span class="textcolor" style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >#vertices-1</span
                    ><br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >v</span
                    >.<span class="textcolor" style="color: #000000"
                      ><a href="tikz-shapes#pgf.pos">pos</a></span
                    >.<span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.x">x</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #800080"
                      >(vertices[min1].pos.x + vertices[min2].pos.x)</span
                    ><span class="textcolor" style="color: #000000">/2</span
                    ><br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >vertices</span
                    >[<span class="textcolor" style="color: #008000"
                      >#vertices + 1</span
                    >] <span class="textcolor" style="color: #000000"
                      >=</span
                    >
                    <span class="textcolor" style="color: #000000">v</span
                    ><br />
                    <br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >InterfaceToAlgorithms</span
                    >.<span class="textcolor" style="color: #000000"
                      >createEdge</span
                    >
                    <span class="textcolor" style="color: #800080"
                      >(self, v, vertices[min1],<br />
                      {generated_options = {{key="HuffmanLabel", value =
                      "0"}}})</span
                    ><br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      >InterfaceToAlgorithms</span
                    >.<span class="textcolor" style="color: #000000"
                      >createEdge</span
                    >
                    <span class="textcolor" style="color: #800080"
                      >(self, v, vertices[min2],<br />
                      {generated_options = {{key="HuffmanLabel", value =
                      "1"}}})</span
                    ><br />
                    <br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="dv-formats#pgf.table">table</a></span
                    >.<span class="textcolor" style="color: #000000"
                      >remove</span
                    ><span class="textcolor" style="color: #800080"
                      >(vertices, math.max(min1, min2)</span
                    >)<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="dv-formats#pgf.table">table</a></span
                    >.<span class="textcolor" style="color: #000000"
                      >remove</span
                    ><span class="textcolor" style="color: #800080"
                      >(vertices, math.min(min1, min2)</span
                    >)<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                  </code>
                </div>
              </figure>
              <p>
                Ok, we are mainly done now. Finish by computing vertical
                placements and do formal cleanup.
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      ><a href="gd-layered#pgf.layered">layered</a></span
                    >.<span class="textcolor" style="color: #000000"
                      >arrange_layers_by_baselines</span
                    ><span class="textcolor" style="color: #800080"
                      >(layers, self.adjusted_bb, self.ugraph)</span
                    ><br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                  </code>
                </div>
              </figure>
              <p>
                In order to use the class, we have to make sure that, on the
                display layer, the options
                <span class="verb">HuffmanLabel</span> and
                <span class="verb">HuffmanNode</span> are defined. This is done
                by adding, for instance, the following to
                <span class="tikzname">TikZ</span>:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="pgfkeys#pgf.back/pgfkeys">\pgfkeys</a></span
                    >{<span class="textcolor" style="color: #000000"
                      ><br />
                      <span class="spaces">  </span><span
                        class="textcolor"
                        style="color: #008000"
                        >/graph drawing/HuffmanLabel</span
                      >/<span class="textcolor" style="color: #0000b2"
                        ><a href="pgfkeys#pgf./handlers/.style">.style</a></span
                      >={<br />
                      <span class="spaces">    </span><span
                        class="textcolor"
                        style="color: #008000"
                        ><a href="tikz-paths#pgf./tikz/edge:node"
                          >/tikz/edge node</a
                        ></span
                      >=<span class="textcolor" style="color: #008000"
                        >{<a href="tikz-coordinates#pgf.node">node</a>[<span
                          class="textcolor"
                          style="color: #008000"
                          ><a href="tikz-actions#pgf.fill">fill</a></span
                        >=<span class="textcolor" style="color: #008000"
                          >white</span
                        >,<span class="textcolor" style="color: #008000"
                          ><a href="tikz-shapes#pgf.font">font</a></span
                        >=<span class="textcolor" style="color: #008000"
                          ><span class="textcolor" style="color: #0000b2"
                            >\footnotesize</span
                          ></span
                        >,<span class="textcolor" style="color: #008000"
                          ><a href="tikz-shapes#pgf.inner:sep"
                            >inner sep</a
                          ></span
                        >=<span class="textcolor" style="color: #008000"
                          >1pt</span
                        >]{#1}}<br />
                        <span class="spaces">  </span>}</span
                      >,<br />
                      <span class="spaces">  </span><span
                        class="textcolor"
                        style="color: #008000"
                        >/graph drawing/HuffmanNode</span
                      >/<span class="textcolor" style="color: #0000b2"
                        ><a href="pgfkeys#pgf./handlers/.style">.style</a></span
                      >={<br />
                      <span class="spaces">    </span><span
                        class="textcolor"
                        style="color: #008000"
                        >/tikz</span
                      >/<span class="textcolor" style="color: #0000b2"
                        ><a href="pgfkeys#pgf./handlers/.cd">.cd</a></span
                      >,<span class="textcolor" style="color: #008000"
                        ><a href="tikz-paths#pgf.circle">circle</a></span
                      >,<span class="textcolor" style="color: #008000"
                        ><a href="tikz-shapes#pgf.inner:sep">inner sep</a></span
                      >=<span class="textcolor" style="color: #008000">0pt</span
                      >,<span class="textcolor" style="color: #008000"
                        ><a href="tikz-shapes#pgf.outer:sep">outer sep</a></span
                      >=<span class="textcolor" style="color: #008000">0pt</span
                      >,<span class="textcolor" style="color: #008000"
                        ><a href="tikz-actions#pgf.draw">draw</a></span
                      >,<span class="textcolor" style="color: #008000"
                        ><a href="tikz-shapes#pgf.minimum:size"
                          >minimum size</a
                        ></span
                      >=<span class="textcolor" style="color: #008000"
                        >3pt<br />
                        <span class="spaces">  </span>}<br /> </span></span
                    >}<br />
                  </code>
                </div>
              </figure>
            </ul>
          </div>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <a id="pgf.probability"></a>
                    <span class="hl-def"
                      ><kbd
                        >/graph drawing/<span
                          class="textcolor"
                          style="color: #bf0000"
                          >probability</span
                        ><span class="textcolor" style="color: #008000"
                          >=</span
                        ></kbd
                      ><span class="textcolor" style="color: #008000"
                        ><span class="angle">&langle;</span><i>number</i
                        ><span class="angle">&rangle;</span></span
                      ></span
                    >(initially <kbd>1</kbd>)
                    <a
                      class="anchor-link"
                      data-html-link="pgf.probability"
                      href="#pgf.probability"
                      id="pgf.probability"
                      >&para;</a
                    >
                  </p>
                </li>
              </div>
              <p>
                The probability parameter. It is used by the Huffman algorithm
                to group nodes.
              </p>
            </ul>
          </div>
          <h5 id="autosec-4883">
            <a id="section-gd-libs"></a
            ><span
              ><span class="sectionnumber" id="sec-36.9">36.9</span> Support
              Libraries</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.9"
              data-pdf-destination="subsection.36.9"
              data-pdf-page="535"
              href="#sec-36.9"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-4883"></a>

          <p>
            The present section lists a number of general-purpose libraries that
            are used by different algorithms.
          </p>
          <h6 id="autosec-4884">
            <span
              ><span class="sectionnumber" id="sec-36.9.1">36.9.1</span> Basic
              Functions</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.9.1"
              data-pdf-destination="subsubsection.36.9.1"
              data-pdf-page="535"
              href="#sec-36.9.1"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4884"></a>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><b>Lua table</b>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >pgf
                        </span></kbd
                      >
                      (declared in <kbd>pgf</kbd>)</span
                    >
                  </p>
                </li>
              </div>
              <p>
                The <span class="verb">pgf</span> namespace lies in the global
                namespace. It is the only global table defined by
                <span class="textsc">pgf</span>. The whole graph drawing system,
                in turn, lies in the table <span class="verb">pgf.gd</span>.
              </p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/pgf.debug"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >pgf.<span class="textcolor" style="color: #bf0000"
                          >debug</span
                        ></kbd
                      ><kbd>(...)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Writes debug info on the
                <span class="latexlogofont"
                  ><span class="latexlogo"
                    >T<span class="latexlogosub">e</span>X</span
                  ></span
                >
                output, separating the parameters by spaces. The debug
                information will include a complete traceback of the stack,
                allowing you to see &ldquo;where you are&rdquo; inside the Lua
                program.
              </p>
              <p>
                Note that this function resides directly in the
                <span class="verb">pgf</span> table. The reason for this is that
                you can &ldquo;always use it&rdquo; since
                <span class="verb">pgf</span> is always available in the global
                name space.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>...</kbd> List of
                parameters to write to the
                <span class="latexlogofont"
                  ><span class="latexlogo"
                    >T<span class="latexlogosub">e</span>X</span
                  ></span
                >
                output.
              </p>
              <p></p>
            </ul>
          </div>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><b>Lua table</b>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >lib</span
                        ></kbd
                      >
                      (declared in <kbd>pgf.gd.lib</kbd>)</span
                    >
                  </p>
                </li>
              </div>
              <p>Basic library functions</p>
              <p>
                <em>Alphabetical method summary:</em>
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/lib.class"
                    >function lib.<span class="textcolor" style="color: #bf0000"
                      >class</span
                    >
                    (t)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/lib.copy"
                    >function lib.<span class="textcolor" style="color: #bf0000"
                      >copy</span
                    >
                    (source, target)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/lib.find_min"
                    >function lib.<span class="textcolor" style="color: #bf0000"
                      >find_min</span
                    >
                    (array, f)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/lib.find"
                    >function lib.<span class="textcolor" style="color: #bf0000"
                      >find</span
                    >
                    (array, test)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/lib.icopy"
                    >function lib.<span class="textcolor" style="color: #bf0000"
                      >icopy</span
                    >
                    (source, target)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/lib.id"
                    >function lib.<span class="textcolor" style="color: #bf0000"
                      >id</span
                    >
                    (...)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/lib.imap"
                    >function lib.<span class="textcolor" style="color: #bf0000"
                      >imap</span
                    >
                    (source, fun, new)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/lib.lookup_option"
                    >function lib.<span class="textcolor" style="color: #bf0000"
                      >lookup_option</span
                    >
                    (name, ...)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/lib.map"
                    >function lib.<span class="textcolor" style="color: #bf0000"
                      >map</span
                    >
                    (source, fun)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/lib.ondemand"
                    >function lib.<span class="textcolor" style="color: #bf0000"
                      >ondemand</span
                    >
                    (filename, table, name)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/lib.random_permutation"
                    >function lib.<span class="textcolor" style="color: #bf0000"
                      >random_permutation</span
                    >
                    (n)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/lib.randomseed"
                    >function lib.<span class="textcolor" style="color: #bf0000"
                      >randomseed</span
                    >
                    (seed)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/lib.random"
                    >function lib.<span class="textcolor" style="color: #bf0000"
                      >random</span
                    >
                    (l,u)</a
                  ></kbd
                >
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/lib.find"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >lib.<span class="textcolor" style="color: #bf0000"
                          >find</span
                        ></kbd
                      ><kbd>(array, test)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Finds the first value in the <span class="verb">array</span> for
                which <span class="verb">test</span> is true.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>array</kbd> An array to
                search in. <em>2.</em> <kbd>test</kbd> A function that is
                applied to each element of the array together with the index of
                the element and the whole table.
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> The value of the first value where
                the test is true.
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> The index of the first value where
                the test is true.
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> The function value of the first
                value where the test is true (only returned if test is a
                function).
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/lib.find_min"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >lib.<span class="textcolor" style="color: #bf0000"
                          >find_min</span
                        ></kbd
                      ><kbd>(array, f)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Finds the first value in the <span class="verb">array</span> for
                which a function returns a minimal value
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>array</kbd> An array to
                search in. <em>2.</em> <kbd>f</kbd> A function that is applied
                to each element of the array together with the index of the
                element and the whole table. It should return an integer and,
                possibly, a value.
              </p>
              <p>
                Among all elements for which a non-nil integer is returned, let
                <span class="verb">i</span> by the index of the element where
                this integer is minimal.
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> <span class="verb">array[i]</span>
              </p>
              <p><em>Returns:</em> <em>1.</em> <span class="verb">i</span></p>
              <p>
                <em>Returns:</em> <em>1.</em> The return value(s) of the
                function at <span class="verb">array[i]</span>.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/lib.copy"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >lib.<span class="textcolor" style="color: #bf0000"
                          >copy</span
                        ></kbd
                      ><kbd>(source, target)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Copies a table while preserving its metatable.</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>source</kbd> The table to
                copy. <em>2.</em> <kbd>target</kbd> The table to which values
                are to be copied or <span class="verb">nil</span> if a new table
                is to be allocated.
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> The
                <span class="verb">target</span> table or a newly allocated
                table containing all keys and values of the
                <span class="verb">source</span> table.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/lib.icopy"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >lib.<span class="textcolor" style="color: #bf0000"
                          >icopy</span
                        ></kbd
                      ><kbd>(source, target)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Copies an array while preserving its metatable.</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>source</kbd> The array to
                copy. <em>2.</em> <kbd>target</kbd> The array to which values
                are to be copied or <span class="verb">nil</span> if a new table
                is to be allocated. The elements of the
                <span class="verb">source</span> array will be added at the end.
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> The
                <span class="verb">target</span> table or a newly allocated
                table containing all keys and values of the
                <span class="verb">source</span> table.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/lib.map"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >lib.<span class="textcolor" style="color: #bf0000"
                          >map</span
                        ></kbd
                      ><kbd>(source, fun)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Apply a function to all pairs of a table, resulting in a new
                table.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>source</kbd> The table.
                <em>2.</em> <kbd>fun</kbd> A function taking two arguments
                (<span class="verb">val</span> and
                <span class="verb">key</span>, in that order). Should return two
                values (a <span class="verb">new_val</span> and a
                <span class="verb">new_key</span>). This pair will be inserted
                into the new table. If, however,
                <span class="verb">new_key</span> is
                <span class="verb">nil</span>, the
                <span class="verb">new_value</span> will be inserted at the
                position <span class="verb">key</span>. This means, in
                particular, that if the <span class="verb">fun</span> takes only
                a single argument and returns only a single argument, you have a
                &ldquo;classical&rdquo; value mapper. Also note that if
                <span class="verb">new_value</span> is
                <span class="verb">nil</span>, the value is removed from the
                table.
              </p>
              <p><em>Returns:</em> <em>1.</em> The new table.</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/lib.imap"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >lib.<span class="textcolor" style="color: #bf0000"
                          >imap</span
                        ></kbd
                      ><kbd>(source, fun, new)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Apply a function to all elements of an array, resulting in a new
                array.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>source</kbd> The array.
                <em>2.</em> <kbd>fun</kbd> A function taking two arguments
                (<span class="verb">val</span> and <span class="verb">i</span>,
                the current index). This function is applied to all elements of
                the array. The result of this function is placed at the end of a
                new array, expect when the function returns
                <span class="verb">nil</span>, in which case the element is
                skipped. If this function is not provided (is
                <span class="verb">nil</span>), the identity function is used.
                <em>3.</em> <kbd>new</kbd> The target array (if
                <span class="verb">nil</span>, a new array is create).
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000">a</span>
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">lib</span
                    >.<span class="textcolor" style="color: #000000">imap</span
                    ><span class="textcolor" style="color: #800080"
                      >(array, function(v)</span
                    > <span class="textcolor" style="color: #000000"
                      ><a href="library-calender#pgf.if">if</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      >some_test</span
                    ><span class="textcolor" style="color: #800080">(v)</span
                    > <span class="textcolor" style="color: #000000"
                      >then</span
                    >
                    <span class="textcolor" style="color: #000000">return</span>
                    <span class="textcolor" style="color: #000000">v</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    >)<br />
                  </code>
                </div>
              </figure>
              <p>
                The above code is a filter that will remove all elements from
                the array that do not pass <span class="verb">some_test</span>.
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >lib</span
                    >.<span class="textcolor" style="color: #000000">imap</span
                    ><span class="textcolor" style="color: #800080"
                      >(a, lib.id, b)</span
                    ><br />
                  </code>
                </div>
              </figure>
              <p>
                The above code has the same effect as
                <span class="verb">lib.icopy(a,b)</span>.
              </p>
              <p><em>Returns:</em> <em>1.</em> The new array</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/lib.random_permutation"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >lib.<span class="textcolor" style="color: #bf0000"
                          >random_permutation</span
                        ></kbd
                      ><kbd>(n)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Generate a random permutation of the numbers \(1\) to \(n\) in
                time \(O(n)\). Knuth&rsquo;s shuffle is used for this.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>n</kbd> The desired size
                of the table
              </p>
              <p><em>Returns:</em> <em>1.</em> A random permutation</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/lib.id"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >lib.<span class="textcolor" style="color: #bf0000"
                          >id</span
                        ></kbd
                      ><kbd>(...)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                The identity function, so you can write
                <span class="verb">lib.id</span> instead of
                <span class="verb">function (x) return x end</span>.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/lib.lookup_option"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >lib.<span class="textcolor" style="color: #bf0000"
                          >lookup_option</span
                        ></kbd
                      ><kbd>(name, ...)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Tries to find an option in different objects that have an
                options field.
              </p>
              <p>
                This function iterates over all objects given as parameters. In
                each, it tries to find out whether the options field of the
                object contains the option <span class="verb">name</span> and,
                if so, returns the value. The important point is that checking
                whether the option table of an object contains the name field is
                done using <span class="verb">rawget</span> for all but the last
                parameter. This means that when you write
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000">lib</span
                    >.<span class="textcolor" style="color: #000000"
                      >lookup_option</span
                    ><span class="textcolor" style="color: #800080"
                      >("foo", vertex, graph)</span
                    ><br />
                  </code>
                </div>
              </figure>
              <p>
                and if <span class="verb">/graph drawing/foo</span> has an
                initial value set, if the parameter is not explicitly set in a
                vertex, you will get the value set for the graph or, if it is
                not set there either, the initial value. In contrast, if you
                write
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >vertex</span
                    >.<span class="textcolor" style="color: #000000"
                      >options</span
                    >[<span class="textcolor" style="color: #008000">"foo"</span
                    >] <span class="textcolor" style="color: #000000"
                      ><a href="pgfkeys#pgf.or">or</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.graph">graph</a></span
                    >.<span class="textcolor" style="color: #000000"
                      >options</span
                    >[<span class="textcolor" style="color: #008000">"foo"</span
                    >]<br />
                  </code>
                </div>
              </figure>
              <p>
                what happens is that the first access to
                <span class="verb">.options</span> will <em>always</em> return
                something when an initial parameter has been set for the option
                <span class="verb">foo</span>.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>name</kbd> The name of the
                options <em>2.</em> <kbd>...</kbd> Any number of objects. Each
                must have an options field.
              </p>
              <p><em>Returns:</em> <em>1.</em> The found option</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/lib.class"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >lib.<span class="textcolor" style="color: #bf0000"
                          >class</span
                        ></kbd
                      ><kbd>(t)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Turns a table <span class="verb">t</span> into a class in the
                sense of object oriented programming. In detail, this means that
                <span class="verb">t</span> is augmented by a
                <span class="verb">new</span> function, which takes an optional
                table of <span class="verb">initial</span> values and which
                outputs a new table whose metatable is the class. The
                <span class="verb">new</span> function will call the function
                <span class="verb">constructor</span> if it exists. Furthermore,
                the class object&rsquo;s <span class="verb">__index</span> is
                set to itself and its meta table is set to the
                <span class="verb">base_class</span> field of the table. If
                <span class="verb">t</span> is <span class="verb">nil</span>, a
                new table is created.
              </p>
              <p>Here is a typical usage of this function:</p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000">Point</span>
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">lib</span
                    >.<span class="textcolor" style="color: #000000"
                      >class</span
                    >
                    {}<br />
                    <br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="dv-formats#pgf.function">function</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      >Point:length</span
                    ><span class="textcolor" style="color: #800080">()</span
                    ><br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >return</span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="library-math#pgf.math">math</a></span
                    >.<span class="textcolor" style="color: #000000">sqrt</span
                    ><span class="textcolor" style="color: #800080"
                      >(self.x*self.x + self.y*self.y)</span
                    ><br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                    <br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="library-perspective#pgf.p">p</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">Point</span
                    >.<span class="textcolor" style="color: #000000">new</span>
                    {<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.x">x</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">5</span
                    >, <span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.y">y</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">6</span>
                    }<br />
                    <br />
                    <span class="textcolor" style="color: #000000">print</span
                    ><span class="textcolor" style="color: #800080"
                      >(<a href="library-perspective#pgf.p">p</a>:length()</span
                    >)<br />
                  </code>
                </div>
              </figure>
              <p>We can subclass this as follows:</p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000"
                      >Point3D</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">lib</span
                    >.<span class="textcolor" style="color: #000000"
                      >class</span
                    >
                    {<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >base_class</span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">Point</span>
                    }<br />
                    <br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="dv-formats#pgf.function">function</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      >Point3D:length</span
                    ><span class="textcolor" style="color: #800080">()</span
                    ><br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000">l</span>
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">Point</span
                    >.<span class="textcolor" style="color: #000000"
                      ><a href="tikz-arrows#pgf.length">length</a></span
                    ><span class="textcolor" style="color: #800080">(self)</span
                    > <span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.--">--</a></span
                    >
                    <span class="textcolor" style="color: #000000">Call</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-animations#pgf.base">base</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      >class's</span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="dv-formats#pgf.function">function</a></span
                    ><br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >return</span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="library-math#pgf.math">math</a></span
                    >.<span class="textcolor" style="color: #000000">sqrt</span
                    ><span class="textcolor" style="color: #800080"
                      >(l*l + self.z*self.zdy)</span
                    ><br />
                    <span class="textcolor" style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                    <br />
                    <span class="textcolor" style="color: #000000">local</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="library-perspective#pgf.p">p</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">Point3D</span
                    >.<span class="textcolor" style="color: #000000">new</span>
                    {<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.x">x</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">5</span
                    >, <span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.y">y</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">6</span
                    >, <span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.z">z</a></span
                    >
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">6</span>
                    }<br />
                    <br />
                    <span class="textcolor" style="color: #000000">print</span
                    ><span class="textcolor" style="color: #800080"
                      >(<a href="library-perspective#pgf.p">p</a>:length()</span
                    >)<br />
                  </code>
                </div>
              </figure>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>t</kbd> A table that gets
                augmented to a class. If <span class="verb">nil</span>, a new
                table is created.
              </p>
              <p><em>Returns:</em> <em>1.</em> The augmented table.</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/lib.ondemand"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >lib.<span class="textcolor" style="color: #bf0000"
                          >ondemand</span
                        ></kbd
                      ><kbd>(filename, table, name)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Returns a method that is loaded only on demand for a class.</p>
              <p>
                The idea behind this function is that you may have a class (or
                just a table) for which some methods are needed only seldomly.
                In this case, you can put these methods in a separate file and
                then use <span class="verb">ondemand</span> to indicate that the
                methods are found in a another file.
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.--">--</a></span
                    >
                    <span class="textcolor" style="color: #000000">File</span>
                    <span class="textcolor" style="color: #000000">Foo</span
                    >.<span class="textcolor" style="color: #000000">lua</span
                    ><br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000">Foo</span>
                    <span class="textcolor" style="color: #000000">=</span>
                    {}<br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="dv-formats#pgf.function">function</a></span
                    >
                    <span class="textcolor" style="color: #000000">Foo</span
                    >.<span class="textcolor" style="color: #000000">bar</span>
                    <span class="textcolor" style="color: #800080">()</span
                    ><span class="spaces">  </span>...<span class="spaces"> </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="dv-formats#pgf.function">function</a></span
                    >
                    <span class="textcolor" style="color: #000000">Foo</span
                    >.<span class="textcolor" style="color: #000000">bar2</span>
                    <span class="textcolor" style="color: #800080">()</span
                    ><span class="spaces"> </span>...<span class="spaces"> </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >Foo</span
                    >.<span class="textcolor" style="color: #000000">bar3</span>
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">lib</span
                    >.<span class="textcolor" style="color: #000000"
                      >ondemand</span
                    ><span class="textcolor" style="color: #800080"
                      >("Foo_extra", Foo, "bar3")</span
                    ><br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >Foo</span
                    >.<span class="textcolor" style="color: #000000">bar4</span>
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000">lib</span
                    >.<span class="textcolor" style="color: #000000"
                      >ondemand</span
                    ><span class="textcolor" style="color: #800080"
                      >("Foo_extra", Foo, "bar4")</span
                    ><br />
                    <br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >return</span
                    >
                    <span class="textcolor" style="color: #000000">Foo</span
                    ><br />
                    <br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.--">--</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      >Foo_extra</span
                    >.<span class="textcolor" style="color: #000000">lua</span
                    ><br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      >local</span
                    >
                    <span class="textcolor" style="color: #000000">Foo</span>
                    <span class="textcolor" style="color: #000000">=</span>
                    <span class="textcolor" style="color: #000000"
                      >require</span
                    >
                    <span class="textcolor" style="color: #000000">"Foo"</span
                    ><br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="dv-formats#pgf.function">function</a></span
                    >
                    <span class="textcolor" style="color: #000000">Foo</span
                    >.<span class="textcolor" style="color: #000000">bar3</span>
                    <span class="textcolor" style="color: #800080">()</span
                    ><span class="spaces"> </span>...<span class="spaces"> </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                    <span class="spaces"> </span><span class="textcolor" style="color: #000000"
                      ><a href="dv-formats#pgf.function">function</a></span
                    >
                    <span class="textcolor" style="color: #000000">Foo</span
                    >.<span class="textcolor" style="color: #000000">bar4</span>
                    <span class="textcolor" style="color: #800080">()</span
                    ><span class="spaces"> </span>...<span class="spaces"> </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    ><br />
                  </code>
                </div>
              </figure>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>filename</kbd> The name of
                the file when extra methods are located. <em>2.</em>
                <kbd>table</kbd> The table for which the missing functions
                should be loaded when they are accessed. <em>3.</em>
                <kbd>method</kbd> The name of the method.
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> A function that, when called,
                loads the filename using <span class="verb">require</span> and,
                then, forwards the call to the method.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/lib.random"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >lib.<span class="textcolor" style="color: #bf0000"
                          >random</span
                        ></kbd
                      ><kbd>(l,u)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                This implements the a random number generator similar to the one
                provided by Lua, but based on the tex.uniformdeviate primitive
                to avoid differences in random numbers due to platform
                specifics.
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>l</kbd> Lower bound
                <em>2.</em> <kbd>u</kbd> Upper bound
              </p>
              <p><em>Returns:</em> <em>1.</em> A random number</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/lib.randomseed"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >lib.<span class="textcolor" style="color: #bf0000"
                          >randomseed</span
                        ></kbd
                      ><kbd>(seed)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Provide the seed for the random number generator</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>seed</kbd> random seed
              </p>
              <p></p>
            </ul>
          </div>
          <h6 id="autosec-4886">
            <span
              ><span class="sectionnumber" id="sec-36.9.2">36.9.2</span> Lookup
              Tables</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.9.2"
              data-pdf-destination="subsubsection.36.9.2"
              data-pdf-page="538"
              href="#sec-36.9.2"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4886"></a>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><b>Lua table</b>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >LookupTable</span
                        ></kbd
                      >
                      (declared in <kbd>pgf.gd.lib.LookupTable</kbd>)</span
                    >
                  </p>
                </li>
              </div>
              <p>
                This table provides two utility functions for managing
                &ldquo;lookup tables&rdquo;. Such a table is a mixture of an
                array and a hashtable: It stores (only) tables. Each table is
                stored once in a normal array position. Additionally, the lookup
                table is also indexed at the position of the table (used as a
                key) and this position is set to <span class="verb">true</span>.
                This means that you can test whether a table
                <span class="verb">t</span> is in the lookup table
                <span class="verb">l</span> simply by testing whether
                <span class="verb">l[t]</span> is true.
              </p>
              <p>
                <em>Alphabetical method summary:</em>
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/LookupTable.addOne"
                    >function LookupTable.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >addOne</span
                    >
                    (l, e)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/LookupTable.add"
                    >function LookupTable.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >add</span
                    >
                    (l, array)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/LookupTable.remove"
                    >function LookupTable.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >remove</span
                    >
                    (l, array)</a
                  ></kbd
                >
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/LookupTable.add"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >LookupTable.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >add</span
                        ></kbd
                      ><kbd>(l, array)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Add all elements in the <span class="verb">array</span> to a
                lookup table. If an element of the array is already present in
                the table, it will not be added again.
              </p>
              <p>This operation takes time \(O(|\verb !array!|)\).</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>l</kbd> Lookup table
                <em>2.</em> <kbd>array</kbd> An array of to-be-added tables.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/LookupTable.addOne"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >LookupTable.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >addOne</span
                        ></kbd
                      ><kbd>(l, e)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Add one element to a lookup table. If it is already present in
                the table, it will not be added again.
              </p>
              <p>This operation takes time \(O(1)\).</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>l</kbd> Lookup table
                <em>2.</em> <kbd>e</kbd> The to-be-added element.
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/LookupTable.remove"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >LookupTable.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >remove</span
                        ></kbd
                      ><kbd>(l, array)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Remove tables from a lookup table.</p>
              <p>
                Note that this operation is pretty expensive insofar as it will
                always cost a traversal of the whole lookup table. However, this
                is also the maximum cost, even when a lot of entries need to be
                deleted. Thus, it is much better to &ldquo;pool&rdquo; multiple
                remove operations in a single one.
              </p>
              <p>
                This operation takes time \(O(\max \{|\verb !array!|, |\verb
                !l!|\})\).
              </p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>l</kbd> Lookup table
                <em>2.</em> <kbd>t</kbd> An array of to-be-removed tables.
              </p>
              <p></p>
            </ul>
          </div>
          <h6 id="autosec-4887">
            <span
              ><span class="sectionnumber" id="sec-36.9.3">36.9.3</span>
              Computing Distances in Graphs</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.9.3"
              data-pdf-destination="subsubsection.36.9.3"
              data-pdf-page="539"
              href="#sec-36.9.3"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4887"></a>

          <p>
            <em>Still needs to be ported to digraph classes!</em>
          </p>
          <h6 id="autosec-4888">
            <span
              ><span class="sectionnumber" id="sec-36.9.4">36.9.4</span>
              Priority Queues</span
            ><a
              class="anchor-link"
              data-html-link="sec-36.9.4"
              data-pdf-destination="subsubsection.36.9.4"
              data-pdf-page="539"
              href="#sec-36.9.4"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-4888"></a>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><b>Lua table</b>
                      <kbd
                        ><span class="textcolor" style="color: #bf0000"
                          >PriorityQueue</span
                        ></kbd
                      >
                      (declared in <kbd>pgf.gd.lib.PriorityQueue</kbd>)</span
                    >
                  </p>
                </li>
              </div>
              <p>
                A PriorityQueue supports operations for quickly finding the
                minimum from a set of elements
              </p>
              <p>
                Its implementation is based on (simplified) Fibonacci heaps.
              </p>
              <p>
                <em>Alphabetical method summary:</em>
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/PriorityQueue.new"
                    >function PriorityQueue.<span
                      class="textcolor"
                      style="color: #bf0000"
                      >new</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/PriorityQueue:dequeue"
                    >function PriorityQueue:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >dequeue</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/PriorityQueue:enqueue"
                    >function PriorityQueue:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >enqueue</span
                    >
                    (value, priority)</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a href="gd-algorithm-layer#pgf/lua/PriorityQueue:isEmpty"
                    >function PriorityQueue:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >isEmpty</span
                    >
                    ()</a
                  ></kbd
                >
              </p>
              <p>
                <kbd
                  ><a
                    href="gd-algorithm-layer#pgf/lua/PriorityQueue:updatePriority"
                    >function PriorityQueue:<span
                      class="textcolor"
                      style="color: #bf0000"
                      >updatePriority</span
                    >
                    (value, priority)</a
                  ></kbd
                >
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/PriorityQueue.new"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >PriorityQueue.<span
                          class="textcolor"
                          style="color: #bf0000"
                          >new</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Creates a new priority queue</p>
              <p><em>Returns:</em> <em>1.</em> The newly created queue</p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/PriorityQueue:enqueue"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >PriorityQueue:<span
                          class="textcolor"
                          style="color: #bf0000"
                          >enqueue</span
                        ></kbd
                      ><kbd>(value, priority)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Add an element with a certain priority to the queue</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>value</kbd> An object
                <em>2.</em> <kbd>priority</kbd> Its priority
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/PriorityQueue:dequeue"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >PriorityQueue:<span
                          class="textcolor"
                          style="color: #bf0000"
                          >dequeue</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>
                Removes the element with the minimum priority from the queue
              </p>
              <p>
                <em>Returns:</em> <em>1.</em> The element with the minimum
                priority
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/PriorityQueue:updatePriority"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >PriorityQueue:<span
                          class="textcolor"
                          style="color: #bf0000"
                          >updatePriority</span
                        ></kbd
                      ><kbd>(value, priority)</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Lower the priority of an element of a queue</p>
              <p>
                <em>Parameters:</em> <em>1.</em> <kbd>value</kbd> An object
                <em>2.</em> <kbd>priority</kbd> A new priority, which must be
                lower than the old priority
              </p>
              <p></p>
            </ul>
          </div>

          <p>
            <a id="pgf/lua/PriorityQueue:isEmpty"></a>
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd>function</kbd>
                      <kbd
                        >PriorityQueue:<span
                          class="textcolor"
                          style="color: #bf0000"
                          >isEmpty</span
                        ></kbd
                      ><kbd>()</kbd></span
                    >
                  </p>
                </li>
              </div>
              <p>Tests, whether the queue is empty</p>
              <p><em>Returns:</em> <em>1.</em> True, if the queue is empty</p>
              <p></p>
            </ul>
          </div>
        </section>
      </main>

      <footer>
        <div class="footer-left">
          <a href="/license">License</a> &middot;
          <a href="https://ctan.org/pkg/pgf">CTAN</a> &middot;
          <a href="https://pgf-tikz.github.io/pgf/pgfmanual.pdf"
            >Official PDF version</a
          >
          &middot;
          <a href="https://github.com/DominikPeters/tikz.dev-issues/issues"
            >Feedback and issues</a
          >
          &middot;
          <a href="https://github.com/DominikPeters/pgf-tikz-html-manual"
            >About this HTML version</a
          >
        </div>
        <div class="footer-right">
          <em>HTML version last updated: 2024-03-17</em>
        </div>
      </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
    <script>
      docsearch({
        apiKey: "196e8c10ec187c9ae525dd5226fb9378",
        indexName: "tikz",
        appId: "JS6V5VZSDB",
        container: "#search",
        searchParameters: {
          filters: "tags:tikz",
        },
      });
    </script>
  </body>
</html>
