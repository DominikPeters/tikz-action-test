<!doctype html>
<html lang="en-US">
  <!--TikZ/PGF documentation:
Copyright 2019 by Till Tantau and Mark Wibrow

This file may be distributed and/or modified

1. under the LaTeX Project Public License and/or
2. under the GNU Free Documentation License.

See https://tikz.dev/license for more details.

Translated to HTML using the lwarp package:
Copyright 2016-2024 Brian Dunn - BD Tech Concepts LLC

tikz.dev:
Copyright 2021-2024 Dominik Peters
This file may be distributed and/or modified under the LaTeX Project Public License.--><head>
    <meta charset="utf-8" />
    <meta content="LaTeX Lwarp package" name="generator" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Decorations - PGF/TikZ Manual</title>
    <link href="style.css?v=20240321" rel="stylesheet" type="text/css" />

    <script
      async
      id="MathJax-script"
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"
    ></script>

    <script src="pgfmanual.js?v=20240321"></script>

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "The Basic Layer",
            "item": "https://tikz.dev/base"
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "Decorations",
            "item": "https://tikz.dev/base-decorations"
          }
        ]
      }
    </script>
    <script async src="lwarp-mathjax-emulation.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"
      rel="stylesheet"
    />
    <link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png" />
    <link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png" />
    <link
      href="/apple-touch-icon.png"
      rel="apple-touch-icon"
      sizes="180x180"
      type="image/png"
    />
    <link href="/site.webmanifest" rel="manifest" />
    <link href="https://tikz.dev/base-decorations" rel="canonical" />
    <meta content="https://tikz.dev/base-decorations" property="og:url" />
    <meta content="article" property="og:type" />
    <meta content="Decorations - PGF/TikZ Manual" property="og:title" />
    <meta content="summary" name="twitter:card" />
  </head>
  <body>
    <a id="pgfmanual-autopage-8037"></a>

    <div class="bodyandsidetoc grid-container">
      <header>
        <div id="hamburger-button">â˜°</div>
        <strong
          ><a href="/">PGF/<span class="tikzname">TikZ</span> Manual</a></strong
        >
        <div id="search"></div>
      </header>
      <div class="sidetoccontainer" id="local-toc-container">
        <nav class="sidetoc">
          <div class="sidetoctitle"><p>On this page</p></div>
          <div class="sidetoccontents">
            <p><a class="tocsubsection" href="#sec-103.1">Overview</a></p>
            <p>
              <a class="tocsubsection" href="#sec-103.2">Decoration Automata</a>
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-103.2.1"
                >The Different Paths</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-103.2.2"
                >Segments and States</a
              >
            </p>
            <p>
              <a class="tocsubsection" href="#sec-103.3"
                >Declaring Decorations</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-103.3.1"
                >Predefined Decorations</a
              >
            </p>
            <p>
              <a class="tocsubsection" href="#sec-103.4">Using Decorations</a>
            </p>
            <p>
              <a class="tocsubsection" href="#sec-103.5">Meta-Decorations</a>
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-103.5.1"
                >Declaring Meta-Decorations</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-103.5.2"
                >Predefined Meta-decorations</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-103.5.3"
                >Using Meta-Decorations</a
              >
            </p>
          </div>
        </nav>
      </div>
      <div class="sidetoccontainer" id="chapter-toc-container">
        <nav class="sidetoc">
          <div class="sidetoctitle">
            <p>
              <span class="sidetocthetitle"
                >The <span class="tikzname">TikZ</span> and PGF Packages<br />
                Manual for version 3.1.10</span
              >
            </p>

            <p>Contents</p>
          </div>

          <div class="sidetoccontents">
            <p></p>

            <p>
              <a class="linkintro" href="/">Introduction</a>
            </p>

            <p>
              <a class="tocpart" href="tutorials-guidelines"
                >Tutorials and Guidelines</a
              >
            </p>

            <p>
              <a class="tocpart" href="install"
                >Installation and Configuration</a
              >
            </p>

            <p>
              <a class="tocpart" href="tikz">Ti<em>k</em>Z</a>
            </p>

            <p>
              <a class="tocpart" href="gd">Graph Drawing</a>
            </p>

            <p>
              <a class="tocpart" href="libraries">Libraries</a>
            </p>

            <p>
              <a class="tocpart" href="dv">Data Visualization</a>
            </p>

            <p>
              <a class="tocpart" href="utilities">Utilities</a>
            </p>

            <p>
              <a class="tocpart" href="math"
                >Mathematical and Object-Oriented Engines</a
              >
            </p>

            <p class="current-part">
              <a class="tocpart" href="base">The Basic Layer</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-design">Design Principles</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-scopes"
                >Hierarchical Structures: Package, Environments, Scopes, and
                Text</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-points"
                >Specifying Coordinates</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-paths">Constructing Paths</a>
            </p>

            <p class="current current-part">
              <a class="tocsection" href="base-decorations">Decorations</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-actions">Using Paths</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-arrows"
                >Defining New Arrow Tip Kinds</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-nodes">Nodes and Shapes</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-matrices">Matrices</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-transformations"
                >Coordinate, Canvas, and Nonlinear Transformations</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-patterns">Patterns</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-images"
                >Declaring and Using Images</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-external"
                >Externalizing Graphics</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-plots">Creating Plots</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-layers">Layered Graphics</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-shadings">Shadings</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-transparency">Transparency</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-animations">Animations</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-internalregisters"
                >Adding libraries to <span class="textsc">pgf</span>: temporary
                registers</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-quick">Quick Commands</a>
            </p>

            <p>
              <a class="tocpart" href="pgfsys">The System Layer</a>
            </p>
          </div>
        </nav>
      </div>

      <main class="bodycontainer">
        <section class="textbody">
          <h1>
            The <span class="tikzname">TikZ</span> and PGF Packages<br />
            Manual for version 3.1.10
          </h1>
          <h2 class="inserted">The Basic Layer</h2>

          <!--MathJax customizations:-->

          <p></p>
          <h4 id="autosec-8038">
            <a id="section-base-decorations"></a
            ><span
              ><span class="sectionnumber" id="sec-103">103</span>
              Decorations</span
            ><a
              class="anchor-link"
              data-pdf-destination="section.103"
              data-pdf-page="1107"
              href="#sec-103"
              >&para;</a
            >
          </h4>
          <a id="pgfmanual-autopage-8038"></a>
          <a id="pgfmanual-autofile-112"></a>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd
                        >\usepgfmodule{<span class="declare">decorations</span>}
                        %
                        <span class="latexlogofont"
                          ><span class="latexlogo"
                            >L<span class="latexlogosup">a</span>T<span
                              class="latexlogosub"
                              >e</span
                            >X</span
                          ></span
                        >
                        and plain
                        <span class="latexlogofont"
                          ><span class="latexlogo"
                            >T<span class="latexlogosub">e</span>X</span
                          ></span
                        >
                        and pure pgf</kbd
                      ></span
                    >
                  </p>
                </li>
              </div>

              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd
                        >\usepgfmodule[<span class="declare">decorations</span>]
                        % Con<span class="latexlogofont"
                          ><span class="latexlogo"
                            >T<span class="latexlogosub">e</span>X</span
                          ></span
                        >t and pure pgf</kbd
                      ></span
                    >
                  </p>
                </li>
              </div>
              <p>
                The commands for creating decorations are defined in this
                module, so you need to load this module to use decorations. This
                module is automatically loaded by the different decoration
                libraries.
              </p>
            </ul>
          </div>
          <h5 id="autosec-8040">
            <span
              ><span class="sectionnumber" id="sec-103.1">103.1</span>
              Overview</span
            ><a
              class="anchor-link"
              data-html-link="sec-103.1"
              data-pdf-destination="subsection.103.1"
              data-pdf-page="1107"
              href="#sec-103.1"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-8040"></a>

          <p>
            Decorations are a general way of creating graphics by &ldquo;moving
            along&rdquo; a path and, while doing so, either drawing something or
            constructing a new path. This could be as simple as extending a path
            with a &ldquo;zigzagged&rdquo; line&hellip;
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-3250"
                  ><!--
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    height="10.083"
                    loading="lazy"
                    src="pgfmanual-images/image-3250.png"
                    style
                    width="116.258"
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <span class="codepreamble"
                  >\usetikzlibrary {decorations,decorations.pathmorphing} </span
                ><br />
                <span class="textcolor" style="color: #0000b2"
                  ><a href="tikz-scopes#pgf.back/tikz">\tikz</a></span
                > <span class="textcolor" style="color: #0000b2"
                  ><a href="tikz-actions#pgf.back/draw">\draw</a></span
                > <span class="textcolor" style="color: #000000"
                  ><a href="tikz-decorations#pgf.decorate">decorate</a></span
                >[<span class="textcolor" style="color: #008000"
                  ><a href="tikz-decorations#pgf.decoration"
                    >decoration</a
                  ></span
                >=<span class="textcolor" style="color: #008000">zigzag</span
                >] {<span class="textcolor" style="color: #800080"
                  >(0,0)</span
                > <span class="textcolor" style="color: #000000"
                  ><a href="tikz-paths#pgf.--">--</a></span
                >
                <span class="textcolor" style="color: #800080">(3,0)</span
                >};<br />
              </code>
            </div>
          </figure>

          <p>
            &hellip;but could also be as complex as typesetting text along a
            path:
          </p>

          <figure class="example">
            <div class="example-image">
              <p>
                <span class="lateximagesource" id="lateximage-pgfmanual-3251"
                  ><!--
Some
       t




       ex
           ta
             lo n
               g
                    a pa
                           t
--><img
                    alt="(-tikz-&nbsp;diagram)"
                    class="lateximage"
                    height="88.562"
                    loading="lazy"
                    src="pgfmanual-images/image-3251.png"
                    style
                    width="115.634"
                /></span>
              </p>
            </div>

            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <span class="codepreamble"
                  >\usetikzlibrary {decorations,decorations.text} </span
                ><br />
                <span class="textcolor" style="color: #0000b2"
                  ><a href="tikz-scopes#pgf.back/tikz">\tikz</a></span
                > <span class="textcolor" style="color: #0000b2"
                  ><a href="tikz-paths#pgf.back/path">\path</a></span
                > <span class="textcolor" style="color: #000000"
                  ><a href="tikz-decorations#pgf.decorate">decorate</a></span
                >
                [<span class="textcolor" style="color: #008000"
                  ><a href="tikz-decorations#pgf.decoration"
                    >decoration</a
                  ></span
                >=<span class="textcolor" style="color: #008000"
                  >{<a href="tikz-shapes#pgf.text">text</a>
                  <a href="base-animations#pgf.along">along</a>
                  <a href="tikz-graphs#pgf.path">path</a>,<br />
                  <span class="spaces">     </span>text={Some
                  <a href="tikz-shapes#pgf.text">text</a>
                  <a href="base-animations#pgf.along">along</a> a
                  <a href="tikz-graphs#pgf.path">path</a>}}</span
                >]<br />
                <span class="spaces">   </span>{<span class="spaces"> </span><span
                  class="textcolor"
                  style="color: #800080"
                  >(0,2)</span
                ><span class="spaces"> </span>..<span class="spaces"> </span><span class="textcolor" style="color: #000000"
                  ><a href="library-edges#pgf.controls">controls</a></span
                >
                <span class="textcolor" style="color: #800080">(2,2)</span
                > <span class="textcolor" style="color: #000000"
                  ><a href="pgfkeys#pgf.and">and</a></span
                >
                <span class="textcolor" style="color: #800080">(1,0)</span
                ><span class="spaces"> </span>..<span class="spaces"> </span><span class="textcolor" style="color: #800080"
                  >(3,0)</span
                ><span class="spaces"> </span>};<br />
              </code>
            </div>
          </figure>

          <p>The workflow for using decorations is the following:</p>
          <ul class="enumerate" style="list-style-type: none">
            <li>
              <p>
                <span class="listmarker">1.</span> You define a decoration using
                the <span class="verb">\pgfdeclaredecoration</span> command.
                Different useful decorations are already declared in libraries
                like <span class="verb">decorations.shapes</span>.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">2.</span> You use normal path
                construction commands like
                <span class="verb">\pgfpathlineto</span> to construct a path.
                Let us call this path the <em>to-be-decorated</em> path.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">3.</span> You place the path
                construction commands inside the environment
                <span class="verb">{pgfdecoration}</span>. This environment
                takes the name of a previously declared decoration as a
                parameter. It will then start &ldquo;walking along&rdquo; the
                to-be-decorated path. As it does this, a special finite
                automaton called a <em>decoration automaton</em> produces new
                path commands as its output (or even other outputs). These
                outputs replace the to-be-decorated path; indeed, after the
                to-be-decorated path has been fully walked along it is thrown
                away, only the output of the automaton persists.
              </p>
            </li>
          </ul>

          <p>
            In the present section the process of how decoration automata work
            is explained first. Then the command(s) for declaring decoration
            automata and for using them are covered.
          </p>
          <h5 id="autosec-8045">
            <span
              ><span class="sectionnumber" id="sec-103.2">103.2</span>
              Decoration Automata</span
            ><a
              class="anchor-link"
              data-html-link="sec-103.2"
              data-pdf-destination="subsection.103.2"
              data-pdf-page="1107"
              href="#sec-103.2"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-8045"></a>

          <p>
            Decoration automata (and the closely related meta-decoration
            automata) are a general concept for creating graphics &ldquo;along
            paths&rdquo;. For straight lines, this idea was first proposed by
            Till Tantau in an earlier version of
            <span class="textsc">pgf</span>, the idea to extend this to
            arbitrary path was proposed and implemented by Mark Wibrow. Further
            versatility is provided by &ldquo;meta-decorations&rdquo;. These are
            automata that decorate a path with decorations.
          </p>

          <p>
            In the present subsection the different ideas underlying decoration
            automata are presented.
          </p>
          <h6 id="autosec-8046">
            <span
              ><span class="sectionnumber" id="sec-103.2.1">103.2.1</span> The
              Different Paths</span
            ><a
              class="anchor-link"
              data-html-link="sec-103.2.1"
              data-pdf-destination="subsubsection.103.2.1"
              data-pdf-page="1107"
              href="#sec-103.2.1"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-8046"></a>

          <p>
            In order to prevent confusion with different types of paths, such as
            those that are extended, those that are decorated and those that are
            created, the following conventions will be used:
          </p>
          <ul class="itemize" style="list-style-type: none">
            <li>
              <p>
                <span class="listmarker">&bull;</span> The
                <em>preexisting</em> path refers to the current path in
                existence before a decoration environment. (Possibly this path
                has been created by another decoration used earlier, but we will
                still call this path the preexisting path also in this case.)
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span> The <em>input</em> path
                refers to the to-be-decorated path that the decoration automaton
                moves along. The input path may consist of many line and curve
                input segments (for example, a circle or an ellipse consists of
                four curves). It is specified inside the decoration environment.
              </p>
            </li>
            <li>
              <p>
                <span class="listmarker">&bull;</span> The <em>output</em> path
                refers to the path that the decoration creates. Depending on the
                decoration, this path may or may not be empty (a decoration can
                also choose to use side-effects instead of producing an output
                path). The input path is always consumed by the decoration
                automaton, that is, it is no longer available in any way after
                the decoration automaton has finished.
              </p>
            </li>
          </ul>

          <p>
            The effect of a decoration environment is the following: The input
            path, which is specified inside the environment, is constructed and
            stored. This process does not alter the preexisting path in any way.
            Then the decoration automaton is started (as described later) and it
            produces an output path (possibly empty). Whenever part of the
            output path is produced, it is concatenated with the preexisting
            path. After the environment, the current path will equal the
            original preexisting path followed by the output path.
          </p>

          <p>
            It is permissible that a decoration issues a
            <span class="verb">\pgfusepath</span> command. As usual, this causes
            the current path to be filled or stroked or some other action to be
            taken and the current path is set to the empty path. As described
            above, when the decoration automaton starts, the current path is the
            preexisting path and as the automaton progresses, the current path
            is constantly being extended by the output path. This means that
            first time a <span class="verb">\pgfusepath</span> command is used
            on a decoration, the preexisting path is part of the path this
            command operates on; in subsequent calls only the part of the output
            path constructed since the last
            <span class="verb">\pgfusepath</span> command will be used.
          </p>

          <p>
            You can use this mechanism to stroke or fill different parts of the
            output path in different colors, line widths, fills and shades; all
            within the same decoration. Alternatively, a decoration can choose
            to produce no output path at all: the
            <span class="verb">text</span> decoration simply typesets text along
            a path.
          </p>
          <h6 id="autosec-8047">
            <span
              ><span class="sectionnumber" id="sec-103.2.2">103.2.2</span>
              Segments and States</span
            ><a
              class="anchor-link"
              data-html-link="sec-103.2.2"
              data-pdf-destination="subsubsection.103.2.2"
              data-pdf-page="1108"
              href="#sec-103.2.2"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-8047"></a>

          <p>
            The most common use of a decoration is to &ldquo;repeat something
            along a path&rdquo; (for example, the
            <span class="verb">zigzag</span> decoration repeats
            <span class="lateximagesource" id="lateximage-pgfmanual-3252"
              ><!--
--><img
                alt="(-tikz-&nbsp;diagram)"
                class="lateximage"
                height="10.083"
                loading="lazy"
                src="pgfmanual-images/image-3252.png"
                style
                width="16.347"
            /></span>
            along a path). However, it not necessarily the case that only one
            thing is repeated: a decoration can consist of different parts, or
            <em>segments</em>, repeated in a particular order.
          </p>

          <p>
            When you declare a decoration, you provide a description of how
            their different segments will be rendered. The description of each
            segment should be given in a way as if the &ldquo;\(x\)-axis&rdquo;
            of the segment is the tangent to the path at a particular point, and
            that point is the origin of the segment. Thus, for example, the
            segment of the <span class="verb">zigzag</span> decoration might be
            defined using the following code:
          </p>

          <figure class="example">
            <div class="example-code">
              <button class="clipboardButton" type="button">copy</button>

              <code>
                <br />
                <span class="textcolor" style="color: #0000b2"
                  ><a href="base-paths#pgf.back/pgfpathlineto"
                    >\pgfpathlineto</a
                  ></span
                >{<span class="textcolor" style="color: #0000b2"
                  ><a href="base-points#pgf.back/pgfpoint">\pgfpoint</a></span
                >{<span class="textcolor" style="color: #000000">5pt</span
                >}{<span class="textcolor" style="color: #000000">5pt</span
                >}}<br />
                <span class="textcolor" style="color: #0000b2"
                  ><a href="base-paths#pgf.back/pgfpathlineto"
                    >\pgfpathlineto</a
                  ></span
                >{<span class="textcolor" style="color: #0000b2"
                  ><a href="base-points#pgf.back/pgfpoint">\pgfpoint</a></span
                >{<span class="textcolor" style="color: #000000">15pt</span
                >}{<span class="textcolor" style="color: #000000">-5pt</span
                >}}<br />
                <span class="textcolor" style="color: #0000b2"
                  ><a href="base-paths#pgf.back/pgfpathlineto"
                    >\pgfpathlineto</a
                  ></span
                >{<span class="textcolor" style="color: #0000b2"
                  ><a href="base-points#pgf.back/pgfpoint">\pgfpoint</a></span
                >{<span class="textcolor" style="color: #000000">20pt</span
                >}{<span class="textcolor" style="color: #000000">0pt</span
                >}}<br />
              </code>
            </div>
          </figure>

          <p>
            <span class="textsc">pgf</span> will ensure that an appropriate
            coordinate transformation is in place when the segment is rendered
            such that the segment actually points in the right direction. Also,
            subsequent segments will be transformed such that they are
            &ldquo;further along the path&rdquo; toward the end of the path. All
            transformations are set up automatically.
          </p>

          <p>
            Note that we did not use a
            <span class="verb">\pgfpathmoveto{\pgfpointorigin}</span> at the
            beginning of the segment code. Doing so would subdivide the path
            into numerous subpaths. Rather, we assume that the previous segment
            caused the current point to be at the origin.
          </p>

          <p>
            The width of a segment can (and must) be specified explicitly.
            <span class="textsc">pgf</span> will use this width to find out the
            start point of the next segment and the correct rotation. The width
            the you provide need not be the &ldquo;real&rdquo; width of the
            segment, which allows decoration segments to overlap or to be spaced
            far apart.
          </p>

          <p>
            The <span class="verb">zigzag</span> decoration only has one segment
            that is repeated again and again. However, we might also like to
            have <em>different</em> segments and use rules to describe which
            segment should be used where. For example, we might have special
            segments at the start and at the end.
          </p>

          <p>
            Decorations use a mechanism known in theoretical in computer science
            as <em>finite state automata</em> to describe which segment is used
            at a particular point. The idea is the following: For the first
            segment we start in a special <em>state</em> called the
            <em>initial state</em>. In this state, and also in all other states
            later, <span class="textsc">pgf</span> first computes how much space
            is left on the input path. That is,
            <span class="textsc">pgf</span> keeps track of the distance to the
            end of the input path. Attached to each state there is a set of
            rules of the following form: &ldquo;If the remaining distance on the
            input path is less than \(x\), switch to state&nbsp;\(q\).&rdquo;
            <span class="textsc">pgf</span>
            checks for each of these rules whether it applies and, if so,
            immediately switches to state&nbsp;\(q\).
          </p>

          <p>
            Only if none of the rules tell us to switch to another state,
            <span class="textsc">pgf</span> will execute the state&rsquo;s code.
            This code will (typically) add a segment to the output path. In
            addition to the rules there is also a width parameter attached to
            each state. <span class="textsc">pgf</span> then translates the
            coordinate system by this width and reduces the remaining distance
            on the input path. Then, <span class="textsc">pgf</span> either
            stays in the current state or switches to another state, depending
            on yet another property attached of the state.
          </p>

          <p>
            The whole process stops when a special state called
            <span class="verb">final</span> is reached. The segment of this
            state is immediately added to the output path (it is often empty,
            though) and the process ends.
          </p>
          <h5 id="autosec-8050">
            <span
              ><span class="sectionnumber" id="sec-103.3">103.3</span> Declaring
              Decorations</span
            ><a
              class="anchor-link"
              data-html-link="sec-103.3"
              data-pdf-destination="subsection.103.3"
              data-pdf-page="1109"
              href="#sec-103.3"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-8050"></a>

          <p>
            The following command is used to declare a decoration. Essentially,
            this command describes the decoration automaton.
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <a id="pgf.back/pgfdeclaredecoration"></a>
                    <span class="hl-def"
                      ><span class="declare"
                        ><kbd>\pgfdeclaredecoration</kbd></span
                      >{<span class="angle">&langle;</span><i>name</i
                      ><span class="angle">&rangle;</span>}{<span class="angle"
                        >&langle;</span
                      ><i>initial state</i
                      ><span class="angle">&rangle;</span>}{<span class="angle"
                        >&langle;</span
                      ><i>states</i><span class="angle">&rangle;</span>}</span
                    >
                    <a
                      class="anchor-link"
                      data-html-link="pgf.back/pgfdeclaredecoration"
                      href="#\pgfdeclaredecoration"
                      id="\pgfdeclaredecoration"
                      >&para;</a
                    >
                  </p>
                </li>
              </div>
              <p>
                This command declares a new decoration called
                <span class="angle">&langle;</span><i>name</i
                ><span class="angle">&rangle;</span>. The
                <span class="angle">&langle;</span><i>states</i
                ><span class="angle">&rangle;</span> argument contains a
                description of the decoration automaton&rsquo;s states and the
                transitions between them. The <span class="angle">&langle;</span
                ><i>initial state</i><span class="angle">&rangle;</span> is the
                state in which the automaton starts.
              </p>
              <p>
                When the automaton is later applied to an input path, it keeps
                track of a certain position on the input path. This current
                point will &ldquo;travel along the path&rdquo;, each time being
                moved along by a certain distance. This will also work if the
                path is not a straight line. That is, it is permissible that the
                path curves are veers at a sharp angle. It is also permissible
                that while traveling along the input path, the current input
                segment ends and a new input segment starts. In this case, the
                remaining distance on the first input segment is subtracted from
                the <span class="angle">&langle;</span><i>dimension</i
                ><span class="angle">&rangle;</span> and then we travel along
                the second input segment for the remaining distance. This input
                segment may also end early, in which case we travel along the
                next input segment, and so on. Note that it cannot happen that
                we travel past the end of the input path since this would have
                caused an immediate switch to the
                <span class="verb">final</span> state.
              </p>
              <p>
                Note that the computation of the path lengths has only a low
                accuracy because of
                <span class="latexlogofont"
                  ><span class="latexlogo"
                    >T<span class="latexlogosub">e</span>X</span
                  ></span
                >&rsquo;s small math capabilities. Do not expect high accuracy
                alignments when using decorations (unless the input path
                consists only of horizontal and vertical lines).
              </p>
              <p>
                The <span class="angle">&langle;</span><i>states</i
                ><span class="angle">&rangle;</span> argument should consist of
                <span class="verb">\state</span> commands, one for each state of
                the decoration automaton. The
                <span class="verb">\state</span> command is defined only when
                the <span class="angle">&langle;</span><i>states</i
                ><span class="angle">&rangle;</span> argument is executed.
              </p>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <a id="pgf.back/state"></a>
                        <span class="hl-def"
                          ><span class="declare"><kbd>\state</kbd></span
                          >{<span class="angle">&langle;</span><i>name</i
                          ><span class="angle">&rangle;</span>}[<span
                            class="angle"
                            >&langle;</span
                          ><i>options</i
                          ><span class="angle">&rangle;</span>]{<span
                            class="angle"
                            >&langle;</span
                          ><i>code</i><span class="angle">&rangle;</span>}</span
                        >
                        <a
                          class="anchor-link"
                          data-html-link="pgf.back/state"
                          href="#\state"
                          id="\state"
                          >&para;</a
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    This command declares a new state inside the current
                    decoration automaton. The state is named
                    <span class="angle">&langle;</span><i>name</i
                    ><span class="angle">&rangle;</span>.
                  </p>
                  <p>
                    When the decoration automaton is in state
                    <span class="angle">&langle;</span><i>name</i
                    ><span class="angle">&rangle;</span>, the following things
                    happen:
                  </p>
                  <ul class="enumerate" style="list-style-type: none">
                    <li>
                      <p>
                        <span class="listmarker">1.</span> The
                        <span class="angle">&langle;</span><i>options</i
                        ><span class="angle">&rangle;</span> are parsed. This
                        may lead to a state switch, see below. When this
                        happens, the following steps are not executed. The
                        <span class="angle">&langle;</span><i>options</i
                        ><span class="angle">&rangle;</span> are executed one
                        after the other in the given order. If an option causes
                        a state switch, the switch is immediate, even if later
                        options might cause a different state switch.
                      </p>
                    </li>
                    <li>
                      <p>
                        <span class="listmarker">2.</span> The
                        <span class="angle">&langle;</span><i>code</i
                        ><span class="angle">&rangle;</span> is executed in a
                        <span class="latexlogofont"
                          ><span class="latexlogo"
                            >T<span class="latexlogosub">e</span>X</span
                          ></span
                        >-group with the current transformation matrix set up in
                        such a way that the origin is on the input path at the
                        current point (the point at the distance traveled up to
                        now) and the coordinate system is rotated in such a way
                        that the positive \(x\)-axis points in the direction of
                        the tangent to the input path at the current point,
                        while the positive \(y\)-axis points to the left of this
                        tangent.
                      </p>
                      <p>
                        As described earlier, the
                        <span class="angle">&langle;</span><i>code</i
                        ><span class="angle">&rangle;</span> can have two
                        different effects: If it just contains path construction
                        commands, the decoration will produce an output path,
                        that is, it extends the preexisting path. Here is an
                        example:
                      </p>

                      <figure class="example">
                        <div class="example-image">
                          <p>
                            <span
                              class="lateximagesource"
                              id="lateximage-pgfmanual-3253"
                              ><!--
--><img
                                alt="(-tikz-&nbsp;diagram)"
                                class="lateximage"
                                height="40.155"
                                loading="lazy"
                                src="pgfmanual-images/image-3253.png"
                                style
                                width="121.346"
                            /></span>
                          </p>
                        </div>

                        <div class="example-code">
                          <button class="clipboardButton" type="button">
                            copy
                          </button>
                          <code>
                            <span class="codepreamble"
                              >\usetikzlibrary {decorations} </span
                            ><br />
                            <span class="textcolor" style="color: #0000b2"
                              ><a
                                href="base-decorations#pgf.back/pgfdeclaredecoration"
                                >\pgfdeclaredecoration</a
                              ></span
                            >{<span class="textcolor" style="color: #000000"
                              >example</span
                            >}{<span class="textcolor" style="color: #000000"
                              ><a href="library-automata#pgf.initial"
                                >initial</a
                              ></span
                            >}<br />
                            {<br />
                            <span class="spaces">  </span><span
                              class="textcolor"
                              style="color: #0000b2"
                              ><a href="base-decorations#pgf.back/state"
                                >\state</a
                              ></span
                            >{<span class="textcolor" style="color: #000000"
                              ><a href="library-automata#pgf.initial"
                                >initial</a
                              ></span
                            >}[<span class="textcolor" style="color: #008000"
                              ><a href="tikz-arrows#pgf.width">width</a></span
                            >=<span class="textcolor" style="color: #008000"
                              >10pt</span
                            >]<br />
                            <span class="spaces">  </span>{<br />
                            <span class="spaces">    </span><span
                              class="textcolor"
                              style="color: #0000b2"
                              ><a href="base-paths#pgf.back/pgfpathlineto"
                                >\pgfpathlineto</a
                              ></span
                            >{<span class="textcolor" style="color: #0000b2"
                              ><a href="base-points#pgf.back/pgfpoint"
                                >\pgfpoint</a
                              ></span
                            >{<span class="textcolor" style="color: #000000"
                              >0pt</span
                            >}{<span class="textcolor" style="color: #000000"
                              >5pt</span
                            >}}<br />
                            <span class="spaces">    </span><span
                              class="textcolor"
                              style="color: #0000b2"
                              ><a href="base-paths#pgf.back/pgfpathlineto"
                                >\pgfpathlineto</a
                              ></span
                            >{<span class="textcolor" style="color: #0000b2"
                              ><a href="base-points#pgf.back/pgfpoint"
                                >\pgfpoint</a
                              ></span
                            >{<span class="textcolor" style="color: #000000"
                              >5pt</span
                            >}{<span class="textcolor" style="color: #000000"
                              >5pt</span
                            >}}<br />
                            <span class="spaces">    </span><span
                              class="textcolor"
                              style="color: #0000b2"
                              ><a href="base-paths#pgf.back/pgfpathlineto"
                                >\pgfpathlineto</a
                              ></span
                            >{<span class="textcolor" style="color: #0000b2"
                              ><a href="base-points#pgf.back/pgfpoint"
                                >\pgfpoint</a
                              ></span
                            >{<span class="textcolor" style="color: #000000"
                              >5pt</span
                            >}{<span class="textcolor" style="color: #000000"
                              >-5pt</span
                            >}}<br />
                            <span class="spaces">    </span><span
                              class="textcolor"
                              style="color: #0000b2"
                              ><a href="base-paths#pgf.back/pgfpathlineto"
                                >\pgfpathlineto</a
                              ></span
                            >{<span class="textcolor" style="color: #0000b2"
                              ><a href="base-points#pgf.back/pgfpoint"
                                >\pgfpoint</a
                              ></span
                            >{<span class="textcolor" style="color: #000000"
                              >10pt</span
                            >}{<span class="textcolor" style="color: #000000"
                              >-5pt</span
                            >}}<br />
                            <span class="spaces">    </span><span
                              class="textcolor"
                              style="color: #0000b2"
                              ><a href="base-paths#pgf.back/pgfpathlineto"
                                >\pgfpathlineto</a
                              ></span
                            >{<span class="textcolor" style="color: #0000b2"
                              ><a href="base-points#pgf.back/pgfpoint"
                                >\pgfpoint</a
                              ></span
                            >{<span class="textcolor" style="color: #000000"
                              >10pt</span
                            >}{<span class="textcolor" style="color: #000000"
                              >0pt</span
                            >}}<br />
                            <span class="spaces">  </span>}<br />
                            <span class="spaces">  </span><span
                              class="textcolor"
                              style="color: #0000b2"
                              ><a href="base-decorations#pgf.back/state"
                                >\state</a
                              ></span
                            >{<span class="textcolor" style="color: #000000"
                              >final</span
                            >}<br />
                            <span class="spaces">  </span>{<br />
                            <span class="spaces">    </span><span
                              class="textcolor"
                              style="color: #0000b2"
                              ><a href="base-paths#pgf.back/pgfpathlineto"
                                >\pgfpathlineto</a
                              ></span
                            >{<span class="textcolor" style="color: #0000b2"
                              ><a
                                href="base-decorations#pgf.back/pgfpointdecoratedpathlast"
                                >\pgfpointdecoratedpathlast</a
                              ></span
                            >}<br />
                            <span class="spaces">  </span>}<br />
                            }<br />
                            <span class="textcolor" style="color: #0000b2"
                              ><a href="tikz-scopes#pgf.back/tikz"
                                >\tikz</a
                              ></span
                            >[<span class="textcolor" style="color: #008000"
                              ><a href="tikz-decorations#pgf.decoration"
                                >decoration</a
                              ></span
                            >=<span class="textcolor" style="color: #008000"
                              >example</span
                            >]<br />
                            {<br />
                            <span class="spaces">  </span><span
                              class="textcolor"
                              style="color: #0000b2"
                              ><a href="tikz-actions#pgf.back/draw"
                                >\draw</a
                              ></span
                            > [<span
                              class="textcolor"
                              style="color: #008000"
                              ><a href="tikz-decorations#pgf.decorate"
                                >decorate</a
                              ></span
                            >]<span class="spaces">     </span><span
                              class="textcolor"
                              style="color: #800080"
                              >(0,0)</span
                            > <span
                              class="textcolor"
                              style="color: #000000"
                              ><a href="tikz-paths#pgf.--">--</a></span
                            >
                            <span class="textcolor" style="color: #800080"
                              >(3,0)</span
                            >;<br />
                            <span class="spaces">  </span><span
                              class="textcolor"
                              style="color: #0000b2"
                              ><a href="tikz-actions#pgf.back/draw"
                                >\draw</a
                              ></span
                            > [<span
                              class="textcolor"
                              style="color: #008000"
                              >red</span
                            >,<span class="textcolor" style="color: #008000"
                              ><a href="tikz-decorations#pgf.decorate"
                                >decorate</a
                              ></span
                            >] <span
                              class="textcolor"
                              style="color: #800080"
                              >(0,0)</span
                            > <span
                              class="textcolor"
                              style="color: #000000"
                              ><a href="tikz-paths#pgf.to">to</a></span
                            >
                            [<span class="textcolor" style="color: #008000"
                              ><a href="library-edges#pgf.out">out</a></span
                            >=<span class="textcolor" style="color: #008000"
                              >45</span
                            >,<span class="textcolor" style="color: #008000"
                              ><a href="library-edges#pgf.in">in</a></span
                            >=<span class="textcolor" style="color: #008000"
                              >135</span
                            >] <span
                              class="textcolor"
                              style="color: #800080"
                              >(3,0)</span
                            >;<br />
                            }<br />
                          </code>
                        </div>
                      </figure>
                      <p>
                        Alternatively, the <span class="angle">&langle;</span
                        ><i>code</i><span class="angle">&rangle;</span> can also
                        contain the
                        <span class="verb">\pgfusepath</span> command. This will
                        use the path in the usual manner, where &ldquo;the
                        path&rdquo; is the preexisting path plus a part of the
                        output path for the first invocation and the different
                        parts of the rest of the output path for the following
                        invocation. Here is an example:
                      </p>

                      <figure class="example">
                        <div class="example-image">
                          <p>
                            <span
                              class="lateximagesource"
                              id="lateximage-pgfmanual-3254"
                              ><!--
--><img
                                alt="(-tikz-&nbsp;diagram)"
                                class="lateximage"
                                height="241.034"
                                loading="lazy"
                                src="pgfmanual-images/image-3254.png"
                                style
                                width="130.706"
                            /></span>
                          </p>
                        </div>

                        <div class="example-code">
                          <button class="clipboardButton" type="button">
                            copy
                          </button>
                          <code>
                            <span class="codepreamble"
                              >\usetikzlibrary {decorations,shapes.geometric} </span
                            ><br />
                            <span class="textcolor" style="color: #0000b2"
                              ><a
                                href="base-decorations#pgf.back/pgfdeclaredecoration"
                                >\pgfdeclaredecoration</a
                              ></span
                            >{<span class="textcolor" style="color: #000000"
                              >stars</span
                            >}{<span class="textcolor" style="color: #000000"
                              ><a href="library-automata#pgf.initial"
                                >initial</a
                              ></span
                            >}{<br />
                            <span class="spaces">  </span><span
                              class="textcolor"
                              style="color: #0000b2"
                              ><a href="base-decorations#pgf.back/state"
                                >\state</a
                              ></span
                            >{<span class="textcolor" style="color: #000000"
                              ><a href="library-automata#pgf.initial"
                                >initial</a
                              ></span
                            >}[<span class="textcolor" style="color: #008000"
                              ><a href="tikz-arrows#pgf.width">width</a></span
                            >=<span class="textcolor" style="color: #008000"
                              >15pt</span
                            >]<br />
                            <span class="spaces">  </span>{<br />
                            <span class="spaces">    </span><span
                              class="textcolor"
                              style="color: #0000b2"
                              ><a href="math-parsing#pgf.back/pgfmathparse"
                                >\pgfmathparse</a
                              ></span
                            >{<span class="textcolor" style="color: #000000"
                              ><a href="tikz-arrows#pgf.round">round</a></span
                            ><span class="textcolor" style="color: #800080"
                              >(rnd*100)</span
                            >}<br />
                            <span class="spaces">    </span><span
                              class="textcolor"
                              style="color: #0000b2"
                              ><a href="base-actions#pgf.back/pgfsetfillcolor"
                                >\pgfsetfillcolor</a
                              ></span
                            >{<span class="textcolor" style="color: #000000"
                              >yellow!</span
                            ><span class="textcolor" style="color: #0000b2"
                              >\pgfmathresult</span
                            ><span class="textcolor" style="color: #000000"
                              >!orange</span
                            >}<br />
                            <span class="spaces">    </span><span
                              class="textcolor"
                              style="color: #0000b2"
                              ><a href="base-actions#pgf.back/pgfsetstrokecolor"
                                >\pgfsetstrokecolor</a
                              ></span
                            >{<span class="textcolor" style="color: #000000"
                              >yellow!</span
                            ><span class="textcolor" style="color: #0000b2"
                              >\pgfmathresult</span
                            ><span class="textcolor" style="color: #000000"
                              >!red</span
                            >}<br />
                            <span class="spaces">    </span><span
                              class="textcolor"
                              style="color: #0000b2"
                              ><a href="base-nodes#pgf.back/pgfnode"
                                >\pgfnode</a
                              ></span
                            >{<span class="textcolor" style="color: #000000"
                              ><a href="library-shapes#pgf.star">star</a></span
                            >}{<span class="textcolor" style="color: #000000"
                              >center</span
                            >}{}{}{<span
                              class="textcolor"
                              style="color: #0000b2"
                              ><a href="base-actions#pgf.back/pgfusepath"
                                >\pgfusepath</a
                              ></span
                            >{<span class="textcolor" style="color: #000000"
                              >stroke</span
                            >,<span class="textcolor" style="color: #000000"
                              ><a href="tikz-actions#pgf.fill">fill</a></span
                            >}}<br />
                            <span class="spaces">  </span>}<br />
                            <span class="spaces">  </span><span
                              class="textcolor"
                              style="color: #0000b2"
                              ><a href="base-decorations#pgf.back/state"
                                >\state</a
                              ></span
                            >{<span class="textcolor" style="color: #000000"
                              >final</span
                            >}<br />
                            <span class="spaces">  </span>{<br />
                            <span class="spaces">    </span><span
                              class="textcolor"
                              style="color: #0000b2"
                              ><a href="base-paths#pgf.back/pgfpathmoveto"
                                >\pgfpathmoveto</a
                              ></span
                            >{<span class="textcolor" style="color: #0000b2"
                              ><a
                                href="base-decorations#pgf.back/pgfpointdecoratedpathlast"
                                >\pgfpointdecoratedpathlast</a
                              ></span
                            >}<br />
                            <span class="spaces">  </span>}<br />
                            }<br />
                            <span class="textcolor" style="color: #0000b2"
                              ><a href="tikz-scopes#pgf.back/tikz"
                                >\tikz</a
                              ></span
                            ><span class="textcolor" style="color: #0000b2"
                              ><a href="tikz-paths#pgf.back/path"
                                >\path</a
                              ></span
                            >[<span class="textcolor" style="color: #008000"
                              ><a href="tikz-decorations#pgf.decorate"
                                >decorate</a
                              ></span
                            >, <span
                              class="textcolor"
                              style="color: #008000"
                              ><a href="tikz-decorations#pgf.decoration"
                                >decoration</a
                              ></span
                            >=<span class="textcolor" style="color: #008000"
                              >stars</span
                            >, <span
                              class="textcolor"
                              style="color: #008000"
                              ><a href="library-shapes#pgf.star:point:ratio"
                                >star point ratio</a
                              ></span
                            >=<span class="textcolor" style="color: #008000"
                              >2</span
                            >, <span
                              class="textcolor"
                              style="color: #008000"
                              ><a href="library-shapes#pgf.star:points"
                                >star points</a
                              ></span
                            >=<span class="textcolor" style="color: #008000"
                              >5</span
                            >,<br />
                            <span class="spaces">           </span><span
                              class="textcolor"
                              style="color: #008000"
                              ><a href="tikz-shapes#pgf.inner:sep"
                                >inner sep</a
                              ></span
                            >=<span class="textcolor" style="color: #008000"
                              >0</span
                            >, <span
                              class="textcolor"
                              style="color: #008000"
                              ><a href="tikz-shapes#pgf.minimum:size"
                                >minimum size</a
                              ></span
                            >=<span class="textcolor" style="color: #008000"
                              >rnd*10pt+2pt</span
                            >]<br />
                            <span class="spaces">  </span><span
                              class="textcolor"
                              style="color: #800080"
                              >(0,0)</span
                            ><span class="spaces"> </span>..<span class="spaces"> </span><span
                              class="textcolor"
                              style="color: #000000"
                              ><a href="library-edges#pgf.controls"
                                >controls</a
                              ></span
                            >
                            <span class="textcolor" style="color: #800080"
                              >(0,2)</span
                            ><span class="spaces">  </span><span
                              class="textcolor"
                              style="color: #000000"
                              ><a href="pgfkeys#pgf.and">and</a></span
                            >
                            <span class="textcolor" style="color: #800080"
                              >(3,2)</span
                            ><span class="spaces">  </span>..<span class="spaces"> </span><span
                              class="textcolor"
                              style="color: #800080"
                              >(3,0)</span
                            ><br />
                            <span class="spaces">        </span>..<span class="spaces"> </span><span
                              class="textcolor"
                              style="color: #000000"
                              ><a href="library-edges#pgf.controls"
                                >controls</a
                              ></span
                            >
                            <span class="textcolor" style="color: #800080"
                              >(3,-3)</span
                            > <span
                              class="textcolor"
                              style="color: #000000"
                              ><a href="pgfkeys#pgf.and">and</a></span
                            >
                            <span class="textcolor" style="color: #800080"
                              >(0,0)</span
                            ><span class="spaces">  </span>..<span class="spaces"> </span><span
                              class="textcolor"
                              style="color: #800080"
                              >(0,-3)</span
                            ><br />
                            <span class="spaces">        </span>..<span class="spaces"> </span><span
                              class="textcolor"
                              style="color: #000000"
                              ><a href="library-edges#pgf.controls"
                                >controls</a
                              ></span
                            >
                            <span class="textcolor" style="color: #800080"
                              >(0,-5)</span
                            > <span
                              class="textcolor"
                              style="color: #000000"
                              ><a href="pgfkeys#pgf.and">and</a></span
                            >
                            <span class="textcolor" style="color: #800080"
                              >(3,-5)</span
                            ><span class="spaces"> </span>..<span class="spaces"> </span><span
                              class="textcolor"
                              style="color: #800080"
                              >(3,-3)</span
                            >;<br />
                          </code>
                        </div>
                      </figure>
                    </li>
                    <li>
                      <p>
                        <span class="listmarker">3.</span> After the
                        <span class="angle">&langle;</span><i>code</i
                        ><span class="angle">&rangle;</span> has been executed
                        (possibly more than once, if the
                        <span class="verb">repeat state</span> option is used),
                        the state switches to whatever state has been specified
                        inside the <span class="angle">&langle;</span
                        ><i>options</i><span class="angle">&rangle;</span> using
                        the <span class="verb">next state</span> option. If no
                        <span class="verb">next state</span> has been specified,
                        the state stays the same.
                      </p>
                    </li>
                  </ul>
                  <p>
                    The <span class="angle">&langle;</span><i>options</i
                    ><span class="angle">&rangle;</span> are executed with the
                    key path set to
                    <span class="verb">/pgf/decoration automaton</span>. The
                    following keys are defined:
                  </p>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a
                              id="pgf./pgf/decoration:automaton/switch:if:less:than"
                            ></a
                            ><a id="pgf.switch:if:less:than"></a>
                            <span class="hl-def"
                              ><kbd
                                ><span class="keyname"
                                  ><span class="declare"
                                    >/pgf/decoration automaton/switch if less
                                    than</span
                                  ></span
                                >=</kbd
                              ><span class="angle">&langle;</span
                              ><i>dimension</i
                              ><span class="angle">&rangle;</span><kbd> to </kbd
                              ><span class="angle">&langle;</span
                              ><i>new state</i
                              ><span class="angle">&rangle;</span></span
                            ><span class="hl-default">(no default)</span>
                            <a
                              class="anchor-link"
                              data-html-link="pgf./pgf/decoration:automaton/switch:if:less:than"
                              href="#pgf/decoration:automaton/switch:if:less:than"
                              id="pgf/decoration:automaton/switch:if:less:than"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        When this key is encountered,
                        <span class="textsc">pgf</span> checks whether the
                        remaining distance to the end of the input path is less
                        than <span class="angle">&langle;</span><i>dimension</i
                        ><span class="angle">&rangle;</span>. If so, an
                        immediate state switch to
                        <span class="angle">&langle;</span><i>new state</i
                        ><span class="angle">&rangle;</span> occurs.
                      </p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a
                              id="pgf./pgf/decoration:automaton/switch:if:input:segment:less:than"
                            ></a
                            ><a id="pgf.switch:if:input:segment:less:than"></a>
                            <span class="hl-def"
                              ><kbd
                                ><span class="keyname"
                                  ><span class="declare"
                                    >/pgf/decoration automaton/switch if input
                                    segment less than</span
                                  ></span
                                >=</kbd
                              ><br />
                              <span class="angle">&langle;</span><i>dimension</i
                              ><span class="angle">&rangle;</span><kbd> to </kbd
                              ><span class="angle">&langle;</span
                              ><i>new state</i
                              ><span class="angle">&rangle;</span></span
                            ><span class="hl-default">(no default)</span>
                            <a
                              class="anchor-link"
                              data-html-link="pgf./pgf/decoration:automaton/switch:if:input:segment:less:than"
                              href="#pgf/decoration:automaton/switch:if:input:segment:less:than"
                              id="pgf/decoration:automaton/switch:if:input:segment:less:than"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        When this key is encountered,
                        <span class="textsc">pgf</span> checks whether the
                        remaining distance to the end of the current input
                        segment of the input path is less than
                        <span class="angle">&langle;</span><i>dimension</i
                        ><span class="angle">&rangle;</span>. If so, an
                        immediate state switch to
                        <span class="angle">&langle;</span><i>new state</i
                        ><span class="angle">&rangle;</span> occurs.
                      </p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a id="pgf./pgf/decoration:automaton/width"></a>
                            <span class="hl-def"
                              ><kbd
                                ><span class="keyname"
                                  ><span class="declare"
                                    >/pgf/decoration automaton/width</span
                                  ></span
                                >=</kbd
                              ><span class="angle">&langle;</span
                              ><i>dimension</i
                              ><span class="angle">&rangle;</span></span
                            ><span class="hl-default">(no default)</span>
                            <a
                              class="anchor-link"
                              data-html-link="pgf./pgf/decoration:automaton/width"
                              href="#pgf/decoration:automaton/width"
                              id="pgf/decoration:automaton/width"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        First, this option causes an immediate switch to the
                        state <span class="verb">final</span> if the remaining
                        distance on the input path is less than
                        <span class="angle">&langle;</span><i>dimension</i
                        ><span class="angle">&rangle;</span>. The effect is the
                        same as if you had said
                        <span class="verb">switch if less than=</span
                        ><span class="angle">&langle;</span><i>dimension</i
                        ><span class="angle">&rangle;</span
                        ><span class="verb"> to final</span> just before the
                        <span class="verb">width</span> option.
                      </p>
                      <p>
                        If no switch occurs, this option tells
                        <span class="textsc">pgf</span> the width of the
                        segment. The current point will travel along the input
                        path (as described earlier) by this distance.
                      </p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a
                              id="pgf./pgf/decoration:automaton/repeat:state"
                            ></a
                            ><a id="pgf.repeat:state"></a>
                            <span class="hl-def"
                              ><kbd
                                ><span class="keyname"
                                  ><span class="declare"
                                    >/pgf/decoration automaton/repeat
                                    state</span
                                  ></span
                                >=</kbd
                              ><span class="angle">&langle;</span
                              ><i>repetitions</i
                              ><span class="angle">&rangle;</span> </span
                            ><span class="hl-default"
                              >(no default, initially <kbd>0</kbd>)</span
                            >
                            <a
                              class="anchor-link"
                              data-html-link="pgf./pgf/decoration:automaton/repeat:state"
                              href="#pgf/decoration:automaton/repeat:state"
                              id="pgf/decoration:automaton/repeat:state"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        Tells <span class="textsc">pgf</span> how long the
                        automaton stays &ldquo;normally&rdquo; in the current
                        state. This count is reset to
                        <span class="angle">&langle;</span><i>repetitions</i
                        ><span class="angle">&rangle;</span> each time one of
                        the <span class="verb">switch if</span> keys causes a
                        state switch. If no state switches occur, the
                        <span class="angle">&langle;</span><i>code</i
                        ><span class="angle">&rangle;</span> is executed and the
                        repetition counter is decreased. Then, there is once
                        more a chance of a state change caused by any of the
                        <span class="angle">&langle;</span><i>options</i
                        ><span class="angle">&rangle;</span>. If no repetition
                        occurs, the <span class="angle">&langle;</span
                        ><i>code</i><span class="angle">&rangle;</span> is
                        executed once more and the counter is decreased once
                        more. When the counter reaches zero, the
                        <span class="angle">&langle;</span><i>code</i
                        ><span class="angle">&rangle;</span> is executed once
                        more, but, then, a different state is entered, as
                        specified by the
                        <span class="verb">next state</span> option.
                      </p>
                      <p>
                        Note, that the maximum number of times the state will be
                        executed is \(\meta {repetitions}+1\).
                      </p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a id="pgf./pgf/decoration:automaton/next:state"></a
                            ><a id="pgf.next:state"></a>
                            <span class="hl-def"
                              ><kbd
                                ><span class="keyname"
                                  ><span class="declare"
                                    >/pgf/decoration automaton/next state</span
                                  ></span
                                >=</kbd
                              ><span class="angle">&langle;</span
                              ><i>new state</i
                              ><span class="angle">&rangle;</span></span
                            ><span class="hl-default">(no default)</span>
                            <a
                              class="anchor-link"
                              data-html-link="pgf./pgf/decoration:automaton/next:state"
                              href="#pgf/decoration:automaton/next:state"
                              id="pgf/decoration:automaton/next:state"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        After the <span class="angle">&langle;</span><i>code</i
                        ><span class="angle">&rangle;</span> for state has been
                        executed for the last time, a state switch to
                        <span class="angle">&langle;</span><i>new state</i
                        ><span class="angle">&rangle;</span> is performed. If
                        this option is not given, the next state is the same as
                        the current state.
                      </p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a
                              id="pgf./pgf/decoration:automaton/if:input:segment:is:closepath"
                            ></a
                            ><a id="pgf.if:input:segment:is:closepath"></a>
                            <span class="hl-def"
                              ><kbd
                                ><span class="keyname"
                                  ><span class="declare"
                                    >/pgf/decoration automaton/if input segment
                                    is closepath</span
                                  ></span
                                >=</kbd
                              ><span class="angle">&langle;</span><i>options</i
                              ><span class="angle">&rangle;</span></span
                            ><span class="hl-default">(no default)</span>
                            <a
                              class="anchor-link"
                              data-html-link="pgf./pgf/decoration:automaton/if:input:segment:is:closepath"
                              href="#pgf/decoration:automaton/if:input:segment:is:closepath"
                              id="pgf/decoration:automaton/if:input:segment:is:closepath"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        This key checks whether the current input segment is a
                        closepath operation. If so, the
                        <span class="angle">&langle;</span><i>options</i
                        ><span class="angle">&rangle;</span> get executed;
                        otherwise nothing happens. You can use this option to
                        handle a closepath in some special way, for instance,
                        switching to a new state in which
                        <span class="verb">\pgfpathclose</span> is executed.
                      </p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a
                              id="pgf./pgf/decoration:automaton/auto:end:on:length"
                            ></a
                            ><a id="pgf.auto:end:on:length"></a>
                            <span class="hl-def"
                              ><kbd
                                ><span class="keyname"
                                  ><span class="declare"
                                    >/pgf/decoration automaton/auto end on
                                    length</span
                                  ></span
                                >=</kbd
                              ><span class="angle">&langle;</span
                              ><i>dimension</i
                              ><span class="angle">&rangle;</span></span
                            ><span class="hl-default">(no default)</span>
                            <a
                              class="anchor-link"
                              data-html-link="pgf./pgf/decoration:automaton/auto:end:on:length"
                              href="#pgf/decoration:automaton/auto:end:on:length"
                              id="pgf/decoration:automaton/auto:end:on:length"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        This key is just included for convenience, it does
                        nothing that cannot be achieved using the previous
                        options. The effect is the following: If the remaining
                        input path&rsquo;s length is at most
                        <span class="angle">&langle;</span><i>dimension</i
                        ><span class="angle">&rangle;</span>, the decorated path
                        is ended with a straight line to the end of the input
                        path and, possibly, it is closed, namely if the input
                        path ended with a closepath operation. Otherwise, it is
                        checked whether the current input segment is a closepath
                        segment and whether the remaining distance on the
                        current input segment is at most
                        <span class="angle">&langle;</span><i>distance</i
                        ><span class="angle">&rangle;</span>. If so, then a
                        closepath operation is used to close the decorated path
                        and the automaton continues with the next subpath,
                        remaining in the current state.
                      </p>
                      <p>In all other cases, nothing happens.</p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a
                              id="pgf./pgf/decoration:automaton/auto:corner:on:length"
                            ></a
                            ><a id="pgf.auto:corner:on:length"></a>
                            <span class="hl-def"
                              ><kbd
                                ><span class="keyname"
                                  ><span class="declare"
                                    >/pgf/decoration automaton/auto corner on
                                    length</span
                                  ></span
                                >=</kbd
                              ><span class="angle">&langle;</span
                              ><i>dimension</i
                              ><span class="angle">&rangle;</span></span
                            ><span class="hl-default">(no default)</span>
                            <a
                              class="anchor-link"
                              data-html-link="pgf./pgf/decoration:automaton/auto:corner:on:length"
                              href="#pgf/decoration:automaton/auto:corner:on:length"
                              id="pgf/decoration:automaton/auto:corner:on:length"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        This key has the following effect: Firstly, in case the
                        <span class="latexlogofont"
                          ><span class="latexlogo"
                            >T<span class="latexlogosub">e</span>X</span
                          ></span
                        >-if
                        <span class="verb">\ifpgfdecoratepathhascorners</span>
                        is false, nothing happens. Otherwise, it is tested
                        whether the remaining distance on the current input
                        segment is at most <span class="angle">&langle;</span
                        ><i>dimension</i><span class="angle">&rangle;</span>. If
                        so, a <span class="verb">lineto</span>
                        operation is used to reach the end of this input segment
                        and the automaton continues with the next input segment,
                        but remains in the current state.
                      </p>
                      <p>
                        The main idea behind this option is to avoid having
                        decoration segments &ldquo;overshoot&rdquo; past a
                        corner.
                      </p>
                    </ul>
                  </div>
                  <p>
                    You may sometimes wish to do computations outside the
                    transformational
                    <span class="latexlogofont"
                      ><span class="latexlogo"
                        >T<span class="latexlogosub">e</span>X</span
                      ></span
                    >-group of the current segment, so that these results of
                    these computations are available in the next state. For
                    this, the following two options are useful:
                  </p>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a
                              id="pgf./pgf/decoration:automaton/persistent:precomputation"
                            ></a
                            ><a id="pgf.persistent:precomputation"></a>
                            <span class="hl-def"
                              ><kbd
                                ><span class="keyname"
                                  ><span class="declare"
                                    >/pgf/decoration automaton/persistent
                                    precomputation</span
                                  ></span
                                >=</kbd
                              ><span class="angle">&langle;</span><i>precode</i
                              ><span class="angle">&rangle;</span></span
                            ><span class="hl-default">(no default)</span>
                            <a
                              class="anchor-link"
                              data-html-link="pgf./pgf/decoration:automaton/persistent:precomputation"
                              href="#pgf/decoration:automaton/persistent:precomputation"
                              id="pgf/decoration:automaton/persistent:precomputation"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        If the <span class="angle">&langle;</span><i>code</i
                        ><span class="angle">&rangle;</span> of the state is
                        executed, the <span class="angle">&langle;</span
                        ><i>precode</i><span class="angle">&rangle;</span> is
                        executed first and it is executed outside the
                        <span class="latexlogofont"
                          ><span class="latexlogo"
                            >T<span class="latexlogosub">e</span>X</span
                          ></span
                        >-group of the <span class="angle">&langle;</span
                        ><i>code</i><span class="angle">&rangle;</span>. Note
                        that when the <span class="angle">&langle;</span
                        ><i>precode</i><span class="angle">&rangle;</span> is
                        executed, the transformation matrix is not set up.
                      </p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a
                              id="pgf./pgf/decoration:automaton/persistent:postcomputation"
                            ></a
                            ><a id="pgf.persistent:postcomputation"></a>
                            <span class="hl-def"
                              ><kbd
                                ><span class="keyname"
                                  ><span class="declare"
                                    >/pgf/decoration automaton/persistent
                                    postcomputation</span
                                  ></span
                                >=</kbd
                              ><span class="angle">&langle;</span><i>postcode</i
                              ><span class="angle">&rangle;</span></span
                            ><span class="hl-default">(no default)</span>
                            <a
                              class="anchor-link"
                              data-html-link="pgf./pgf/decoration:automaton/persistent:postcomputation"
                              href="#pgf/decoration:automaton/persistent:postcomputation"
                              id="pgf/decoration:automaton/persistent:postcomputation"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        Works like the
                        <span class="verb">persistent precomputation</span>
                        option, only the <span class="angle">&langle;</span
                        ><i>postcode</i><span class="angle">&rangle;</span> is
                        executed after (and also outside) the
                        <span class="latexlogofont"
                          ><span class="latexlogo"
                            >T<span class="latexlogosub">e</span>X</span
                          ></span
                        >-group of the main <span class="angle">&langle;</span
                        ><i>code</i><span class="angle">&rangle;</span>.
                      </p>
                    </ul>
                  </div>
                  <p>
                    There are a number of macros and dimensions which may be
                    useful inside a decoration automaton. The following macros
                    are available:
                  </p>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a id="pgf.back/pgfdecoratedpathlength"></a>
                            <span class="hl-def"
                              ><span class="declare"
                                ><kbd>\pgfdecoratedpathlength</kbd></span
                              ></span
                            >
                            <a
                              class="anchor-link"
                              data-html-link="pgf.back/pgfdecoratedpathlength"
                              href="#\pgfdecoratedpathlength"
                              id="\pgfdecoratedpathlength"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        The length of the input path. If the input path consists
                        of several input segments, this number is the sum of the
                        lengths of the input segments.
                      </p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a id="pgf.back/pgfdecoratedinputsegmentlength"></a>
                            <span class="hl-def"
                              ><span class="declare"
                                ><kbd
                                  >\pgfdecoratedinputsegmentlength</kbd
                                ></span
                              ></span
                            >
                            <a
                              class="anchor-link"
                              data-html-link="pgf.back/pgfdecoratedinputsegmentlength"
                              href="#\pgfdecoratedinputsegmentlength"
                              id="\pgfdecoratedinputsegmentlength"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        The length of the current input segment of the input
                        path. &ldquo;Current input segment&rdquo; refers to the
                        input segment on which the current point lies.
                      </p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a id="pgf.back/pgfpointdecoratedpathlast"></a>
                            <span class="hl-def"
                              ><span class="declare"
                                ><kbd>\pgfpointdecoratedpathlast</kbd></span
                              ></span
                            >
                            <a
                              class="anchor-link"
                              data-html-link="pgf.back/pgfpointdecoratedpathlast"
                              href="#\pgfpointdecoratedpathlast"
                              id="\pgfpointdecoratedpathlast"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>The final point of the input path.</p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a
                              id="pgf.back/pgfpointdecoratedinputsegmentlast"
                            ></a>
                            <span class="hl-def"
                              ><span class="declare"
                                ><kbd
                                  >\pgfpointdecoratedinputsegmentlast</kbd
                                ></span
                              ></span
                            >
                            <a
                              class="anchor-link"
                              data-html-link="pgf.back/pgfpointdecoratedinputsegmentlast"
                              href="#\pgfpointdecoratedinputsegmentlast"
                              id="\pgfpointdecoratedinputsegmentlast"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        The final point of the current input segment of the
                        input path.
                      </p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a id="pgf.back/pgfdecoratedangle"></a>
                            <span class="hl-def"
                              ><span class="declare"
                                ><kbd>\pgfdecoratedangle</kbd></span
                              ></span
                            >
                            <a
                              class="anchor-link"
                              data-html-link="pgf.back/pgfdecoratedangle"
                              href="#\pgfdecoratedangle"
                              id="\pgfdecoratedangle"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        The angle of the tangent to the decorated path at the
                        <em>origin</em> of the current segment. The
                        transformation matrix applied at the beginning of a
                        state includes a rotation equivalent to this angle.
                      </p>
                    </ul>
                  </div>
                  <p>
                    The following
                    <span class="latexlogofont"
                      ><span class="latexlogo"
                        >T<span class="latexlogosub">e</span>X</span
                      ></span
                    >
                    dimension registers are also available inside the automaton:
                  </p>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a id="pgf.back/pgfdecoratedremainingdistance"></a>
                            <span class="hl-def"
                              ><span class="declare"
                                ><kbd>\pgfdecoratedremainingdistance</kbd></span
                              ></span
                            >
                            <a
                              class="anchor-link"
                              data-html-link="pgf.back/pgfdecoratedremainingdistance"
                              href="#\pgfdecoratedremainingdistance"
                              id="\pgfdecoratedremainingdistance"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>The remaining distance on the input path.</p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a id="pgf.back/pgfdecoratedcompleteddistance"></a>
                            <span class="hl-def"
                              ><span class="declare"
                                ><kbd>\pgfdecoratedcompleteddistance</kbd></span
                              ></span
                            >
                            <a
                              class="anchor-link"
                              data-html-link="pgf.back/pgfdecoratedcompleteddistance"
                              href="#\pgfdecoratedcompleteddistance"
                              id="\pgfdecoratedcompleteddistance"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>The completed distance on the input path.</p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a
                              id="pgf.back/pgfdecoratedinputsegmentremainingdistance"
                            ></a>
                            <span class="hl-def"
                              ><span class="declare"
                                ><kbd
                                  >\pgfdecoratedinputsegmentremainingdistance</kbd
                                ></span
                              ></span
                            >
                            <a
                              class="anchor-link"
                              data-html-link="pgf.back/pgfdecoratedinputsegmentremainingdistance"
                              href="#\pgfdecoratedinputsegmentremainingdistance"
                              id="\pgfdecoratedinputsegmentremainingdistance"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        The remaining distance on the current input segment of
                        the input path.
                      </p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a
                              id="pgf.back/pgfdecoratedinputsegmentcompleteddistance"
                            ></a>
                            <span class="hl-def"
                              ><span class="declare"
                                ><kbd
                                  >\pgfdecoratedinputsegmentcompleteddistance</kbd
                                ></span
                              ></span
                            >
                            <a
                              class="anchor-link"
                              data-html-link="pgf.back/pgfdecoratedinputsegmentcompleteddistance"
                              href="#\pgfdecoratedinputsegmentcompleteddistance"
                              id="\pgfdecoratedinputsegmentcompleteddistance"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        The completed distance on the current input segment of
                        the input path.
                      </p>
                    </ul>
                  </div>
                  <p>
                    Further keys and macros are defined and used by the
                    decoration libraries, see Section&nbsp;<a
                      href="library-decorations#section-library-decorations"
                      >50</a
                    >.
                  </p>
                  <p>
                    The following example shows how these options can be used:
                  </p>

                  <figure class="example">
                    <div class="example-image">
                      <p>
                        <span
                          class="lateximagesource"
                          id="lateximage-pgfmanual-3255"
                          ><!--
--><img
                            alt="(-tikz-&nbsp;diagram)"
                            class="lateximage"
                            height="245.546"
                            loading="lazy"
                            src="pgfmanual-images/image-3255.png"
                            style
                            width="119.461"
                        /></span>
                      </p>
                    </div>

                    <div class="example-code">
                      <button class="clipboardButton" type="button">
                        copy
                      </button>
                      <code>
                        <span class="codepreamble"
                          >\usetikzlibrary {decorations} </span
                        ><br />
                        <span class="textcolor" style="color: #0000b2"
                          ><a
                            href="base-decorations#pgf.back/pgfdeclaredecoration"
                            >\pgfdeclaredecoration</a
                          ></span
                        >{<span class="textcolor" style="color: #000000"
                          >complicated</span
                        >
                        <span class="textcolor" style="color: #000000"
                          >example</span
                        >
                        <span class="textcolor" style="color: #000000"
                          ><a href="tikz-decorations#pgf.decoration"
                            >decoration</a
                          ></span
                        >}{<span class="textcolor" style="color: #000000"
                          ><a href="library-automata#pgf.initial"
                            >initial</a
                          ></span
                        >}<br />
                        {<br />
                        <span class="spaces">  </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          ><a href="base-decorations#pgf.back/state"
                            >\state</a
                          ></span
                        >{<span class="textcolor" style="color: #000000"
                          ><a href="library-automata#pgf.initial"
                            >initial</a
                          ></span
                        >}[<span class="textcolor" style="color: #008000"
                          ><a href="tikz-arrows#pgf.width">width</a></span
                        >=<span class="textcolor" style="color: #008000"
                          >5pt</span
                        >,<span class="textcolor" style="color: #008000"
                          ><a href="base-decorations#pgf.next:state"
                            >next state</a
                          ></span
                        >=<span class="textcolor" style="color: #008000"
                          >up</span
                        >]<br />
                        <span class="spaces">  </span>{<span class="spaces"> </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          ><a href="base-paths#pgf.back/pgfpathlineto"
                            >\pgfpathlineto</a
                          ></span
                        >{<span class="textcolor" style="color: #0000b2"
                          ><a href="base-points#pgf.back/pgfpoint"
                            >\pgfpoint</a
                          ></span
                        >{<span class="textcolor" style="color: #000000"
                          >5pt</span
                        >}{<span class="textcolor" style="color: #000000"
                          >0pt</span
                        >}}<span class="spaces"> </span>}<br />
                        <br />
                        <span class="spaces">  </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          ><a href="base-decorations#pgf.back/state"
                            >\state</a
                          ></span
                        >{<span class="textcolor" style="color: #000000"
                          >up</span
                        >}[<span class="textcolor" style="color: #008000"
                          ><a href="tikz-arrows#pgf.width">width</a></span
                        >=<span class="textcolor" style="color: #008000"
                          >5pt</span
                        >,<span class="textcolor" style="color: #008000"
                          ><a href="base-decorations#pgf.next:state"
                            >next state</a
                          ></span
                        >=<span class="textcolor" style="color: #008000"
                          >down</span
                        >]<br />
                        <span class="spaces">  </span>{<br />
                        <span class="spaces">    </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          >\ifdim</span
                        ><span class="textcolor" style="color: #0000b2"
                          ><a
                            href="base-decorations#pgf.back/pgfdecoratedremainingdistance"
                            >\pgfdecoratedremainingdistance</a
                          ></span
                        ><span class="textcolor" style="color: #000000"
                          ><a href="tikz-arrows#pgf.&gt;">&gt;</a></span
                        ><span class="textcolor" style="color: #0000b2"
                          ><a
                            href="base-decorations#pgf.back/pgfdecoratedcompleteddistance"
                            >\pgfdecoratedcompleteddistance</a
                          ></span
                        ><br />
                        <span class="spaces">      </span><span
                          class="example-code-comment"
                          >% Growing</span
                        ><br />
                        <span class="spaces">      </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          ><a href="base-paths#pgf.back/pgfpathlineto"
                            >\pgfpathlineto</a
                          ></span
                        >{<span class="textcolor" style="color: #0000b2"
                          ><a href="base-points#pgf.back/pgfpoint"
                            >\pgfpoint</a
                          ></span
                        >{<span class="textcolor" style="color: #000000"
                          >0pt</span
                        >}{<span class="textcolor" style="color: #0000b2"
                          ><a
                            href="base-decorations#pgf.back/pgfdecoratedcompleteddistance"
                            >\pgfdecoratedcompleteddistance</a
                          ></span
                        >}}<br />
                        <span class="spaces">      </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          ><a href="base-paths#pgf.back/pgfpathlineto"
                            >\pgfpathlineto</a
                          ></span
                        >{<span class="textcolor" style="color: #0000b2"
                          ><a href="base-points#pgf.back/pgfpoint"
                            >\pgfpoint</a
                          ></span
                        >{<span class="textcolor" style="color: #000000"
                          >5pt</span
                        >}{<span class="textcolor" style="color: #0000b2"
                          ><a
                            href="base-decorations#pgf.back/pgfdecoratedcompleteddistance"
                            >\pgfdecoratedcompleteddistance</a
                          ></span
                        >}}<br />
                        <span class="spaces">      </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          ><a href="base-paths#pgf.back/pgfpathlineto"
                            >\pgfpathlineto</a
                          ></span
                        >{<span class="textcolor" style="color: #0000b2"
                          ><a href="base-points#pgf.back/pgfpoint"
                            >\pgfpoint</a
                          ></span
                        >{<span class="textcolor" style="color: #000000"
                          >5pt</span
                        >}{<span class="textcolor" style="color: #000000"
                          >0pt</span
                        >}}<br />
                        <span class="spaces">    </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          >\else</span
                        ><br />
                        <span class="spaces">      </span><span
                          class="example-code-comment"
                          >% Shrinking</span
                        ><br />
                        <span class="spaces">      </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          ><a href="base-paths#pgf.back/pgfpathlineto"
                            >\pgfpathlineto</a
                          ></span
                        >{<span class="textcolor" style="color: #0000b2"
                          ><a href="base-points#pgf.back/pgfpoint"
                            >\pgfpoint</a
                          ></span
                        >{<span class="textcolor" style="color: #000000"
                          >0pt</span
                        >}{<span class="textcolor" style="color: #0000b2"
                          ><a
                            href="base-decorations#pgf.back/pgfdecoratedremainingdistance"
                            >\pgfdecoratedremainingdistance</a
                          ></span
                        >}}<br />
                        <span class="spaces">      </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          ><a href="base-paths#pgf.back/pgfpathlineto"
                            >\pgfpathlineto</a
                          ></span
                        >{<span class="textcolor" style="color: #0000b2"
                          ><a href="base-points#pgf.back/pgfpoint"
                            >\pgfpoint</a
                          ></span
                        >{<span class="textcolor" style="color: #000000"
                          >5pt</span
                        >}{<span class="textcolor" style="color: #0000b2"
                          ><a
                            href="base-decorations#pgf.back/pgfdecoratedremainingdistance"
                            >\pgfdecoratedremainingdistance</a
                          ></span
                        >}}<br />
                        <span class="spaces">      </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          ><a href="base-paths#pgf.back/pgfpathlineto"
                            >\pgfpathlineto</a
                          ></span
                        >{<span class="textcolor" style="color: #0000b2"
                          ><a href="base-points#pgf.back/pgfpoint"
                            >\pgfpoint</a
                          ></span
                        >{<span class="textcolor" style="color: #000000"
                          >5pt</span
                        >}{<span class="textcolor" style="color: #000000"
                          >0pt</span
                        >}}<br />
                        <span class="spaces">    </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          >\fi</span
                        ><span class="example-code-comment">%</span><br />
                        <span class="spaces">  </span>}<br />
                        <span class="spaces">  </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          ><a href="base-decorations#pgf.back/state"
                            >\state</a
                          ></span
                        >{<span class="textcolor" style="color: #000000"
                          >down</span
                        >}[<span class="textcolor" style="color: #008000"
                          ><a href="tikz-arrows#pgf.width">width</a></span
                        >=<span class="textcolor" style="color: #008000"
                          >5pt</span
                        >,<span class="textcolor" style="color: #008000"
                          ><a href="base-decorations#pgf.next:state"
                            >next state</a
                          ></span
                        >=<span class="textcolor" style="color: #008000"
                          >up</span
                        >]<br />
                        <span class="spaces">  </span>{<br />
                        <span class="spaces">    </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          >\ifdim</span
                        ><span class="textcolor" style="color: #0000b2"
                          ><a
                            href="base-decorations#pgf.back/pgfdecoratedremainingdistance"
                            >\pgfdecoratedremainingdistance</a
                          ></span
                        ><span class="textcolor" style="color: #000000"
                          ><a href="tikz-arrows#pgf.&gt;">&gt;</a></span
                        ><span class="textcolor" style="color: #0000b2"
                          ><a
                            href="base-decorations#pgf.back/pgfdecoratedcompleteddistance"
                            >\pgfdecoratedcompleteddistance</a
                          ></span
                        ><br />
                        <span class="spaces">      </span><span
                          class="example-code-comment"
                          >% Growing</span
                        ><br />
                        <span class="spaces">      </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          ><a href="base-paths#pgf.back/pgfpathlineto"
                            >\pgfpathlineto</a
                          ></span
                        >{<span class="textcolor" style="color: #0000b2"
                          ><a href="base-points#pgf.back/pgfpoint"
                            >\pgfpoint</a
                          ></span
                        >{<span class="textcolor" style="color: #000000"
                          >0pt</span
                        >}{<span class="textcolor" style="color: #000000"
                          >-</span
                        ><span class="textcolor" style="color: #0000b2"
                          ><a
                            href="base-decorations#pgf.back/pgfdecoratedcompleteddistance"
                            >\pgfdecoratedcompleteddistance</a
                          ></span
                        >}}<br />
                        <span class="spaces">      </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          ><a href="base-paths#pgf.back/pgfpathlineto"
                            >\pgfpathlineto</a
                          ></span
                        >{<span class="textcolor" style="color: #0000b2"
                          ><a href="base-points#pgf.back/pgfpoint"
                            >\pgfpoint</a
                          ></span
                        >{<span class="textcolor" style="color: #000000"
                          >5pt</span
                        >}{<span class="textcolor" style="color: #000000"
                          >-</span
                        ><span class="textcolor" style="color: #0000b2"
                          ><a
                            href="base-decorations#pgf.back/pgfdecoratedcompleteddistance"
                            >\pgfdecoratedcompleteddistance</a
                          ></span
                        >}}<br />
                        <span class="spaces">      </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          ><a href="base-paths#pgf.back/pgfpathlineto"
                            >\pgfpathlineto</a
                          ></span
                        >{<span class="textcolor" style="color: #0000b2"
                          ><a href="base-points#pgf.back/pgfpoint"
                            >\pgfpoint</a
                          ></span
                        >{<span class="textcolor" style="color: #000000"
                          >5pt</span
                        >}{<span class="textcolor" style="color: #000000"
                          >0pt</span
                        >}}<br />
                        <span class="spaces">    </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          >\else</span
                        ><br />
                        <span class="spaces">      </span><span
                          class="example-code-comment"
                          >% Shrinking</span
                        ><br />
                        <span class="spaces">      </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          ><a href="base-paths#pgf.back/pgfpathlineto"
                            >\pgfpathlineto</a
                          ></span
                        >{<span class="textcolor" style="color: #0000b2"
                          ><a href="base-points#pgf.back/pgfpoint"
                            >\pgfpoint</a
                          ></span
                        >{<span class="textcolor" style="color: #000000"
                          >0pt</span
                        >}{<span class="textcolor" style="color: #000000"
                          >-</span
                        ><span class="textcolor" style="color: #0000b2"
                          ><a
                            href="base-decorations#pgf.back/pgfdecoratedremainingdistance"
                            >\pgfdecoratedremainingdistance</a
                          ></span
                        >}}<br />
                        <span class="spaces">      </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          ><a href="base-paths#pgf.back/pgfpathlineto"
                            >\pgfpathlineto</a
                          ></span
                        >{<span class="textcolor" style="color: #0000b2"
                          ><a href="base-points#pgf.back/pgfpoint"
                            >\pgfpoint</a
                          ></span
                        >{<span class="textcolor" style="color: #000000"
                          >5pt</span
                        >}{<span class="textcolor" style="color: #000000"
                          >-</span
                        ><span class="textcolor" style="color: #0000b2"
                          ><a
                            href="base-decorations#pgf.back/pgfdecoratedremainingdistance"
                            >\pgfdecoratedremainingdistance</a
                          ></span
                        >}}<br />
                        <span class="spaces">      </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          ><a href="base-paths#pgf.back/pgfpathlineto"
                            >\pgfpathlineto</a
                          ></span
                        >{<span class="textcolor" style="color: #0000b2"
                          ><a href="base-points#pgf.back/pgfpoint"
                            >\pgfpoint</a
                          ></span
                        >{<span class="textcolor" style="color: #000000"
                          >5pt</span
                        >}{<span class="textcolor" style="color: #000000"
                          >0pt</span
                        >}}<br />
                        <span class="spaces">    </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          >\fi</span
                        ><span class="example-code-comment">%</span><br />
                        <span class="spaces">  </span>}<br />
                        <span class="spaces">  </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          ><a href="base-decorations#pgf.back/state"
                            >\state</a
                          ></span
                        >{<span class="textcolor" style="color: #000000"
                          >final</span
                        >}<br />
                        <span class="spaces">  </span>{<br />
                        <span class="spaces">    </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          ><a href="base-paths#pgf.back/pgfpathlineto"
                            >\pgfpathlineto</a
                          ></span
                        >{<span class="textcolor" style="color: #0000b2"
                          ><a
                            href="base-decorations#pgf.back/pgfpointdecoratedpathlast"
                            >\pgfpointdecoratedpathlast</a
                          ></span
                        >}<br />
                        <span class="spaces">  </span>}<br />
                        }<br />
                        <span class="textcolor" style="color: #000000"
                          >\begin</span
                        >{<span class="textcolor" style="color: #0000b2"
                          ><a href="tikz-scopes#pgf.tikzpicture"
                            >tikzpicture</a
                          ></span
                        >}[<span class="textcolor" style="color: #008000"
                          ><a href="tikz-decorations#pgf.decoration"
                            >decoration</a
                          ></span
                        >=<span class="textcolor" style="color: #008000"
                          >complicated example
                          <a href="tikz-decorations#pgf.decoration"
                            >decoration</a
                          ></span
                        >]<br />
                        <span class="spaces">  </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          ><a href="tikz-actions#pgf.back/draw">\draw</a></span
                        > <span class="textcolor" style="color: #000000"
                          ><a href="tikz-decorations#pgf.decorate"
                            >decorate</a
                          ></span
                        >{<span class="spaces"> </span><span class="textcolor" style="color: #800080"
                          >(0,0)</span
                        > <span class="textcolor" style="color: #000000"
                          ><a href="tikz-paths#pgf.--">--</a></span
                        >
                        <span class="textcolor" style="color: #800080"
                          >(3,0)</span
                        >};<br />
                        <span class="spaces">  </span><span
                          class="textcolor"
                          style="color: #0000b2"
                          ><a href="tikz-actions#pgf.back/fill">\fill</a></span
                        > [<span class="textcolor" style="color: #008000"
                          >red!50</span
                        >,<span class="textcolor" style="color: #008000"
                          ><a href="tikz-paths#pgf.rounded:corners"
                            >rounded corners</a
                          ></span
                        >=<span class="textcolor" style="color: #008000"
                          >2pt</span
                        >]<br />
                        <span class="spaces">    </span><span
                          class="textcolor"
                          style="color: #000000"
                          ><a href="tikz-decorations#pgf.decorate"
                            >decorate</a
                          ></span
                        >
                        {<span class="textcolor" style="color: #800080"
                          >(.5,-2)</span
                        > <span class="textcolor" style="color: #000000"
                          ><a href="tikz-paths#pgf.--">--</a></span
                        >
                        <span class="textcolor" style="color: #000000">++</span
                        ><span class="textcolor" style="color: #800080"
                          >(2.5,-2.5)</span
                        >} <span class="textcolor" style="color: #000000"
                          ><a href="tikz-paths#pgf.--">--</a></span
                        >
                        <span class="textcolor" style="color: #800080"
                          >(3,-5)</span
                        > <span class="textcolor" style="color: #000000"
                          >-|</span
                        >
                        <span class="textcolor" style="color: #800080"
                          >(0,-2)</span
                        > <span class="textcolor" style="color: #000000"
                          ><a href="tikz-paths#pgf.--">--</a></span
                        >
                        <span class="textcolor" style="color: #000000"
                          ><a href="tikz-graphs#pgf.cycle">cycle</a></span
                        >;<br />
                        <span class="textcolor" style="color: #000000"
                          >\end</span
                        >{<span class="textcolor" style="color: #0000b2"
                          ><a href="tikz-scopes#pgf.tikzpicture"
                            >tikzpicture</a
                          ></span
                        >}<br />
                      </code>
                    </div>
                  </figure>
                </ul>
              </div>
            </ul>
          </div>
          <h6 id="autosec-8057">
            <span
              ><span class="sectionnumber" id="sec-103.3.1">103.3.1</span>
              Predefined Decorations</span
            ><a
              class="anchor-link"
              data-html-link="sec-103.3.1"
              data-pdf-destination="subsubsection.103.3.1"
              data-pdf-page="1113"
              href="#sec-103.3.1"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-8057"></a>

          <p>
            The three decorations <span class="verb">moveto</span>,
            <span class="verb">lineto</span>, and
            <span class="verb">curveto</span> are predefined and &ldquo;always
            available&rdquo;. They are mostly useful in conjunction with
            meta-decorations. They are documented in Section&nbsp;<a
              href="library-decorations#section-library-decorations"
              >50</a
            >
            alongside the other decorations.
          </p>
          <h5 id="autosec-8058">
            <span
              ><span class="sectionnumber" id="sec-103.4">103.4</span> Using
              Decorations</span
            ><a
              class="anchor-link"
              data-html-link="sec-103.4"
              data-pdf-destination="subsection.103.4"
              data-pdf-page="1113"
              href="#sec-103.4"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-8058"></a>

          <p>Once a decoration has been declared, it can be used.</p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <a id="pgf.pgfdecoration"></a>
                    <span class="hl-def"
                      ><kbd
                        >\begin{<span class="declare">pgfdecoration</span>}</kbd
                      >{<span class="angle">&langle;</span><i>decoration list</i
                      ><span class="angle">&rangle;</span>}</span
                    >
                    <a
                      class="anchor-link"
                      data-html-link="pgf.pgfdecoration"
                      href="#pgf.pgfdecoration"
                      id="pgf.pgfdecoration"
                      >&para;</a
                    >
                  </p>
                </li>
              </div>

              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd> </kbd><span class="angle">&langle;</span
                      ><i>environment contents</i
                      ><span class="angle">&rangle;</span></span
                    >
                  </p>
                </li>
              </div>

              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd
                        >\end{<span class="declare">pgfdecoration</span>}</kbd
                      ></span
                    >
                  </p>
                </li>
              </div>
              <p>
                The <span class="angle">&langle;</span
                ><i>environment contents</i
                ><span class="angle">&rangle;</span> should contain commands for
                creating an path. This path is the basis for the
                <em>input paths</em> for the decorations in the
                <span class="angle">&langle;</span><i>decoration list</i
                ><span class="angle">&rangle;</span>. In detail, the following
                happens:
              </p>
              <ul class="enumerate" style="list-style-type: none">
                <li>
                  <p>
                    <span class="listmarker">1.</span> The preexisting unused
                    path is saved.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">2.</span> The path commands
                    specified in <span class="angle">&langle;</span
                    ><i>environment contents</i
                    ><span class="angle">&rangle;</span> are executed and this
                    resulting path is saved. The path is then divided into
                    different <em>input paths</em> as follows: The format for
                    each item in {<span class="angle">&langle;</span
                    ><i>decoration list</i><span class="angle">&rangle;</span>}
                    is
                  </p>
                  <blockquote>
                    <p>
                      {<span class="angle">&langle;</span><i>decoration</i
                      ><span class="angle">&rangle;</span>}{<span class="angle"
                        >&langle;</span
                      ><i>length</i><span class="angle">&rangle;</span>}<span
                        class="textcolor"
                        style="color: #008000"
                        >{<span class="angle">&langle;</span><i>before code</i
                        ><span class="angle">&rangle;</span>}{<span
                          class="angle"
                          >&langle;</span
                        ><i>after code</i
                        ><span class="angle">&rangle;</span>}</span
                      >
                    </p>
                  </blockquote>
                  <p>
                    The <span class="angle">&langle;</span><i>before code</i
                    ><span class="angle">&rangle;</span> and the
                    <span class="angle">&langle;</span><i>after code</i
                    ><span class="angle">&rangle;</span> are optional. The input
                    path is divided into input paths as follows: The first input
                    path consists of the first lines of the path specified in
                    the <span class="angle">&langle;</span
                    ><i>environment contents</i
                    ><span class="angle">&rangle;</span> until the
                    <span class="angle">&langle;</span><i>length</i
                    ><span class="angle">&rangle;</span> of the first element of
                    the <span class="angle">&langle;</span><i>decoration list</i
                    ><span class="angle">&rangle;</span> is reached. If this
                    length is reached in the middle of a line, the line is
                    broken up at this exact position. Then the second input path
                    has the <span class="angle">&langle;</span><i>length</i
                    ><span class="angle">&rangle;</span> of the second element
                    in the <span class="angle">&langle;</span
                    ><i>decoration list</i
                    ><span class="angle">&rangle;</span> and consists of the
                    lines making up the following
                    <span class="angle">&langle;</span><i>length</i
                    ><span class="angle">&rangle;</span> part of the path in the
                    <span class="angle">&langle;</span
                    ><i>environment contents</i
                    ><span class="angle">&rangle;</span>, and so on.
                  </p>
                  <p>
                    If the lengths in the <span class="angle">&langle;</span
                    ><i>decoration list</i
                    ><span class="angle">&rangle;</span> do not add up to the
                    total length of the path in the
                    <span class="angle">&langle;</span
                    ><i>environment contents</i
                    ><span class="angle">&rangle;</span>, either some
                    decorations are dropped (if their lengths add up to more
                    than the length of the <span class="angle">&langle;</span
                    ><i>environment contents</i
                    ><span class="angle">&rangle;</span>) or the input path is
                    not fully used (if their lengths add up to less).
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">3.</span> The preexisting path is
                    reinstalled.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">4.</span> The decoration automata
                    move along the input paths, thus creating (and possibly
                    using) the output paths. These output paths extend the
                    current path (unless they are used).
                  </p>
                </li>
              </ul>
              <p>
                Some important points should be noted regarding the use of this
                environment:
              </p>
              <ul class="itemize" style="list-style-type: none">
                <li>
                  <p>
                    <span class="listmarker">&bull;</span> If
                    <span class="angle">&langle;</span
                    ><i>environment contents</i
                    ><span class="angle">&rangle;</span> does not begin with
                    <span class="verb">\pgfpathmoveto</span>, the last known
                    point on the preexisting path is assumed as the starting
                    point.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span> All except the last
                    of any sequence of consecutive move-to commands in
                    <span class="angle">&langle;</span
                    ><i>environment contents</i
                    ><span class="angle">&rangle;</span> are discarded.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span> Any move-to commands
                    at the end of <span class="angle">&langle;</span
                    ><i>environment contents</i
                    ><span class="angle">&rangle;</span> are ignored.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span> Any close-path
                    commands on the input path are interpreted as straight
                    lines. Internally, something a little more complicated is
                    going on, however, a closed path on the input path has no
                    effect on the output path, other than causing the automaton
                    to travel in a straight line towards the location of the
                    last move-to command on the input path.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span> Although tangent
                    computations for the input path work with the last point on
                    the preexisting path, no automatic move-to operations are
                    issued for the output path. If an output path starts with a
                    line-to or curve-to when the existing path is empty, an
                    appropriate move-to command should be inserted before the
                    decoration starts.
                  </p>
                </li>
                <li>
                  <p>
                    <span class="listmarker">&bull;</span> If a decoration uses
                    its own path, the first time this happens the preexisting
                    path is part of the path that is used at this point.
                  </p>
                </li>
              </ul>
              <p>
                Before the automata start to &ldquo;work on&rdquo; their
                respective inputs paths, <span class="angle">&langle;</span
                ><i>before code</i><span class="angle">&rangle;</span> is
                executed. After the decoration automaton has finished,
                <span class="angle">&langle;</span><i>after code</i
                ><span class="angle">&rangle;</span> is executed.
              </p>

              <figure class="example">
                <div class="example-image">
                  <p>
                    <span
                      class="lateximagesource"
                      id="lateximage-pgfmanual-3256"
                      ><!--
--><img
                        alt="(-tikz-&nbsp;diagram)"
                        class="lateximage"
                        height="78.530"
                        loading="lazy"
                        src="pgfmanual-images/image-3256.png"
                        style
                        width="116.474"
                    /></span>
                  </p>
                </div>

                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <span class="codepreamble"
                      >\usetikzlibrary {decorations,decorations.pathmorphing} </span
                    ><br />
                    <span class="textcolor" style="color: #000000">\begin</span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-scopes#pgf.tikzpicture"
                        >tikzpicture</a
                      ></span
                    >}[<span class="textcolor" style="color: #008000"
                      ><a href="tikz-decorations#pgf.decoration"
                        >decoration</a
                      ></span
                    >=<span class="textcolor" style="color: #008000"
                      >{segment length=5pt}</span
                    >]<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-actions#pgf.back/draw">\draw</a></span
                    > [<span class="textcolor" style="color: #008000"
                      ><a href="tikz-paths#pgf.help:lines">help lines</a></span
                    >] <span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.grid">grid</a></span
                    >
                    <span class="textcolor" style="color: #800080">(3,2)</span
                    >;<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >\begin</span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-decorations#pgf.pgfdecoration"
                        >pgfdecoration</a
                      ></span
                    >}{{<span class="textcolor" style="color: #000000"
                      >curveto</span
                    >}{<span class="textcolor" style="color: #000000">1cm</span
                    >},{<span class="textcolor" style="color: #000000"
                      >zigzag</span
                    >}{<span class="textcolor" style="color: #000000">2cm</span
                    >},{<span class="textcolor" style="color: #000000"
                      >curveto</span
                    >}{<span class="textcolor" style="color: #000000">1cm</span
                    >}}<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-paths#pgf.back/pgfpathmoveto"
                        >\pgfpathmoveto</a
                      ></span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-points#pgf.back/pgfpointorigin"
                        >\pgfpointorigin</a
                      ></span
                    >}<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-paths#pgf.back/pgfpathcurveto"
                        >\pgfpathcurveto</a
                      ></span
                    ><br />
                    <span class="spaces">      </span>{<span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-points#pgf.back/pgfpoint"
                        >\pgfpoint</a
                      ></span
                    >{<span class="textcolor" style="color: #000000">0cm</span
                    >}{<span class="textcolor" style="color: #000000">2cm</span
                    >}}{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-points#pgf.back/pgfpoint"
                        >\pgfpoint</a
                      ></span
                    >{<span class="textcolor" style="color: #000000">3cm</span
                    >}{<span class="textcolor" style="color: #000000">2cm</span
                    >}}{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-points#pgf.back/pgfpoint"
                        >\pgfpoint</a
                      ></span
                    >{<span class="textcolor" style="color: #000000">3cm</span
                    >}{<span class="textcolor" style="color: #000000">0cm</span
                    >}}<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >\end</span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-decorations#pgf.pgfdecoration"
                        >pgfdecoration</a
                      ></span
                    >}<br />
                    <span class="textcolor" style="color: #0000b2"
                      ><a href="base-actions#pgf.back/pgfusepath"
                        >\pgfusepath</a
                      ></span
                    >{<span class="textcolor" style="color: #000000"
                      >stroke</span
                    >}<br />
                    <span class="textcolor" style="color: #000000">\end</span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-scopes#pgf.tikzpicture"
                        >tikzpicture</a
                      ></span
                    >}<br />
                  </code>
                </div>
              </figure>
              <p>
                When the lengths are evaluated, the dimension
                <span class="verb">\pgfdecoratedremainingdistance</span> holds
                the remaining distance on the entire decorated path, and
                <span class="verb">\pgfdecoratedpathlength</span> holds the
                total length of the path. Thus, it is possible to specify
                lengths like
                <span class="verb">\pgfdecoratedpathlength/3</span>.
              </p>

              <figure class="example">
                <div class="example-image">
                  <p>
                    <span
                      class="lateximagesource"
                      id="lateximage-pgfmanual-3257"
                      ><!--
--><img
                        alt="(-tikz-&nbsp;diagram)"
                        class="lateximage"
                        height="78.530"
                        loading="lazy"
                        src="pgfmanual-images/image-3257.png"
                        style
                        width="116.620"
                    /></span>
                  </p>
                </div>

                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <span class="codepreamble"
                      >\usetikzlibrary {decorations,decorations.pathmorphing} </span
                    ><br />
                    <span class="textcolor" style="color: #000000">\begin</span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-scopes#pgf.tikzpicture"
                        >tikzpicture</a
                      ></span
                    >}[<span class="textcolor" style="color: #008000"
                      ><a href="tikz-decorations#pgf.decoration"
                        >decoration</a
                      ></span
                    >=<span class="textcolor" style="color: #008000"
                      >{segment length=5pt}</span
                    >]<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-actions#pgf.back/draw">\draw</a></span
                    > [<span class="textcolor" style="color: #008000"
                      ><a href="tikz-paths#pgf.help:lines">help lines</a></span
                    >] <span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.grid">grid</a></span
                    >
                    <span class="textcolor" style="color: #800080">(3,2)</span
                    >;<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >\begin</span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-decorations#pgf.pgfdecoration"
                        >pgfdecoration</a
                      ></span
                    >}{<br />
                    <span class="spaces">      </span>{<span
                      class="textcolor"
                      style="color: #000000"
                      >curveto</span
                    >}{<span class="textcolor" style="color: #0000b2"
                      >\pgfdecoratedpathlength/</span
                    ><span class="textcolor" style="color: #000000">3</span
                    >},<br />
                    <span class="spaces">      </span>{<span
                      class="textcolor"
                      style="color: #000000"
                      >zigzag</span
                    >}{<span class="textcolor" style="color: #0000b2"
                      >\pgfdecoratedpathlength/</span
                    ><span class="textcolor" style="color: #000000">3</span
                    >},<br />
                    <span class="spaces">      </span>{<span
                      class="textcolor"
                      style="color: #000000"
                      >curveto</span
                    >}{<span class="textcolor" style="color: #0000b2"
                      ><a
                        href="base-decorations#pgf.back/pgfdecoratedremainingdistance"
                        >\pgfdecoratedremainingdistance</a
                      ></span
                    >}<br />
                    <span class="spaces">    </span>}<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-paths#pgf.back/pgfpathmoveto"
                        >\pgfpathmoveto</a
                      ></span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-points#pgf.back/pgfpointorigin"
                        >\pgfpointorigin</a
                      ></span
                    >}<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-paths#pgf.back/pgfpathcurveto"
                        >\pgfpathcurveto</a
                      ></span
                    ><br />
                    <span class="spaces">      </span>{<span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-points#pgf.back/pgfpoint"
                        >\pgfpoint</a
                      ></span
                    >{<span class="textcolor" style="color: #000000">0cm</span
                    >}{<span class="textcolor" style="color: #000000">2cm</span
                    >}}{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-points#pgf.back/pgfpoint"
                        >\pgfpoint</a
                      ></span
                    >{<span class="textcolor" style="color: #000000">3cm</span
                    >}{<span class="textcolor" style="color: #000000">2cm</span
                    >}}{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-points#pgf.back/pgfpoint"
                        >\pgfpoint</a
                      ></span
                    >{<span class="textcolor" style="color: #000000">3cm</span
                    >}{<span class="textcolor" style="color: #000000">0cm</span
                    >}}<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >\end</span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-decorations#pgf.pgfdecoration"
                        >pgfdecoration</a
                      ></span
                    >}<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #0000b2"
                      ><a href="base-actions#pgf.back/pgfusepath"
                        >\pgfusepath</a
                      ></span
                    >{<span class="textcolor" style="color: #000000"
                      >stroke</span
                    >}<br />
                    <span class="textcolor" style="color: #000000">\end</span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-scopes#pgf.tikzpicture"
                        >tikzpicture</a
                      ></span
                    >}<br />
                  </code>
                </div>
              </figure>
              <p>
                When <span class="angle">&langle;</span><i>before code</i
                ><span class="angle">&rangle;</span> is executed, the following
                macro is useful:
              </p>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <a id="pgf.back/pgfpointdecoratedpathfirst"></a>
                        <span class="hl-def"
                          ><span class="declare"
                            ><kbd>\pgfpointdecoratedpathfirst</kbd></span
                          ></span
                        >
                        <a
                          class="anchor-link"
                          data-html-link="pgf.back/pgfpointdecoratedpathfirst"
                          href="#\pgfpointdecoratedpathfirst"
                          id="\pgfpointdecoratedpathfirst"
                          >&para;</a
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    Returns the point corresponding to the start of the current
                    input path.
                  </p>
                </ul>
              </div>
              <p>
                When <span class="angle">&langle;</span><i>after code</i
                ><span class="angle">&rangle;</span> is executed, the following
                macro can be used:
              </p>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          ><span class="declare"
                            ><kbd>\pgfpointdecoratedpathlast</kbd></span
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    Returns the point corresponding to the end of the current
                    input path.
                  </p>
                </ul>
              </div>
              <p>
                This means that if decorations do not use their own path, it is
                possible to do something with them and continue from the correct
                place.
              </p>

              <figure class="example">
                <div class="example-image">
                  <p>
                    <span
                      class="lateximagesource"
                      id="lateximage-pgfmanual-3258"
                      ><!--
--><img
                        alt="(-tikz-&nbsp;diagram)"
                        class="lateximage"
                        height="78.530"
                        loading="lazy"
                        src="pgfmanual-images/image-3258.png"
                        style
                        width="116.620"
                    /></span>
                  </p>
                </div>

                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <span class="codepreamble"
                      >\usetikzlibrary {decorations,decorations.pathmorphing} </span
                    ><br />
                    <span class="textcolor" style="color: #000000">\begin</span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-scopes#pgf.tikzpicture"
                        >tikzpicture</a
                      ></span
                    >}<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-actions#pgf.back/draw">\draw</a></span
                    > [<span class="textcolor" style="color: #008000"
                      ><a href="tikz-paths#pgf.help:lines">help lines</a></span
                    >] <span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.grid">grid</a></span
                    >
                    <span class="textcolor" style="color: #800080">(3,2)</span
                    >;<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >\begin</span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-decorations#pgf.pgfdecoration"
                        >pgfdecoration</a
                      ></span
                    >}{<br />
                    <span class="spaces">      </span>{<span
                      class="textcolor"
                      style="color: #000000"
                      >curveto</span
                    >}{<span class="textcolor" style="color: #0000b2"
                      >\pgfdecoratedpathlength/</span
                    ><span class="textcolor" style="color: #000000">3</span
                    >}<br />
                    <span class="spaces">      </span>{}<br />
                    <span class="spaces">      </span>{<br />
                    <span class="spaces">        </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-actions#pgf.back/pgfusepath"
                        >\pgfusepath</a
                      ></span
                    >{<span class="textcolor" style="color: #000000"
                      >stroke</span
                    >}<br />
                    <span class="spaces">      </span>},<br />
                    <span class="spaces">      </span>{<span
                      class="textcolor"
                      style="color: #000000"
                      >zigzag</span
                    >}{<span class="textcolor" style="color: #0000b2"
                      >\pgfdecoratedpathlength/</span
                    ><span class="textcolor" style="color: #000000">3</span
                    >}<br />
                    <span class="spaces">      </span>{<br />
                    <span class="spaces">        </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-paths#pgf.back/pgfpathmoveto"
                        >\pgfpathmoveto</a
                      ></span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a
                        href="base-decorations#pgf.back/pgfpointdecoratedpathfirst"
                        >\pgfpointdecoratedpathfirst</a
                      ></span
                    >}<br />
                    <span class="spaces">        </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      >\pgfdecorationsegmentlength</span
                    ><span class="textcolor" style="color: #000000">=5pt</span
                    ><br />
                    <span class="spaces">      </span>}<br />
                    <span class="spaces">      </span>{<br />
                    <span class="spaces">        </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-actions#pgf.back/pgfsetstrokecolor"
                        >\pgfsetstrokecolor</a
                      ></span
                    >{<span class="textcolor" style="color: #000000">red</span
                    >}<br />
                    <span class="spaces">        </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-actions#pgf.back/pgfusepath"
                        >\pgfusepath</a
                      ></span
                    >{<span class="textcolor" style="color: #000000"
                      >stroke</span
                    >}<br />
                    <span class="spaces">        </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-paths#pgf.back/pgfpathmoveto"
                        >\pgfpathmoveto</a
                      ></span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a
                        href="base-decorations#pgf.back/pgfpointdecoratedpathlast"
                        >\pgfpointdecoratedpathlast</a
                      ></span
                    >}<br />
                    <span class="spaces">        </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-actions#pgf.back/pgfsetstrokecolor"
                        >\pgfsetstrokecolor</a
                      ></span
                    >{<span class="textcolor" style="color: #000000">black</span
                    >}<br />
                    <span class="spaces">      </span>},<br />
                    <span class="spaces">      </span>{<span
                      class="textcolor"
                      style="color: #000000"
                      >curveto</span
                    >}{<span class="textcolor" style="color: #0000b2"
                      ><a
                        href="base-decorations#pgf.back/pgfdecoratedremainingdistance"
                        >\pgfdecoratedremainingdistance</a
                      ></span
                    >}<br />
                    <span class="spaces">    </span>}<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-paths#pgf.back/pgfpathmoveto"
                        >\pgfpathmoveto</a
                      ></span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-points#pgf.back/pgfpointorigin"
                        >\pgfpointorigin</a
                      ></span
                    >}<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-paths#pgf.back/pgfpathcurveto"
                        >\pgfpathcurveto</a
                      ></span
                    ><br />
                    <span class="spaces">      </span>{<span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-points#pgf.back/pgfpoint"
                        >\pgfpoint</a
                      ></span
                    >{<span class="textcolor" style="color: #000000">0cm</span
                    >}{<span class="textcolor" style="color: #000000">2cm</span
                    >}}{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-points#pgf.back/pgfpoint"
                        >\pgfpoint</a
                      ></span
                    >{<span class="textcolor" style="color: #000000">3cm</span
                    >}{<span class="textcolor" style="color: #000000">2cm</span
                    >}}{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-points#pgf.back/pgfpoint"
                        >\pgfpoint</a
                      ></span
                    >{<span class="textcolor" style="color: #000000">3cm</span
                    >}{<span class="textcolor" style="color: #000000">0cm</span
                    >}}<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >\end</span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-decorations#pgf.pgfdecoration"
                        >pgfdecoration</a
                      ></span
                    >}<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #0000b2"
                      ><a href="base-actions#pgf.back/pgfusepath"
                        >\pgfusepath</a
                      ></span
                    >{<span class="textcolor" style="color: #000000"
                      >stroke</span
                    >}<br />
                    <span class="textcolor" style="color: #000000">\end</span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-scopes#pgf.tikzpicture"
                        >tikzpicture</a
                      ></span
                    >}<br />
                  </code>
                </div>
              </figure>
              <p>
                After the <span class="verb">{decoration}</span> environment has
                finished, the following macros are available:
              </p>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <a id="pgf.back/pgfdecorateexistingpath"></a>
                        <span class="hl-def"
                          ><span class="declare"
                            ><kbd>\pgfdecorateexistingpath</kbd></span
                          ></span
                        >
                        <a
                          class="anchor-link"
                          data-html-link="pgf.back/pgfdecorateexistingpath"
                          href="#\pgfdecorateexistingpath"
                          id="\pgfdecorateexistingpath"
                          >&para;</a
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    The preexisting path before the environment was entered.
                  </p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <a id="pgf.back/pgfdecoratedpath"></a>
                        <span class="hl-def"
                          ><span class="declare"
                            ><kbd>\pgfdecoratedpath</kbd></span
                          ></span
                        >
                        <a
                          class="anchor-link"
                          data-html-link="pgf.back/pgfdecoratedpath"
                          href="#\pgfdecoratedpath"
                          id="\pgfdecoratedpath"
                          >&para;</a
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    The (total) input path (that is, the path created by the
                    environment contents).
                  </p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <a id="pgf.back/pgfdecorationpath"></a>
                        <span class="hl-def"
                          ><span class="declare"
                            ><kbd>\pgfdecorationpath</kbd></span
                          ></span
                        >
                        <a
                          class="anchor-link"
                          data-html-link="pgf.back/pgfdecorationpath"
                          href="#\pgfdecorationpath"
                          id="\pgfdecorationpath"
                          >&para;</a
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    The output path. If the path is used, this macro contains
                    only the last unused part of the output path.
                  </p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          ><span class="declare"
                            ><kbd>\pgfpointdecoratedpathlast</kbd></span
                          ></span
                        >
                      </p>
                    </li>
                  </div>
                  <p>The final point of the input path.</p>
                </ul>
              </div>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <a id="pgf.back/pgfpointdecorationpathlast"></a>
                        <span class="hl-def"
                          ><span class="declare"
                            ><kbd>\pgfpointdecorationpathlast</kbd></span
                          ></span
                        >
                        <a
                          class="anchor-link"
                          data-html-link="pgf.back/pgfpointdecorationpathlast"
                          href="#\pgfpointdecorationpathlast"
                          id="\pgfpointdecorationpathlast"
                          >&para;</a
                        >
                      </p>
                    </li>
                  </div>
                  <p>The final point of the output path.</p>
                </ul>
              </div>
              <p>
                The following style is executed each time a decoration is used.
                You may use it to set up default options for decorations.
              </p>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <a id="pgf./pgf/every:decoration"></a
                        ><a id="pgf.every:decoration"></a>
                        <span class="hl-def"
                          ><kbd
                            ><span class="keyname"
                              ><span class="declare"
                                >/pgf/every decoration</span
                              ></span
                            ></kbd
                          ></span
                        ><span class="hl-default"
                          >(style, initially <kbd>empty</kbd>)</span
                        >
                        <a
                          class="anchor-link"
                          data-html-link="pgf./pgf/every:decoration"
                          href="#pgf/every:decoration"
                          id="pgf/every:decoration"
                          >&para;</a
                        >
                      </p>
                    </li>
                  </div>
                  <p>This style is executed for every decoration.</p>
                </ul>
              </div>
            </ul>
          </div>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd><span class="declare">\pgfdecoration</span></kbd
                      >{<span class="angle">&langle;</span><i>name</i
                      ><span class="angle">&rangle;</span>}</span
                    >
                  </p>
                </li>
              </div>

              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd> </kbd><span class="angle">&langle;</span
                      ><i>environment contents</i
                      ><span class="angle">&rangle;</span></span
                    >
                  </p>
                </li>
              </div>

              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd
                        ><span class="declare">\endpgfdecoration</span></kbd
                      ></span
                    >
                  </p>
                </li>
              </div>
              <p>
                The plain-<span class="latexlogofont"
                  ><span class="latexlogo"
                    >T<span class="latexlogosub">e</span>X</span
                  ></span
                >
                version of the
                <span class="verb">{pgfdecorate}</span> environment.
              </p>
            </ul>
          </div>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd
                        ><span class="declare">\startpgfdecoration</span></kbd
                      >{<span class="angle">&langle;</span><i>name</i
                      ><span class="angle">&rangle;</span>}</span
                    >
                  </p>
                </li>
              </div>

              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd> </kbd><span class="angle">&langle;</span
                      ><i>environment contents</i
                      ><span class="angle">&rangle;</span></span
                    >
                  </p>
                </li>
              </div>

              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd
                        ><span class="declare">\stoppgfdecoration</span></kbd
                      ></span
                    >
                  </p>
                </li>
              </div>
              <p>
                The Con<span class="latexlogofont"
                  ><span class="latexlogo"
                    >T<span class="latexlogosub">e</span>X</span
                  ></span
                >t version of the
                <span class="verb">{pgfdecoration}</span> environment.
              </p>
            </ul>
          </div>

          <p>
            For convenience, the following macros provide a
            &ldquo;shorthand&rdquo; for decorations (internally, they all use
            the <span class="verb">{pgfdecoration}</span> environment).
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <a id="pgf.back/pgfdecoratepath"></a>
                    <span class="hl-def"
                      ><span class="declare"><kbd>\pgfdecoratepath</kbd></span
                      >{<span class="angle">&langle;</span><i>name</i
                      ><span class="angle">&rangle;</span>}{<span class="angle"
                        >&langle;</span
                      ><i>path commands</i
                      ><span class="angle">&rangle;</span>}</span
                    >
                    <a
                      class="anchor-link"
                      data-html-link="pgf.back/pgfdecoratepath"
                      href="#\pgfdecoratepath"
                      id="\pgfdecoratepath"
                      >&para;</a
                    >
                  </p>
                </li>
              </div>
              <p>
                Decorate the path described by
                <span class="angle">&langle;</span><i>path commands</i
                ><span class="angle">&rangle;</span> with the decoration
                <span class="angle">&langle;</span><i>name</i
                ><span class="angle">&rangle;</span>. This is equivalent to
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #0000b2"
                      >\pgfdecorate</span
                    >{{<span class="textcolor" style="color: #000000"
                      ><a href="tikz-scopes#pgf.name">name</a></span
                    >}{<span class="textcolor" style="color: #0000b2"
                      ><a
                        href="base-decorations#pgf.back/pgfdecoratedpathlength"
                        >\pgfdecoratedpathlength</a
                      ></span
                    >}<br />
                    <span class="spaces">             </span>{<span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-decorations#pgf.back/pgfdecoratebeforecode"
                        >\pgfdecoratebeforecode</a
                      ></span
                    >}{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-decorations#pgf.back/pgfdecorateaftercode"
                        >\pgfdecorateaftercode</a
                      ></span
                    >}}<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >//</span
                    >
                    <span class="textcolor" style="color: #000000">the</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.path">path</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      >commands</span
                    >.<br />
                    <span class="textcolor" style="color: #0000b2"
                      >\endpgfdecorate</span
                    ><br />
                  </code>
                </div>
              </figure>
              <p></p>
            </ul>
          </div>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <a id="pgf.back/pgfdecoratecurrentpath"></a>
                    <span class="hl-def"
                      ><span class="declare"
                        ><kbd>\pgfdecoratecurrentpath</kbd></span
                      >{<span class="angle">&langle;</span><i>name</i
                      ><span class="angle">&rangle;</span>}</span
                    >
                    <a
                      class="anchor-link"
                      data-html-link="pgf.back/pgfdecoratecurrentpath"
                      href="#\pgfdecoratecurrentpath"
                      id="\pgfdecoratecurrentpath"
                      >&para;</a
                    >
                  </p>
                </li>
              </div>
              <p>
                Decorate the preexisting path with the decoration
                <span class="angle">&langle;</span><i>name</i
                ><span class="angle">&rangle;</span>.
              </p>
            </ul>
          </div>

          <p>
            Both the above commands use the current definitions of the following
            macros:
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <a id="pgf.back/pgfdecoratebeforecode"></a>
                    <span class="hl-def"
                      ><span class="declare"
                        ><kbd>\pgfdecoratebeforecode</kbd></span
                      ></span
                    >
                    <a
                      class="anchor-link"
                      data-html-link="pgf.back/pgfdecoratebeforecode"
                      href="#\pgfdecoratebeforecode"
                      id="\pgfdecoratebeforecode"
                      >&para;</a
                    >
                  </p>
                </li>
              </div>
              <p>
                Code executed as <span class="angle">&langle;</span
                ><i>before code</i><span class="angle">&rangle;</span>, see the
                description of <span class="verb">\pgfdecorate</span>.
              </p>
            </ul>
          </div>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <a id="pgf.back/pgfdecorateaftercode"></a>
                    <span class="hl-def"
                      ><span class="declare"
                        ><kbd>\pgfdecorateaftercode</kbd></span
                      ></span
                    >
                    <a
                      class="anchor-link"
                      data-html-link="pgf.back/pgfdecorateaftercode"
                      href="#\pgfdecorateaftercode"
                      id="\pgfdecorateaftercode"
                      >&para;</a
                    >
                  </p>
                </li>
              </div>
              <p>
                Code executed as <span class="angle">&langle;</span
                ><i>after code</i><span class="angle">&rangle;</span>, see the
                description of <span class="verb">\pgfdecorate</span>.
              </p>
            </ul>
          </div>

          <p>
            It may sometimes be useful to add an additional transformation for
            each segment of a decoration. The following command allows you to
            define such a &ldquo;last minute transformation&rdquo;.
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <a id="pgf.back/pgfsetdecorationsegmenttransformation"></a>
                    <span class="hl-def"
                      ><span class="declare"
                        ><kbd>\pgfsetdecorationsegmenttransformation</kbd></span
                      >{<span class="angle">&langle;</span><i>code</i
                      ><span class="angle">&rangle;</span>}</span
                    >
                    <a
                      class="anchor-link"
                      data-html-link="pgf.back/pgfsetdecorationsegmenttransformation"
                      href="#\pgfsetdecorationsegmenttransformation"
                      id="\pgfsetdecorationsegmenttransformation"
                      >&para;</a
                    >
                  </p>
                </li>
              </div>
              <p>
                The <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span> will be executed at the
                very beginning of each segment. Note when applying multiple
                decorations, this will be reset between decorations, so it needs
                to be specified for each segment.
              </p>

              <figure class="example">
                <div class="example-image">
                  <p>
                    <span
                      class="lateximagesource"
                      id="lateximage-pgfmanual-3259"
                      ><!--
--><img
                        alt="(-tikz-&nbsp;diagram)"
                        class="lateximage"
                        height="82.226"
                        loading="lazy"
                        src="pgfmanual-images/image-3259.png"
                        style
                        width="116.620"
                    /></span>
                  </p>
                </div>

                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <span class="codepreamble"
                      >\usetikzlibrary {decorations,decorations.pathmorphing} </span
                    ><br />
                    <span class="textcolor" style="color: #000000">\begin</span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-scopes#pgf.tikzpicture"
                        >tikzpicture</a
                      ></span
                    >}<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-actions#pgf.back/draw">\draw</a></span
                    > [<span class="textcolor" style="color: #008000"
                      ><a href="tikz-paths#pgf.help:lines">help lines</a></span
                    >] <span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.grid">grid</a></span
                    >
                    <span class="textcolor" style="color: #800080">(3,2)</span
                    >;<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >\begin</span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-decorations#pgf.pgfdecoration"
                        >pgfdecoration</a
                      ></span
                    >}{<br />
                    <span class="spaces">      </span>{<span
                      class="textcolor"
                      style="color: #000000"
                      >curveto</span
                    >}{<span class="textcolor" style="color: #0000b2"
                      >\pgfdecoratedpathlength/</span
                    ><span class="textcolor" style="color: #000000">3</span
                    >},<br />
                    <span class="spaces">      </span>{<span
                      class="textcolor"
                      style="color: #000000"
                      >zigzag</span
                    >}{<span class="textcolor" style="color: #0000b2"
                      >\pgfdecoratedpathlength/</span
                    ><span class="textcolor" style="color: #000000">3</span
                    >}<br />
                    <span class="spaces">      </span>{<br />
                    <span class="spaces">        </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      >\pgfdecorationsegmentlength</span
                    ><span class="textcolor" style="color: #000000">=5pt</span
                    ><br />
                    <span class="spaces">        </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a
                        href="base-decorations#pgf.back/pgfsetdecorationsegmenttransformation"
                        >\pgfsetdecorationsegmenttransformation</a
                      ></span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a
                        href="base-transformations#pgf.back/pgftransformyshift"
                        >\pgftransformyshift</a
                      ></span
                    >{.<span class="textcolor" style="color: #000000">5cm</span
                    >}}<br />
                    <span class="spaces">      </span>},<br />
                    <span class="spaces">      </span>{<span
                      class="textcolor"
                      style="color: #000000"
                      >curveto</span
                    >}{<span class="textcolor" style="color: #0000b2"
                      ><a
                        href="base-decorations#pgf.back/pgfdecoratedremainingdistance"
                        >\pgfdecoratedremainingdistance</a
                      ></span
                    >}<br />
                    <span class="spaces">    </span>}<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-paths#pgf.back/pgfpathmoveto"
                        >\pgfpathmoveto</a
                      ></span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-points#pgf.back/pgfpointorigin"
                        >\pgfpointorigin</a
                      ></span
                    >}<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-paths#pgf.back/pgfpathcurveto"
                        >\pgfpathcurveto</a
                      ></span
                    ><br />
                    <span class="spaces">      </span>{<span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-points#pgf.back/pgfpoint"
                        >\pgfpoint</a
                      ></span
                    >{<span class="textcolor" style="color: #000000">0cm</span
                    >}{<span class="textcolor" style="color: #000000">2cm</span
                    >}}{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-points#pgf.back/pgfpoint"
                        >\pgfpoint</a
                      ></span
                    >{<span class="textcolor" style="color: #000000">3cm</span
                    >}{<span class="textcolor" style="color: #000000">2cm</span
                    >}}{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-points#pgf.back/pgfpoint"
                        >\pgfpoint</a
                      ></span
                    >{<span class="textcolor" style="color: #000000">3cm</span
                    >}{<span class="textcolor" style="color: #000000">0cm</span
                    >}}<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #000000"
                      >\end</span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-decorations#pgf.pgfdecoration"
                        >pgfdecoration</a
                      ></span
                    >}<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #0000b2"
                      ><a href="base-actions#pgf.back/pgfusepath"
                        >\pgfusepath</a
                      ></span
                    >{<span class="textcolor" style="color: #000000"
                      >stroke</span
                    >}<br />
                    <span class="textcolor" style="color: #000000">\end</span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-scopes#pgf.tikzpicture"
                        >tikzpicture</a
                      ></span
                    >}<br />
                  </code>
                </div>
              </figure>
            </ul>
          </div>
          <h5 id="autosec-8068">
            <a id="section-base-meta-decorations"></a
            ><span
              ><span class="sectionnumber" id="sec-103.5">103.5</span>
              Meta-Decorations</span
            ><a
              class="anchor-link"
              data-html-link="sec-103.5"
              data-pdf-destination="subsection.103.5"
              data-pdf-page="1116"
              href="#sec-103.5"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-8068"></a>

          <p>
            A meta-decoration provides an alternative way to decorate a path
            with multiple decorations. It is, in essence, an automaton that
            decorates an input path with decoration automatons. In general,
            however, the end effect is still that a path is decorated with other
            paths, and the input path should be thought of as being divided into
            sub-input-paths, each with their own decoration. Like ordinary
            decorations, a meta-decoration must be declared before it can be
            used.
          </p>
          <h6 id="autosec-8069">
            <span
              ><span class="sectionnumber" id="sec-103.5.1">103.5.1</span>
              Declaring Meta-Decorations</span
            ><a
              class="anchor-link"
              data-html-link="sec-103.5.1"
              data-pdf-destination="subsubsection.103.5.1"
              data-pdf-page="1117"
              href="#sec-103.5.1"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-8069"></a>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <a id="pgf.back/pgfdeclaremetadecorate"></a>
                    <span class="hl-def"
                      ><span class="declare"
                        ><kbd>\pgfdeclaremetadecorate</kbd></span
                      >{<span class="angle">&langle;</span><i>name</i
                      ><span class="angle">&rangle;</span>}{<span class="angle"
                        >&langle;</span
                      ><i>initial state</i
                      ><span class="angle">&rangle;</span>}{<span class="angle"
                        >&langle;</span
                      ><i>states</i><span class="angle">&rangle;</span>}</span
                    >
                    <a
                      class="anchor-link"
                      data-html-link="pgf.back/pgfdeclaremetadecorate"
                      href="#\pgfdeclaremetadecorate"
                      id="\pgfdeclaremetadecorate"
                      >&para;</a
                    >
                  </p>
                </li>
              </div>
              <p>
                This command declares a new meta-decoration called
                <span class="angle">&langle;</span><i>name</i
                ><span class="angle">&rangle;</span>. The
                <span class="angle">&langle;</span><i>states</i
                ><span class="angle">&rangle;</span> argument contains a
                description of the meta-decoration automaton&rsquo;s states and
                the transitions between them. The
                <span class="angle">&langle;</span><i>initial state</i
                ><span class="angle">&rangle;</span> is the state in which the
                automaton starts.
              </p>
              <p>
                The <span class="verb">\state</span> command is similar to the
                one found in decoration declarations, and takes the same form:
              </p>

              <div class="manualentry">
                <ul class="list" style="list-style-type: none">
                  <div class="entryheadline">
                    <li>
                      <p>
                        <span class="hl-def"
                          ><span class="declare"><kbd>\state</kbd></span
                          >{<span class="angle">&langle;</span><i>name</i
                          ><span class="angle">&rangle;</span>}[<span
                            class="angle"
                            >&langle;</span
                          ><i>options</i
                          ><span class="angle">&rangle;</span>]{<span
                            class="angle"
                            >&langle;</span
                          ><i>code</i><span class="angle">&rangle;</span>}</span
                        >
                      </p>
                    </li>
                  </div>
                  <p>
                    Declares the state <span class="angle">&langle;</span
                    ><i>name</i><span class="angle">&rangle;</span> inside the
                    current meta-decoration automaton. Unlike decorations,
                    states in meta-decorations are not executed within a group,
                    which makes the persistent computation options superfluous.
                    Consider using an initial state with
                    <span class="verb">width=0pt</span> to do precalculations
                    that could speed the execution of the meta-decoration.
                  </p>
                  <p>
                    The <span class="angle">&langle;</span><i>options</i
                    ><span class="angle">&rangle;</span> are executed with the
                    key path set to
                    <span class="verb">/pgf/meta-decorations automaton/</span>,
                    and the following keys are defined for this path:
                  </p>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a
                              id="pgf./pgf/meta-decoration:automaton/switch:if:less:than"
                            ></a>
                            <span class="hl-def"
                              ><kbd
                                ><span class="keyname"
                                  ><span class="declare"
                                    >/pgf/meta-decoration automaton/switch if
                                    less than</span
                                  ></span
                                >=</kbd
                              ><span class="angle">&langle;</span
                              ><i>dimension</i
                              ><span class="angle">&rangle;</span
                              ><span class="verb"> to </span
                              ><span class="angle">&langle;</span
                              ><i>new state</i
                              ><span class="angle">&rangle;</span></span
                            ><span class="hl-default">(no default)</span>
                            <a
                              class="anchor-link"
                              data-html-link="pgf./pgf/meta-decoration:automaton/switch:if:less:than"
                              href="#pgf/meta-decoration:automaton/switch:if:less:than"
                              id="pgf/meta-decoration:automaton/switch:if:less:than"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        This causes <span class="textsc">pgf</span> to check
                        whether the remaining distance to the end of the input
                        path is less than <span class="angle">&langle;</span
                        ><i>dimension</i><span class="angle">&rangle;</span>,
                        and, if so, to immediately switch to the state
                        <span class="angle">&langle;</span><i>new state</i
                        ><span class="angle">&rangle;</span>. When this key is
                        evaluated, the macro
                        <span class="verb">\pgfmetadecoratedpathlength</span>
                        will be defined as the total length of the decoration
                        path, allowing for values such as
                        <span class="verb">\pgfmetadecoratedpathlength/8</span>.
                      </p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a
                              id="pgf./pgf/meta-decoration:automaton/width"
                            ></a>
                            <span class="hl-def"
                              ><kbd
                                ><span class="keyname"
                                  ><span class="declare"
                                    >/pgf/meta-decoration automaton/width</span
                                  ></span
                                >=</kbd
                              ><span class="angle">&langle;</span
                              ><i>dimension</i
                              ><span class="angle">&rangle;</span></span
                            ><span class="hl-default">(no default)</span>
                            <a
                              class="anchor-link"
                              data-html-link="pgf./pgf/meta-decoration:automaton/width"
                              href="#pgf/meta-decoration:automaton/width"
                              id="pgf/meta-decoration:automaton/width"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        As always, this option will cause an immediate switch to
                        the state <span class="verb">final</span> if the
                        remaining distance on the input path is less than
                        <span class="angle">&langle;</span><i>dimension</i
                        ><span class="angle">&rangle;</span>.
                      </p>
                      <p>
                        Otherwise, this option tells
                        <span class="textsc">pgf</span> the width of the
                        &ldquo;meta-segment&rdquo;, that is, the length of the
                        sub-input-path which the decoration automaton specified
                        in <span class="angle">&langle;</span><i>code</i
                        ><span class="angle">&rangle;</span> will decorate.
                      </p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a
                              id="pgf./pgf/meta-decoration:automaton/next:state"
                            ></a>
                            <span class="hl-def"
                              ><kbd
                                ><span class="keyname"
                                  ><span class="declare"
                                    >/pgf/meta-decoration automaton/next
                                    state</span
                                  ></span
                                >=</kbd
                              ><span class="angle">&langle;</span
                              ><i>new state</i
                              ><span class="angle">&rangle;</span></span
                            ><span class="hl-default">(no default)</span>
                            <a
                              class="anchor-link"
                              data-html-link="pgf./pgf/meta-decoration:automaton/next:state"
                              href="#pgf/meta-decoration:automaton/next:state"
                              id="pgf/meta-decoration:automaton/next:state"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        After the code for a state has been executed, a state
                        switch to <span class="angle">&langle;</span
                        ><i>new state</i><span class="angle">&rangle;</span> is
                        performed. If this option is not given, the next state
                        is the same as the current state.
                      </p>
                    </ul>
                  </div>
                  <p>
                    The code in <span class="angle">&langle;</span><i>code</i
                    ><span class="angle">&rangle;</span> is quite different from
                    the code in a decoration state. In almost all cases only the
                    following three macros will be required:
                  </p>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a id="pgf.back/decoration"></a>
                            <span class="hl-def"
                              ><span class="declare"
                                ><kbd>\decoration</kbd></span
                              >{<span class="angle">&langle;</span><i>name</i
                              ><span class="angle">&rangle;</span>}</span
                            >
                            <a
                              class="anchor-link"
                              data-html-link="pgf.back/decoration"
                              href="#\decoration"
                              id="\decoration"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        This sets the decoration for the current state to
                        <span class="angle">&langle;</span><i>name</i
                        ><span class="angle">&rangle;</span>. If this command is
                        omitted, the <span class="verb">moveto</span> decoration
                        will be used.
                      </p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a id="pgf.back/beforedecoration"></a>
                            <span class="hl-def"
                              ><span class="declare"
                                ><kbd>\beforedecoration</kbd></span
                              >{<span class="angle">&langle;</span
                              ><i>before code</i
                              ><span class="angle">&rangle;</span>}</span
                            >
                            <a
                              class="anchor-link"
                              data-html-link="pgf.back/beforedecoration"
                              href="#\beforedecoration"
                              id="\beforedecoration"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        Defines <span class="angle">&langle;</span
                        ><i>before code</i
                        ><span class="angle">&rangle;</span> as (typically)
                        <span class="textsc">pgf</span> commands to be executed
                        before the decoration is applied to the current segment.
                        This command can be omitted. If you wish to set up some
                        decoration specific parameters such as segment length,
                        or segment amplitude, then they can be set in
                        <span class="angle">&langle;</span><i>before code</i
                        ><span class="angle">&rangle;</span>.
                      </p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a id="pgf.back/afterdecoration"></a>
                            <span class="hl-def"
                              ><span class="declare"
                                ><kbd>\afterdecoration</kbd></span
                              >{<span class="angle">&langle;</span
                              ><i>after code</i
                              ><span class="angle">&rangle;</span>}</span
                            >
                            <a
                              class="anchor-link"
                              data-html-link="pgf.back/afterdecoration"
                              href="#\afterdecoration"
                              id="\afterdecoration"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        Defines <span class="angle">&langle;</span
                        ><i>after code</i><span class="angle">&rangle;</span> as
                        commands to be executed after the decoration has been
                        applied to the current segment. This command can be
                        omitted.
                      </p>
                    </ul>
                  </div>
                  <p>
                    There are some macros that may be useful when creating
                    meta-decorations (note that they are all macros):
                  </p>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a id="pgf.back/pgfpointmetadecoratedpathfirst"></a>
                            <span class="hl-def"
                              ><span class="declare"
                                ><kbd
                                  >\pgfpointmetadecoratedpathfirst</kbd
                                ></span
                              ></span
                            >
                            <a
                              class="anchor-link"
                              data-html-link="pgf.back/pgfpointmetadecoratedpathfirst"
                              href="#\pgfpointmetadecoratedpathfirst"
                              id="\pgfpointmetadecoratedpathfirst"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        When the <span class="angle">&langle;</span
                        ><i>before code</i
                        ><span class="angle">&rangle;</span> is executed, this
                        macro stores the first point on the current
                        sub-input-path.
                      </p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a id="pgf.back/pgfpointmetadecoratedpathlast"></a>
                            <span class="hl-def"
                              ><span class="declare"
                                ><kbd>\pgfpointmetadecoratedpathlast</kbd></span
                              ></span
                            >
                            <a
                              class="anchor-link"
                              data-html-link="pgf.back/pgfpointmetadecoratedpathlast"
                              href="#\pgfpointmetadecoratedpathlast"
                              id="\pgfpointmetadecoratedpathlast"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        When the <span class="angle">&langle;</span
                        ><i>after code</i><span class="angle">&rangle;</span> is
                        executed, this macro stores the last point on the
                        current sub-input-path.
                      </p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a id="pgf.back/pgfmetadecoratedpathlength"></a>
                            <span class="hl-def"
                              ><span class="declare"
                                ><kbd>\pgfmetadecoratedpathlength</kbd></span
                              ></span
                            >
                            <a
                              class="anchor-link"
                              data-html-link="pgf.back/pgfmetadecoratedpathlength"
                              href="#\pgfmetadecoratedpathlength"
                              id="\pgfmetadecoratedpathlength"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>The entire length of the entire input path.</p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a
                              id="pgf.back/pgfmetadecoratedcompleteddistance"
                            ></a>
                            <span class="hl-def"
                              ><span class="declare"
                                ><kbd
                                  >\pgfmetadecoratedcompleteddistance</kbd
                                ></span
                              ></span
                            >
                            <a
                              class="anchor-link"
                              data-html-link="pgf.back/pgfmetadecoratedcompleteddistance"
                              href="#\pgfmetadecoratedcompleteddistance"
                              id="\pgfmetadecoratedcompleteddistance"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>The completed distance on the entire input path.</p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a
                              id="pgf.back/pgfmetadecoratedremainingdistance"
                            ></a>
                            <span class="hl-def"
                              ><span class="declare"
                                ><kbd
                                  >\pgfmetadecoratedremainingdistance</kbd
                                ></span
                              ></span
                            >
                            <a
                              class="anchor-link"
                              data-html-link="pgf.back/pgfmetadecoratedremainingdistance"
                              href="#\pgfmetadecoratedremainingdistance"
                              id="\pgfmetadecoratedremainingdistance"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>The remaining distance on the entire input path.</p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a
                              id="pgf.back/pgfmetadecoratedinputsegmentcompleteddistance"
                            ></a>
                            <span class="hl-def"
                              ><span class="declare"
                                ><kbd
                                  >\pgfmetadecoratedinputsegmentcompleteddistance</kbd
                                ></span
                              ></span
                            >
                            <a
                              class="anchor-link"
                              data-html-link="pgf.back/pgfmetadecoratedinputsegmentcompleteddistance"
                              href="#\pgfmetadecoratedinputsegmentcompleteddistance"
                              id="\pgfmetadecoratedinputsegmentcompleteddistance"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        The completed distance on the current input segment of
                        the entire input path.
                      </p>
                    </ul>
                  </div>

                  <div class="manualentry">
                    <ul class="list" style="list-style-type: none">
                      <div class="entryheadline">
                        <li>
                          <p>
                            <a
                              id="pgf.back/pgfmetadecoratedinputsegmentremainingdistance"
                            ></a>
                            <span class="hl-def"
                              ><span class="declare"
                                ><kbd
                                  >\pgfmetadecoratedinputsegmentremainingdistance</kbd
                                ></span
                              ></span
                            >
                            <a
                              class="anchor-link"
                              data-html-link="pgf.back/pgfmetadecoratedinputsegmentremainingdistance"
                              href="#\pgfmetadecoratedinputsegmentremainingdistance"
                              id="\pgfmetadecoratedinputsegmentremainingdistance"
                              >&para;</a
                            >
                          </p>
                        </li>
                      </div>
                      <p>
                        The remaining distance on the current input segment of
                        the entire input path.
                      </p>
                    </ul>
                  </div>
                </ul>
              </div>
              <p>Here is a complete example of a meta-decoration:</p>

              <figure class="example">
                <div class="example-image">
                  <p>
                    <span
                      class="lateximagesource"
                      id="lateximage-pgfmanual-3260"
                      ><!--
--><img
                        alt="(-tikz-&nbsp;diagram)"
                        class="lateximage"
                        height="418.658"
                        loading="lazy"
                        src="pgfmanual-images/image-3260.png"
                        style
                        width="124.634"
                    /></span>
                  </p>
                </div>

                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <span class="codepreamble"
                      >\usetikzlibrary {decorations,decorations.pathmorphing} </span
                    ><br />
                    <span class="textcolor" style="color: #0000b2"
                      >\pgfdeclaremetadecoration</span
                    >{<span class="textcolor" style="color: #000000"
                      ><a href="tikz-arrows#pgf.arrows">arrows</a></span
                    >}{<span class="textcolor" style="color: #000000"
                      ><a href="library-automata#pgf.initial">initial</a></span
                    >}{<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #0000b2"
                      ><a href="base-decorations#pgf.back/state"
                        >\state</a
                      ></span
                    >{<span class="textcolor" style="color: #000000"
                      ><a href="library-automata#pgf.initial">initial</a></span
                    >}[<span class="textcolor" style="color: #008000"
                      ><a href="tikz-arrows#pgf.width">width</a></span
                    >=<span class="textcolor" style="color: #008000">0pt</span
                    >, <span class="textcolor" style="color: #008000"
                      ><a href="base-decorations#pgf.next:state"
                        >next state</a
                      ></span
                    >=<span class="textcolor" style="color: #008000">arrow</span
                    >]<br />
                    <span class="spaces">  </span>{<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="math-parsing#pgf.back/pgfmathdivide"
                        >\pgfmathdivide</a
                      ></span
                    >{<span class="textcolor" style="color: #000000">100</span
                    >}{<span class="textcolor" style="color: #0000b2"
                      ><a
                        href="base-decorations#pgf.back/pgfmetadecoratedpathlength"
                        >\pgfmetadecoratedpathlength</a
                      ></span
                    >}<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      >\let</span
                    ><span class="textcolor" style="color: #0000b2"
                      >\factor</span
                    ><span class="textcolor" style="color: #0000b2"
                      >\pgfmathresult</span
                    ><br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-actions#pgf.back/pgfsetlinewidth"
                        >\pgfsetlinewidth</a
                      ></span
                    >{<span class="textcolor" style="color: #000000">1pt</span
                    >}<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      >\pgfset</span
                    >{<span class="textcolor" style="color: #000000"
                      >/pgf/decoration/segment</span
                    >
                    <span class="textcolor" style="color: #000000"
                      >length=4pt</span
                    >}<br />
                    <span class="spaces">  </span>}<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #0000b2"
                      ><a href="base-decorations#pgf.back/state"
                        >\state</a
                      ></span
                    >{<span class="textcolor" style="color: #000000">arrow</span
                    >}[<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #008000"
                      ><a href="base-decorations#pgf.switch:if:less:than"
                        >switch if less than</a
                      ></span
                    >=<span class="textcolor" style="color: #008000"
                      ><span class="textcolor" style="color: #0000b2"
                        >\pgfmetadecorationsegmentlength</span
                      > <a href="tikz-paths#pgf.to">to</a> final</span
                    >,<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #008000"
                      ><a href="tikz-arrows#pgf.width">width</a></span
                    >=<span class="textcolor" style="color: #008000"
                      ><span class="textcolor" style="color: #0000b2"
                        >\pgfmetadecorationsegmentlength/</span
                      >3</span
                    >,<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #008000"
                      ><a href="base-decorations#pgf.next:state"
                        >next state</a
                      ></span
                    >=<span class="textcolor" style="color: #008000"
                      >zigzag</span
                    >]<br />
                    <span class="spaces">  </span>{<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-decorations#pgf.back/decoration"
                        >\decoration</a
                      ></span
                    >{<span class="textcolor" style="color: #000000"
                      >curveto</span
                    >}<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-decorations#pgf.back/beforedecoration"
                        >\beforedecoration</a
                      ></span
                    ><br />
                    <span class="spaces">    </span>{<br />
                    <span class="spaces">      </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="math-parsing#pgf.back/pgfmathparse"
                        >\pgfmathparse</a
                      ></span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a
                        href="base-decorations#pgf.back/pgfmetadecoratedcompleteddistance"
                        >\pgfmetadecoratedcompleteddistance</a
                      ></span
                    ><span class="textcolor" style="color: #000000">*</span
                    ><span class="textcolor" style="color: #0000b2"
                      >\factor</span
                    >}<br />
                    <span class="spaces">      </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-actions#pgf.back/pgfsetcolor"
                        >\pgfsetcolor</a
                      ></span
                    >{<span class="textcolor" style="color: #000000">red!</span
                    ><span class="textcolor" style="color: #0000b2"
                      >\pgfmathresult</span
                    ><span class="textcolor" style="color: #000000"
                      >!yellow</span
                    >}<br />
                    <span class="spaces">      </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-paths#pgf.back/pgfpathmoveto"
                        >\pgfpathmoveto</a
                      ></span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a
                        href="base-decorations#pgf.back/pgfpointmetadecoratedpathfirst"
                        >\pgfpointmetadecoratedpathfirst</a
                      ></span
                    >}<br />
                    <span class="spaces">    </span>}<br />
                    <span class="spaces">  </span>}<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #0000b2"
                      ><a href="base-decorations#pgf.back/state"
                        >\state</a
                      ></span
                    >{<span class="textcolor" style="color: #000000"
                      >zigzag</span
                    >}[<span class="textcolor" style="color: #008000"
                      ><a href="tikz-arrows#pgf.width">width</a></span
                    >=<span class="textcolor" style="color: #008000"
                      ><span class="textcolor" style="color: #0000b2"
                        >\pgfmetadecorationsegmentlength/</span
                      >3</span
                    >, <span class="textcolor" style="color: #008000"
                      ><a href="base-decorations#pgf.next:state"
                        >next state</a
                      ></span
                    >=<span class="textcolor" style="color: #008000"
                      ><a href="base-animations#pgf.end">end</a> arrow</span
                    >]<br />
                    <span class="spaces">  </span>{<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-decorations#pgf.back/decoration"
                        >\decoration</a
                      ></span
                    >{<span class="textcolor" style="color: #000000"
                      >zigzag</span
                    >}<br />
                    <span class="spaces">  </span>}<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #0000b2"
                      ><a href="base-decorations#pgf.back/state"
                        >\state</a
                      ></span
                    >{<span class="textcolor" style="color: #000000"
                      ><a href="base-animations#pgf.end">end</a></span
                    >
                    <span class="textcolor" style="color: #000000">arrow</span
                    >}[<span class="textcolor" style="color: #008000"
                      ><a href="tikz-arrows#pgf.width">width</a></span
                    >=<span class="textcolor" style="color: #008000"
                      ><span class="textcolor" style="color: #0000b2"
                        >\pgfmetadecorationsegmentlength/</span
                      >3</span
                    >, <span class="textcolor" style="color: #008000"
                      ><a href="base-decorations#pgf.next:state"
                        >next state</a
                      ></span
                    >=<span class="textcolor" style="color: #008000">move</span
                    >]<br />
                    <span class="spaces">  </span>{<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-decorations#pgf.back/decoration"
                        >\decoration</a
                      ></span
                    >{<span class="textcolor" style="color: #000000"
                      >curveto</span
                    >}<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-decorations#pgf.back/beforedecoration"
                        >\beforedecoration</a
                      ></span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-paths#pgf.back/pgfpathmoveto"
                        >\pgfpathmoveto</a
                      ></span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a
                        href="base-decorations#pgf.back/pgfpointmetadecoratedpathfirst"
                        >\pgfpointmetadecoratedpathfirst</a
                      ></span
                    >}}<br />
                    <span class="spaces">    </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-decorations#pgf.back/afterdecoration"
                        >\afterdecoration</a
                      ></span
                    ><br />
                    <span class="spaces">    </span>{<br />
                    <span class="spaces">      </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-actions#pgf.back/pgfsetarrowsend"
                        >\pgfsetarrowsend</a
                      ></span
                    >{<span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.to">to</a></span
                    >}<br />
                    <span class="spaces">      </span><span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-actions#pgf.back/pgfusepath"
                        >\pgfusepath</a
                      ></span
                    >{<span class="textcolor" style="color: #000000"
                      >stroke</span
                    >}<br />
                    <span class="spaces">    </span>}<br />
                    <span class="spaces">  </span>}<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #0000b2"
                      ><a href="base-decorations#pgf.back/state"
                        >\state</a
                      ></span
                    >{<span class="textcolor" style="color: #000000">move</span
                    >}[<span class="textcolor" style="color: #008000"
                      ><a href="tikz-arrows#pgf.width">width</a></span
                    >=<span class="textcolor" style="color: #008000"
                      ><span class="textcolor" style="color: #0000b2"
                        >\pgfmetadecorationsegmentlength/</span
                      >2</span
                    >, <span class="textcolor" style="color: #008000"
                      ><a href="base-decorations#pgf.next:state"
                        >next state</a
                      ></span
                    >=<span class="textcolor" style="color: #008000">arrow</span
                    >]{}<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #0000b2"
                      ><a href="base-decorations#pgf.back/state"
                        >\state</a
                      ></span
                    >{<span class="textcolor" style="color: #000000">final</span
                    >}{}<br />
                    }<br />
                    <br />
                    <span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-scopes#pgf.back/tikz">\tikz</a></span
                    ><span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-actions#pgf.back/draw">\draw</a></span
                    >[<span class="textcolor" style="color: #008000"
                      ><a href="tikz-decorations#pgf.decorate"
                        >decorate</a
                      ></span
                    >,<span class="textcolor" style="color: #008000"
                      ><a href="tikz-decorations#pgf.decoration"
                        >decoration</a
                      ></span
                    >=<span class="textcolor" style="color: #008000"
                      >{<a href="tikz-arrows#pgf.arrows">arrows</a>,meta-segment
                      length=2cm}</span
                    >]<br />
                    <span class="spaces">  </span><span class="textcolor" style="color: #800080"
                      >(0,0)</span
                    ><span class="spaces"> </span>..<span class="spaces"> </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="library-edges#pgf.controls">controls</a></span
                    >
                    <span class="textcolor" style="color: #800080">(0,2)</span
                    ><span class="spaces">   </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="pgfkeys#pgf.and">and</a></span
                    >
                    <span class="textcolor" style="color: #800080">(3,2)</span
                    ><span class="spaces">   </span>..<span class="spaces"> </span><span
                      class="textcolor"
                      style="color: #800080"
                      >(3,0)</span
                    ><br />
                    <span class="spaces">        </span>..<span class="spaces"> </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="library-edges#pgf.controls">controls</a></span
                    >
                    <span class="textcolor" style="color: #800080">(3,-2)</span
                    ><span class="spaces">  </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="pgfkeys#pgf.and">and</a></span
                    >
                    <span class="textcolor" style="color: #800080">(0,-2)</span
                    ><span class="spaces">  </span>..<span class="spaces"> </span><span
                      class="textcolor"
                      style="color: #800080"
                      >(0,-4)</span
                    ><br />
                    <span class="spaces">        </span>..<span class="spaces"> </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="library-edges#pgf.controls">controls</a></span
                    >
                    <span class="textcolor" style="color: #800080">(0,-6)</span
                    ><span class="spaces">  </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="pgfkeys#pgf.and">and</a></span
                    >
                    <span class="textcolor" style="color: #800080">(3,-6)</span
                    ><span class="spaces">  </span>..<span class="spaces"> </span><span
                      class="textcolor"
                      style="color: #800080"
                      >(3,-8)</span
                    ><br />
                    <span class="spaces">        </span>..<span class="spaces"> </span><span
                      class="textcolor"
                      style="color: #000000"
                      ><a href="library-edges#pgf.controls">controls</a></span
                    >
                    <span class="textcolor" style="color: #800080">(3,-10)</span
                    > <span class="textcolor" style="color: #000000"
                      ><a href="pgfkeys#pgf.and">and</a></span
                    >
                    <span class="textcolor" style="color: #800080">(0,-10)</span
                    ><span class="spaces"> </span>..<span class="spaces"> </span><span
                      class="textcolor"
                      style="color: #800080"
                      >(0,-8)</span
                    >;<br />
                  </code>
                </div>
              </figure>
            </ul>
          </div>
          <h6 id="autosec-8072">
            <span
              ><span class="sectionnumber" id="sec-103.5.2">103.5.2</span>
              Predefined Meta-decorations</span
            ><a
              class="anchor-link"
              data-html-link="sec-103.5.2"
              data-pdf-destination="subsubsection.103.5.2"
              data-pdf-page="1118"
              href="#sec-103.5.2"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-8072"></a>

          <p>
            There are no predefined meta-decorations loaded with
            <span class="textsc">pgf</span>.
          </p>
          <h6 id="autosec-8073">
            <span
              ><span class="sectionnumber" id="sec-103.5.3">103.5.3</span> Using
              Meta-Decorations</span
            ><a
              class="anchor-link"
              data-html-link="sec-103.5.3"
              data-pdf-destination="subsubsection.103.5.3"
              data-pdf-page="1118"
              href="#sec-103.5.3"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-8073"></a>

          <p>
            Using meta-decorations is &ldquo;simpler&rdquo; than using
            decorations, because you can only use one meta-decoration per path.
          </p>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <a id="pgf.pgfmetadecoration"></a>
                    <span class="hl-def"
                      ><kbd
                        >\begin{<span class="declare">pgfmetadecoration</span
                        >}</kbd
                      >{<span class="angle">&langle;</span><i>name</i
                      ><span class="angle">&rangle;</span>}</span
                    >
                    <a
                      class="anchor-link"
                      data-html-link="pgf.pgfmetadecoration"
                      href="#pgf.pgfmetadecoration"
                      id="pgf.pgfmetadecoration"
                      >&para;</a
                    >
                  </p>
                </li>
              </div>

              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd> </kbd><span class="angle">&langle;</span
                      ><i>environment contents</i
                      ><span class="angle">&rangle;</span></span
                    >
                  </p>
                </li>
              </div>

              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd
                        >\end{<span class="declare">pgfmetadecoration</span
                        >}</kbd
                      ></span
                    >
                  </p>
                </li>
              </div>
              <p>
                This environment decorates the input path described in
                <span class="angle">&langle;</span><i>environment contents</i
                ><span class="angle">&rangle;</span>, with the meta-decoration
                <span class="angle">&langle;</span><i>name</i
                ><span class="angle">&rangle;</span>.
              </p>
            </ul>
          </div>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd><span class="declare">\pgfmetadecoration</span></kbd
                      >{<span class="angle">&langle;</span><i>name</i
                      ><span class="angle">&rangle;</span>}</span
                    >
                  </p>
                </li>
              </div>

              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd> </kbd><span class="angle">&langle;</span
                      ><i>environment contents</i
                      ><span class="angle">&rangle;</span></span
                    >
                  </p>
                </li>
              </div>

              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd
                        ><span class="declare">\endpgfmetadecoration</span></kbd
                      ></span
                    >
                  </p>
                </li>
              </div>
              <p>
                The plain
                <span class="latexlogofont"
                  ><span class="latexlogo"
                    >T<span class="latexlogosub">e</span>X</span
                  ></span
                >
                version of the
                <span class="verb">{pgfmetadecoration}</span> environment.
              </p>
            </ul>
          </div>

          <div class="manualentry">
            <ul class="list" style="list-style-type: none">
              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd
                        ><span class="declare"
                          >\startpgfmetadecoration</span
                        ></kbd
                      >{<span class="angle">&langle;</span><i>name</i
                      ><span class="angle">&rangle;</span>}</span
                    >
                  </p>
                </li>
              </div>

              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd> </kbd><span class="angle">&langle;</span
                      ><i>environment contents</i
                      ><span class="angle">&rangle;</span></span
                    >
                  </p>
                </li>
              </div>

              <div class="entryheadline">
                <li>
                  <p>
                    <span class="hl-def"
                      ><kbd
                        ><span class="declare"
                          >\stoppgfmetadecoration</span
                        ></kbd
                      ></span
                    >
                  </p>
                </li>
              </div>
              <p>
                The Con<span class="latexlogofont"
                  ><span class="latexlogo"
                    >T<span class="latexlogosub">e</span>X</span
                  ></span
                >t version of the
                <span class="verb">{pgfmetadecoration}</span> environment.
              </p>
            </ul>
          </div>
        </section>
      </main>

      <footer>
        <div class="footer-left">
          <a href="/license">License</a> &middot;
          <a href="https://ctan.org/pkg/pgf">CTAN</a> &middot;
          <a href="https://pgf-tikz.github.io/pgf/pgfmanual.pdf"
            >Official PDF version</a
          >
          &middot;
          <a href="https://github.com/DominikPeters/tikz.dev-issues/issues"
            >Feedback and issues</a
          >
          &middot;
          <a href="https://github.com/DominikPeters/pgf-tikz-html-manual"
            >About this HTML version</a
          >
        </div>
        <div class="footer-right">
          <em>HTML version last updated: 2024-03-21</em>
        </div>
      </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
    <script>
      docsearch({
        apiKey: "196e8c10ec187c9ae525dd5226fb9378",
        indexName: "tikz",
        appId: "JS6V5VZSDB",
        container: "#search",
        searchParameters: {
          filters: "tags:tikz",
        },
      });
    </script>
  </body>
</html>
